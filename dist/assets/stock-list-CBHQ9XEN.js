import{j as s,S as x,A as b,C as f,B as j,r as g,dz as P,eo as y,e8 as C,p,em as T,e as R,I as S,aD as k,ep as D,ec as B,H as E,dJ as I,dH as L}from"./index-D9XQ5HZn.js";import{u as A,E as _}from"./error-block-w_O0iSRH.js";import{C as F}from"./custom-breadcrumbs-CazdlgA0.js";import{P as O}from"./permission-access-controller-CBnTTSPg.js";import{u as q,g as N,r as v,T as H,a as z,e as W}from"./table-selected-action-KNwZffED.js";import{T as Q}from"./table-no-data-B6s3Ok4M.js";import{T as G,a as J,b as K,c as V}from"./table-head-custom-CmnvuSVC.js";import{T as $}from"./table-pagination-custom-Bx7mhuFH.js";import{T as i}from"./TableCell-BQnM0xNZ.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-DF3g1Q_L.js";import"./empty-content-Bkzy38Qy.js";import"./TablePagination-Daqijhxj.js";import"./KeyboardArrowRight-D9a5UIDu.js";import"./LastPage-C7MjNvcm.js";import"./Select-DEn4EjE4.js";import"./Menu-ChOTQt8U.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-DsCQaGZz.js";import"./FormControlLabel-CQyLNxlb.js";const M=({row:e,selected:t})=>{const l=s.jsxs(G,{hover:!0,selected:t,children:[s.jsx(i,{children:e==null?void 0:e.productId}),s.jsx(i,{children:s.jsxs(x,{spacing:2,direction:"row",alignItems:"center",children:[s.jsx(b,{alt:e==null?void 0:e.name,src:f.site.serverFileHost+(e==null?void 0:e.image)}),s.jsx(j,{component:"span",children:e==null?void 0:e.name})]})}),s.jsx(i,{children:e==null?void 0:e.totals_quantity}),s.jsx(i,{children:e==null?void 0:e.pending_quantity}),s.jsx(i,{children:e==null?void 0:e.processing_a_quantity}),s.jsx(i,{children:e==null?void 0:e.processing_b_quantity}),s.jsx(i,{children:e==null?void 0:e.ready_quantity}),s.jsx(i,{children:e==null?void 0:e.in_stock})]});return s.jsx(s.Fragment,{children:l})},U=[{id:"id",label:"#",width:60},{id:"productName",label:"Product Name",width:260},{id:"planId",label:"Plan Qty"},{id:"orderAmount",label:"Pending Stock"},{id:"status",label:"Processing A Stock"},{id:"status",label:"Processing B Stock"},{id:"status",label:"Ready to Deliver Stock"},{id:"status",label:"In Stock"}],X=({products:e})=>{const t=q({defaultOrderBy:"orderNumber"}),[l,h]=g.useState(e),n=P({name:"",status:"all",startDate:null,endDate:null}),o=y(n.state.startDate,n.state.endDate),r=Y({inputData:l,comparator:N(t.order,t.orderBy),filters:n.state,dateError:o});g.useEffect(()=>{h(e)},[e]),v(r,t.page,t.rowsPerPage);const d=!!n.state.name||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,c=!r.length&&d||!r.length;return s.jsx(C,{maxWidth:"xl",children:s.jsxs(x,{spacing:3,children:[s.jsx(F,{links:[{name:"Dashboard",href:p.dashboard.root},{name:"Reports",href:p.dashboard.reports.root},{name:"Stock Report",href:p.dashboard.reports.stock}],action:s.jsx(O,{permission:T.DOWNLOAD_REPORT,children:s.jsx(R,{variant:"contained",startIcon:s.jsx(S,{icon:"mdi:microsoft-excel"}),children:"Export Excel"})})}),s.jsxs(k,{children:[s.jsxs(j,{sx:{position:"relative"},children:[s.jsx(H,{dense:t.dense,numSelected:t.selected.length,rowCount:r.length}),s.jsxs(J,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[s.jsx(K,{order:t.order,orderBy:t.orderBy,headLabel:U,rowCount:r.length}),s.jsxs(V,{children:[r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>s.jsx(M,{row:a,selected:t.selected.includes(a.id)},a.id)),s.jsx(z,{height:t.dense?56:76,emptyRows:W(t.page,t.rowsPerPage,r.length)}),s.jsx(Q,{notFound:c})]})]})]}),s.jsx($,{page:t.page,dense:t.dense,count:r.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]})})};function Y({inputData:e,comparator:t,filters:l,dateError:h}){const{status:n,name:o,startDate:r,endDate:d}=l,c=e.map((a,m)=>[a,m]);return c.sort((a,m)=>{const u=t(a[0],m[0]);return u!==0?u:a[1]-m[1]}),e=c.map(a=>a[0]),o&&(e=e.filter(a=>a.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),n!=="all"&&(e=e.filter(a=>a.status===n)),h||r&&d&&(e=e.filter(a=>D(a.createdAt,r,d))),e}const Z={title:`Reports list | Dashboard - ${f.site.name}`};function Ce(){const e=A({queryKey:["stock-details"],queryFn:async()=>(await I.get(L.stock.details)).data});return e.isPending||e.isLoading?s.jsx(B,{}):e.isError?s.jsx(_,{route:p.dashboard.reports.root}):s.jsxs(s.Fragment,{children:[s.jsx(E,{children:s.jsxs("title",{children:[" ",Z.title]})}),s.jsx(X,{products:e.data})]})}export{Ce as default};
