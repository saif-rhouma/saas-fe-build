import{r as d,j as a,n as j,S as y,e as N}from"./index-DA_sWj7x.js";import{z as n,u as E,t as v,a as C,F as r}from"./form-provider-CTdVN4vu.js";import{h as S}from"./utils-D2vx0BgK.js";import"./image-CRDrcpoJ.js";import"./editor-BhUSbnWA.js";import{s as A}from"./schema-helper-BIiXJye3.js";import{a as u,b as T,D}from"./DialogContent-BquOMge6.js";import{D as c}from"./DialogTitle-DhGHrha_.js";import{L as w}from"./LoadingButton-BfquC3i-.js";const F=n.object({name:n.string().min(1,{message:"Name is required!"}),city:n.string(),email:n.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),phoneNumber:A.phoneNumber({isValidPhoneNumber:S}),taxNumber:n.number().optional(),address:n.string(),isActive:n.boolean()});function z({customer:e,open:p,onClose:m,handler:x}){const s=d.useMemo(()=>{var i;const t={name:(e==null?void 0:e.name)||"",city:(e==null?void 0:e.address.city)||"",email:(e==null?void 0:e.email)||"",phoneNumber:(e==null?void 0:e.phoneNumber)||"",address:((i=e==null?void 0:e.address)==null?void 0:i.street)||"",isActive:(e==null?void 0:e.isActive)||!0};return(e==null?void 0:e.taxNumber)==null||(t.taxNumber=parseInt(e==null?void 0:e.taxNumber,10)),t},[e]),[o,h]=d.useState(""),b=E({resolver:v(F),defaultValues:s}),{reset:l,handleSubmit:g,formState:{isSubmitting:M}}=b;d.useEffect(()=>{e&&l(s)},[e]);const f=g(async t=>{try{const i={...t};delete i.city,i.address={country:t.city,city:t.city,street:t.address},i.taxNumber=i.taxNumber.toString(),e?await x({id:e.id,payload:i}):await x(i),l()}catch(i){console.log(i),h(i instanceof Error?i.message:i)}});return a.jsxs(u,{fullWidth:!0,open:p,onClose:m,children:[a.jsx(c,{children:e?"Edit Customer":"Add Customer"}),!!o&&a.jsx(j,{severity:"error",sx:{mb:3},children:o}),a.jsxs(C,{methods:b,onSubmit:f,children:[a.jsx(T,{children:a.jsxs(y,{spacing:2,display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)"},children:[a.jsx(r.Text,{fullWidth:!0,label:"Enter Customer Name",name:"name",sx:{mt:2}}),a.jsx(r.Text,{label:"Enter The City",name:"city",sx:{mt:2}}),a.jsx(r.Phone,{name:"phoneNumber",label:"Phone number",sx:{mt:2}}),a.jsx(r.Text,{label:"Enter Email Address",type:"email",name:"email",sx:{mt:2}}),a.jsx(r.Text,{type:"number",label:"Enter Tax Number",name:"taxNumber",sx:{mt:2}}),a.jsx(r.Text,{label:"Enter Address",name:"address",multiline:!0,rows:3,sx:{mt:2}}),a.jsx(r.Switch,{name:"isActive",label:"Is Active?"})]})}),a.jsxs(D,{children:[a.jsx(w,{type:"submit",variant:"contained",children:e?"Save Changes":"Save"}),a.jsx(N,{color:"inherit",variant:"outlined",onClick:()=>{l(s),m()},children:"Cancel"})]})]})]})}export{z as O};
