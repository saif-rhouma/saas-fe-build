import{j as e,D as W,S as Q,e as B,l as ae,o as ie,r as w,dI as ne,dJ as O,dH as F,dK as R,p as M,aD as te,B as I,I as oe,T as Y,C as G,dL as X,bN as z}from"./index-CwDFRBrV.js";import{z as f,u as L,t as V,a as $,F as b}from"./form-provider-C8IltM3z.js";import{u as T}from"./useMutation-CkTHNDXi.js";import"./image-D_atTa8y.js";import"./editor-eNq_8vRL.js";import{P as K}from"./product-Item-button-BlqLfIqn.js";import{b as le}from"./upload-avatar-Bqr4alq-.js";import{a as J,b as Z,D as _}from"./DialogContent-DQegyPQl.js";import{D as P}from"./DialogTitle-B_p_zW0I.js";import{L as H}from"./LoadingButton-BM8YRB0z.js";import{A as re,a as ce,b as me}from"./AccordionSummary-DL212k_U.js";const de=({open:s,onClose:j,handleDrop:c,handleUpload:o,handleDelete:l,file:i})=>e.jsxs(J,{open:s,onClose:j,children:[e.jsx(P,{children:"Upload Product Image"}),e.jsx(W,{}),e.jsx(Z,{sx:{p:1},children:e.jsx(Q,{spacing:1,children:e.jsx(le,{value:i,onDrop:c,onDelete:l})})}),e.jsxs(_,{children:[e.jsx(H,{type:"submit",variant:"contained",onClick:o,children:"Upload"}),e.jsx(B,{color:"inherit",variant:"outlined",onClick:j,children:"Cancel"})]})]}),pe=f.object({name:f.string().min(1,{message:"Name is required!"}),price:f.number().min(1,{message:"Price should not be $0.00"}),isActive:f.boolean()});function Ce({currentProduct:s,productsImages:j}){const c=ae(),o=ie(),l=w.useMemo(()=>({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",price:(s==null?void 0:s.price)||0,images:(s==null?void 0:s.images)||[],isActive:(s==null?void 0:s.isActive)===void 0?!0:s==null?void 0:s.isActive}),[s]),[i,n]=w.useState(),[t,p]=w.useState(),m=L({resolver:V(pe),defaultValues:l}),{reset:r,watch:u,setValue:N,handleSubmit:y,formState:{isSubmitting:S}}=m;w.useEffect(()=>{s&&(r(l),n(s==null?void 0:s.image))},[s,l,r]);const C=y(async a=>{try{if(i&&(a.image=i),s!=null&&s.id){const{id:h}=s;await x({id:h,payload:a})}else await E(a)}catch(h){console.error(h)}}),D=()=>{const a=new FormData;a.append("file",t),U(a)},v=w.useCallback(a=>{i===a?n():n(a)},[i]),d=w.useCallback(a=>{const h=a[0];p(h)},[]),A=()=>{p(null)},g=ne(),k={headers:{"content-type":"multipart/form-data"}},{mutate:U}=T({mutationFn:a=>O.post(F.files.upload,a,k),onSuccess:async()=>{R.success("New Image Has Been Uploaded!")},onSettled:async()=>{await g.invalidateQueries({queryKey:["products-images"]}),p(null),o.onFalse()},onError:a=>{console.log(a)}}),{mutate:E}=T({mutationFn:a=>O.post(F.products.create,a),onSuccess:async()=>{R.success("New Product Has Been Created!"),r(),c.push(M.dashboard.product.root)},onSettled:async()=>{await g.invalidateQueries({queryKey:["products"]}),o.onFalse()},onError:a=>{console.log(a)}}),{mutate:x}=T({mutationFn:({id:a,payload:h})=>O.patch(F.products.edit+a,h),onSuccess:async()=>{R.success("Product Has Been Modified!"),r(),c.push(M.dashboard.product.root)},onSettled:async()=>{await g.invalidateQueries({queryKey:["products"]}),o.onFalse()},onError:a=>{console.log(a)}}),{mutate:q}=T({mutationFn:a=>O.delete(F.files.delete+a),onSuccess:async()=>{R.success("Image Has been Deleted!")},onSettled:async()=>{await g.invalidateQueries({queryKey:["products-images"]})},onError:a=>{console.log(a)}});return e.jsxs(e.Fragment,{children:[e.jsx(te,{children:e.jsxs($,{methods:m,onSubmit:C,children:[e.jsxs(Q,{spacing:4,sx:{p:3},display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[e.jsxs(I,{columnGap:2,rowGap:3,display:"flex",flexDirection:"column",children:[e.jsx(b.Text,{fullWidth:!0,label:"Product Name",name:"name"}),e.jsx(b.Text,{fullWidth:!0,label:"Description",name:"description"}),e.jsx(b.Text,{fullWidth:!0,type:"number",label:"Product Price",name:"price"}),s&&e.jsx(b.Switch,{name:"isActive",label:"Is Active?"})]}),e.jsx(I,{children:e.jsx(I,{sx:{borderRadius:1,overflow:"hidden",border:a=>`solid 1px ${a.vars.palette.divider}`},children:e.jsxs(re,{defaultExpanded:s,children:[e.jsx(ce,{expandIcon:e.jsx(oe,{icon:"eva:arrow-ios-downward-fill"}),children:e.jsx(Y,{children:"Select Icon"})}),e.jsx(W,{}),e.jsx(me,{children:e.jsxs(I,{spacing:2,gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",md:"repeat(6, 1fr)"},children:[j.map(a=>e.jsx(K,{image:G.site.serverFileHost+a.name,handleClick:v,handleDelete:q,payload:a.name,selected:a.name===i})),e.jsx(K,{image:`${G.site.basePath}/assets/upload-img.png`,handleClick:()=>o.onToggle()})]})})]})})})]}),e.jsx(I,{spacing:4,sx:{p:3},display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",children:e.jsxs(I,{display:"flex",gap:2,height:50,children:[e.jsx(H,{type:"submit",variant:"contained",children:"Save"}),e.jsx(B,{variant:"outlined",children:"Cancel"})]})})]})}),e.jsx(de,{open:o.value,onClose:o.onFalse,file:t,handleUpload:D,handleDrop:d,handleDelete:A})]})}var ee={exports:{}};(function(s,j){(function(c,o){s.exports=o()})(X,()=>{return c={705:l=>{l.exports=function(i,n){const t=[];return n.length===0?t.push({text:i,highlight:!1}):n[0][0]>0&&t.push({text:i.slice(0,n[0][0]),highlight:!1}),n.forEach((p,m)=>{const r=p[0],u=p[1];t.push({text:i.slice(r,u),highlight:!0}),m===n.length-1?u<i.length&&t.push({text:i.slice(u,i.length),highlight:!1}):u<n[m+1][0]&&t.push({text:i.slice(u,n[m+1][0]),highlight:!1})}),t}}},o={},function l(i){var n=o[i];if(n!==void 0)return n.exports;var t=o[i]={exports:{}};return c[i](t,t.exports,l),t.exports}(705);var c,o})})(ee);var xe=ee.exports;const De=z(xe);var se={exports:{}};(function(s,j){(function(c,o){s.exports=o()})(X,()=>{return c={772:(l,i,n)=>{const t=n(826).remove,p=/[.*+?^${}()|[\]\\]/g,m=/[a-z0-9_]/i,r=/\s+/;l.exports=function(u,N,y){var S,C;C={insideWords:!1,findAllOccurrences:!1,requireMatchAll:!1},S=(S=y)||{},Object.keys(S).forEach(d=>{C[d]=!!S[d]}),y=C;const D=Array.from(u).map(d=>t(d));let v=D.join("");return(N=t(N)).trim().split(r).filter(d=>d.length>0).reduce((d,A)=>{const g=A.length,k=!y.insideWords&&m.test(A[0])?"\\b":"",U=new RegExp(k+A.replace(p,"\\$&"),"i");let E,x;if(E=U.exec(v),y.requireMatchAll&&E===null)return v="",[];for(;E;){x=E.index;const q=g-D.slice(x,x+g).join("").length,a=x-D.slice(0,x).join("").length,h=[x+a,x+g+a+q];if(h[0]!==h[1]&&d.push(h),v=v.slice(0,x)+new Array(g+1).join(" ")+v.slice(x+g),!y.findAllOccurrences)break;E=U.exec(v)}return d},[]).sort((d,A)=>d[0]-A[0])}},826:l=>{var i={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ù:"u",ú:"u",û:"u",ü:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z"},n=Object.keys(i).join("|"),t=new RegExp(n,"g"),p=new RegExp(n,""),m=function(r){return r.replace(t,function(u){return i[u]})};l.exports=m,l.exports.has=function(r){return!!r.match(p)},l.exports.remove=m}},o={},function l(i){var n=o[i];if(n!==void 0)return n.exports;var t=o[i]={exports:{}};return c[i](t,t.exports,l),t.exports}(772);var c,o})})(se);var he=se.exports;const Ue=z(he),ue=f.object({rating:f.number().min(1,"Rating must be greater than or equal to 1!"),name:f.string().min(1,{message:"Name is required!"}),review:f.string().min(1,{message:"Review is required!"}),email:f.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Oe({onClose:s,...j}){const c={rating:0,review:"",name:"",email:""},o=L({mode:"all",resolver:V(ue),defaultValues:c}),{reset:l,handleSubmit:i,formState:{isSubmitting:n}}=o,t=i(async m=>{try{await new Promise(r=>setTimeout(r,500)),l(),s(),console.info("DATA",m)}catch(r){console.error(r)}}),p=w.useCallback(()=>{s(),l()},[s,l]);return e.jsx(J,{onClose:s,...j,children:e.jsxs($,{methods:o,onSubmit:t,children:[e.jsx(P,{children:" Add Review "}),e.jsxs(Z,{children:[e.jsxs("div",{children:[e.jsx(Y,{variant:"body2",sx:{mb:1},children:"Your review about this product:"}),e.jsx(b.Rating,{name:"rating"})]}),e.jsx(b.Text,{name:"review",label:"Review *",multiline:!0,rows:3,sx:{mt:3}}),e.jsx(b.Text,{name:"name",label:"Name *",sx:{mt:3}}),e.jsx(b.Text,{name:"email",label:"Email *",sx:{mt:3}})]}),e.jsxs(_,{children:[e.jsx(B,{color:"inherit",variant:"outlined",onClick:p,children:"Cancel"}),e.jsx(H,{type:"submit",variant:"contained",loading:n,children:"Post"})]})]})})}export{Oe as P,Ce as a,Ue as m,De as p};
