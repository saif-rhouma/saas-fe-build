import{r as h,de as b,e2 as j,j as a,B as g,S as w,I as C,aL as T,A as I,C as p,ed as u}from"./index-DQSze1U8.js";import{b as P}from"./format-number-7a30pGHJ.js";import{g as v}from"./utils-MBUcMVfY.js";import{u as y}from"./use-table-85KX-QaE.js";import{a as A,b as S,c as $,T as B}from"./table-head-custom-DZUgBRZf.js";import{T as D}from"./table-pagination-custom-BkSl39E6.js";import{T as L}from"./TextField-BM3ncy7B.js";import{I as R}from"./InputAdornment-BEfqHtqO.js";import{T as l}from"./TableCell-CZoNGEO_.js";import{A as E}from"./AvatarGroup-Dz7uDWNg.js";const F=[{id:"orderNumber",label:"#",width:40,align:"center"},{id:"name",label:"Product Name"},{id:"rate",label:"Rate",width:200,align:"center"},{id:"totalAmount",label:"Quantity",width:80,align:"center"},{id:"status",label:"Total",width:200,align:"center"}],K=({products:r,defaultRowsPerPage:m})=>{const t=y({defaultOrderBy:"orderId",defaultRowsPerPage:m}),[c,x]=h.useState(r);h.useEffect(()=>{x(r)},[r]);const s=b({name:"",status:"all",startDate:null,endDate:null}),o=j(s.state.startDate,s.state.endDate),i=N({inputData:c,comparator:v(t.order,t.orderBy),filters:s.state,dateError:o});s.state.name||s.state.status!=="all"||s.state.startDate&&s.state.endDate;const d=h.useCallback(e=>{t.onResetPage(),s.setState({name:e.target.value})},[s,t]);return a.jsxs(g,{display:"flex",flexDirection:"column",alignItems:"center",sx:{borderRadius:1,height:1,width:1,overflow:"hidden",border:e=>`solid 1px ${e.vars.palette.divider}`},children:[a.jsx(w,{className:"print-hide",spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:1,width:1},children:a.jsx(L,{value:s.state.name,onChange:d,size:"small",placeholder:"Search product",InputProps:{startAdornment:a.jsx(R,{position:"start",children:a.jsx(C,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),a.jsx(g,{sx:{flex:1,width:1},children:a.jsxs(A,{size:"small",children:[a.jsx(S,{headLabel:F}),a.jsx($,{children:i.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map((e,n)=>a.jsxs(B,{children:[a.jsxs(l,{align:"center",children:[" ",n+1||e.productId," "]}),a.jsx(l,{align:"center",children:a.jsxs(w,{direction:"row",alignItems:"center",spacing:1,children:[a.jsx(E,{sx:{[`& .${T.avatar}`]:{width:24,height:24}},children:a.jsx(I,{alt:e==null?void 0:e.name,src:`${p.site.serverFileHost}${e==null?void 0:e.image}`},e==null?void 0:e.id)}),`${e.product.name}`]})}),a.jsx(l,{align:"center",children:`${P(e.snapshotProductPrice||e.product.price)}`}),a.jsx(l,{align:"center",children:a.jsx(g,{sx:{fontWeight:"bold"},children:e==null?void 0:e.quantity})}),a.jsx(l,{align:"center",children:`${P(e.snapshotProductPrice*e.quantity)}`})]},`${e.productId}`))})]})}),a.jsx(D,{className:"print-hide",sx:{width:1},page:t.page,count:i.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,rowsPerPageOptions:[]})]})};function N({inputData:r,comparator:m,filters:t,dateError:c}){const{status:x,name:s,startDate:o,endDate:i}=t,d=r.map((e,n)=>[e,n]);return d.sort((e,n)=>{const f=m(e[0],n[0]);return f!==0?f:e[1]-n[1]}),r=d.map(e=>e[0]),s&&(r=r.filter(e=>{var n;return e.id.toString().toLowerCase().indexOf(s.toLowerCase())!==-1||((n=e==null?void 0:e.product)==null?void 0:n.name.toLowerCase().indexOf(s.toLowerCase()))!==-1})),c||o&&i&&(r=r.filter(e=>u(e.createdAt,o,i))),r}export{K as Q};
