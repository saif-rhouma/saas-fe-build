import{r as h,de as j,e2 as C,j as t,B as u,S as T,I as P,aS as p,d0 as S,d7 as b,eh as v,ei as w}from"./index-DBAnnifB.js";import{g as y,r as F,e as $}from"./utils-MBUcMVfY.js";import{u as R}from"./use-table-_0b8U19R.js";import{a as D,b as L,c as I,T as A}from"./table-head-custom-oTVXNsWX.js";import{T as E}from"./table-pagination-custom-CSBoVDUr.js";import{T as O}from"./TextField-Cnf5s-_6.js";import{I as B}from"./InputAdornment-kj6j4mRM.js";import{S as H}from"./Select-Cs1GmroI.js";import{T as g}from"./TableCell-D0tRcJwU.js";import{T as N}from"./table-empty-rows-6TIBM6gU.js";const Q=[{id:"orderNumber",label:"#",width:40,align:"center"},{id:"name",label:"Topic"},{id:"rate",label:"Date",width:200,align:"center"},{id:"totalAmount",label:"Status",width:80,align:"center"},{id:"status",label:"Priority",width:120,align:"center"}],ee=({tickets:r})=>{const a=R({defaultOrderBy:"orderId",defaultRowsPerPage:5}),[x,f]=h.useState(r),s=j({name:"",status:"all",startDate:null,endDate:null});h.useEffect(()=>{f(r)},[r]);const n=C(s.state.startDate,s.state.endDate),o=M({inputData:x,comparator:y(a.order,a.orderBy),filters:s.state,dateError:n});F(o,a.page,a.rowsPerPage);const d=!!s.state.name||s.state.status!=="all"||!!s.state.startDate&&!!s.state.endDate;!o.length&&d||o.length;const[c,e]=h.useState("all"),i=h.useCallback(l=>{a.onResetPage(),s.setState({name:l.target.value})},[s,a]),m=h.useCallback(l=>{a.onResetPage(),s.setState({status:l.target.value}),e(l.target.value)},[s,a]);return t.jsxs(u,{display:"flex",flexDirection:"column",alignItems:"center",sx:{borderRadius:1,height:1,width:1,overflow:"hidden",border:l=>`solid 1px ${l.vars.palette.divider}`},children:[t.jsxs(T,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:1,width:1},children:[t.jsx(O,{value:s.state.name,onChange:i,size:"small",placeholder:"Search ticket",InputProps:{startAdornment:t.jsx(B,{position:"start",children:t.jsx(P,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),t.jsxs(H,{size:"small",sx:{width:200,textTransform:"capitalize"},value:c,onChange:m,children:[t.jsx(p,{value:"all",children:"All Tickets"}),t.jsx(p,{value:"Open",children:"Open Tickets"}),t.jsx(p,{value:"Closed",children:"Close Tickets"})]})]}),t.jsx(u,{sx:{flex:1,width:1},children:t.jsxs(D,{size:"small",children:[t.jsx(L,{headLabel:Q}),t.jsx(I,{children:o.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map((l,z)=>t.jsxs(A,{children:[t.jsxs(g,{align:"center",children:[" ",z+1||l.id," "]}),t.jsx(g,{children:l.topic}),t.jsx(g,{align:"center",children:S(l.createTime)}),t.jsx(g,{align:"center",children:t.jsx(b,{variant:"soft",color:l.status==="Open"&&"info"||l.status==="Closed"&&"default"||"default",children:l.status})}),t.jsx(g,{align:"center",children:t.jsx(b,{variant:"soft",color:l.priority==="Low"&&"success"||l.priority==="Medium"&&"warning"||l.priority==="Hight"&&"error"||"default",children:l.priority})})]},`${l.id}`))})]})}),t.jsx(E,{sx:{width:1},page:a.page,dense:!0,count:o.length,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})};function M({inputData:r,comparator:a,filters:x,dateError:f}){const{status:s,name:n,startDate:o,endDate:d}=x,c=r.map((e,i)=>[e,i]);return c.sort((e,i)=>{const m=a(e[0],i[0]);return m!==0?m:e[1]-i[1]}),r=c.map(e=>e[0]),n&&(r=r.filter(e=>e.id.toString().toLowerCase().indexOf(n.toLowerCase())!==-1||e.topic.toLowerCase().indexOf(n.toLowerCase())!==-1||e.description.toLowerCase().indexOf(n.toLowerCase())!==-1)),s!=="all"&&(r=r.filter(e=>e.status===s)),f||o&&d&&(r=r.filter(e=>v(e.createdAt,o,d))),r}const _=[{id:"#",label:"#",width:40,align:"center"},{id:"title",label:"Title"},{id:"rate",label:"Date",width:180,align:"center"},{id:"totalAmount",label:"Status",width:80,align:"center"}],te=({reminders:r=[]})=>{const a=R({defaultOrderBy:"orderId",defaultRowsPerPage:5}),[x,f]=h.useState(r);h.useEffect(()=>{f(r)},[r]);const s=j({name:"",status:"all",startDate:null,endDate:null}),n=C(s.state.startDate,s.state.endDate),o=q({inputData:x,comparator:y(a.order,a.orderBy),filters:s.state,dateError:n}),d=!!s.state.name||s.state.status!=="all"||!!s.state.startDate&&!!s.state.endDate;!o.length&&d||o.length;const c=h.useCallback(e=>{a.onResetPage(),s.setState({name:e.target.value})},[s,a]);return t.jsxs(u,{display:"flex",flexDirection:"column",alignItems:"center",sx:{borderRadius:1,height:1,width:1,overflow:"hidden",border:e=>`solid 1px ${e.vars.palette.divider}`},children:[t.jsx(T,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:1,width:1},children:t.jsx(O,{value:s.state.name,onChange:c,size:"small",placeholder:"Search reminder",InputProps:{startAdornment:t.jsx(B,{position:"start",children:t.jsx(P,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),t.jsx(u,{sx:{flex:1,width:1},children:t.jsxs(D,{size:"small",children:[t.jsx(L,{headLabel:_}),t.jsxs(I,{children:[o.slice(a.page*a.rowsPerPage,a.page*a.rowsPerPage+a.rowsPerPage).map((e,i)=>t.jsxs(A,{children:[t.jsxs(g,{align:"center",children:[" ",i+1||e.id," "]}),t.jsx(g,{children:e.title}),t.jsx(g,{align:"center",children:S(e.reminderDate)}),t.jsx(g,{align:"center",children:t.jsx(b,{variant:"soft",color:w(e.reminderDate)?"error":"success",children:t.jsx(P,{icon:w(e.reminderDate)?"solar:forbidden-circle-bold":"solar:check-circle-bold-duotone",sx:{color:w(e.reminderDate)?"error":"success"}})})})]},`${e.id}`)),t.jsx(N,{emptyRows:$(a.page,a.rowsPerPage,o.length)})]})]})}),t.jsx(E,{sx:{width:1},page:a.page,dense:!0,count:o.length,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})};function q({inputData:r,comparator:a,filters:x,dateError:f}){const{status:s,name:n,startDate:o,endDate:d}=x,c=r.map((e,i)=>[e,i]);return c.sort((e,i)=>{const m=a(e[0],i[0]);return m!==0?m:e[1]-i[1]}),r=c.map(e=>e[0]),n&&(r=r.filter(e=>e.id.toString().toLowerCase().indexOf(n.toLowerCase())!==-1||e.title.toLowerCase().indexOf(n.toLowerCase())!==-1||e.description.toLowerCase().indexOf(n.toLowerCase())!==-1)),s!=="all"&&(r=r.filter(e=>e.status===s)),f||o&&d&&(r=r.filter(e=>v(e.createdAt,o,d))),r}export{ee as Q,te as a};
