import{w as y,bI as L,j as e,S as T,A as N,B as R,dw as H,y as D,I as x,dB as O,bK as q,bL as P,e as C,r as u,o as M,dE as V,er as G,p as j,dN as K,ed as Q,G as f,R as z,aH as W,dy as $,dD as J,es as U,dO as S,dM as k,dP as _,eh as X,H as Y,C as Z}from"./index-BPQkDe0s.js";import{u as ee,E as te}from"./error-block-Db9supFO.js";import"./product-review-new-form-B-g3oPHy.js";import"./index-6dotFO6y.js";import"./image-C7AA7Kgf.js";import"./color-preview-CiqBAik7.js";import{u as se}from"./useMutation-BoBY0b1e.js";import{C as I}from"./confirm-dialog-B6QB7W1X.js";import{C as oe}from"./custom-breadcrumbs-BIW9VTmo.js";import{u as re,g as ae,r as ne,T as ie,a as le,e as ce}from"./table-selected-action-CQYhxLWr.js";import{T as de}from"./table-no-data-BP6XCqFh.js";import{T as me,a as pe,b as he,c as ue}from"./table-head-custom-BKFgPtmt.js";import{T as xe}from"./table-pagination-custom-mx9CENAz.js";import{b as ge}from"./format-number-9dwzKsgZ.js";import{T as p}from"./TableCell-CX5ECdrE.js";import{C as je}from"./Checkbox-DYdkvSfk.js";import{T as be}from"./TextField-Bi7NVwCq.js";import{I as fe}from"./InputAdornment-Ck59aR0s.js";import"./form-provider-Csxs3POq.js";import"./editor-JwZorNGg.js";import"./incrementer-button-C7nxwoH_.js";import"./carousel-progress-bar-DH3OcQy-.js";import"./html-to-markdown-DIa3OpCG.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./fields-uLHuWF6F.js";import"./FormHelperText-CPxcDFA-.js";import"./formControlState-Dq1zat_P.js";import"./Rating-CpW9817X.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-Cn-68b2h.js";import"./FormControl-bKQXC1dH.js";import"./utils-DoM3o7-Q.js";import"./FormLabel-8bz6Jicd.js";import"./RadioGroup-DbSLazbi.js";import"./FormGroup-CC5xoKev.js";import"./FormControlLabel-CkOEQNeq.js";import"./Autocomplete-lg4xc3Dx.js";import"./Select-9Xhy8-ut.js";import"./Menu-DGoJy9BJ.js";import"./InputBase-CPrPQ_RD.js";import"./Chip-ALPNHt2t.js";import"./country-select-Bo5KTiYN.js";import"./countries-DSLisFCy.js";import"./InputLabel-AqbAhnGZ.js";import"./upload-avatar-CesV9ZGt.js";import"./index-DGJW8Nhg.js";import"./DatePicker-BGXln9IR.js";import"./DialogContent-p3i0msBI.js";import"./ListItem-BApUg4RM.js";import"./MobileDateTimePicker-dEpBlYqw.js";import"./product-Item-button-DoRkn7dE.js";import"./DialogTitle-DTSEDZ4J.js";import"./LoadingButton-ByZAe6Vn.js";import"./CircularProgress-BW2J7VJ8.js";import"./AccordionSummary-BbzqYRSW.js";import"./empty-content-mVT_rcbJ.js";import"./TablePagination-Brlt2UW_.js";import"./LastPage-nNWQQMs1.js";import"./index-DhCxhDCC.js";const Ce=({row:t,selected:s,onViewRow:c,onSelectRow:d,onDeleteRow:l,onEditRow:m})=>{const a=y(),i=L(),o=e.jsxs(me,{hover:!0,selected:s,children:[e.jsx(p,{padding:"checkbox",children:e.jsx(je,{checked:s,onClick:d,inputProps:{id:`row-checkbox-${t==null?void 0:t.id}`,"aria-label":"Row checkbox"}})}),e.jsx(p,{children:t==null?void 0:t.id}),e.jsx(p,{children:e.jsxs(T,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(N,{alt:t==null?void 0:t.name,src:"http://localhost:3000/api/files/show/"+(t==null?void 0:t.image)}),e.jsx(R,{component:"span",children:t==null?void 0:t.name})]})}),e.jsx(p,{children:ge(t==null?void 0:t.price)}),e.jsx(p,{align:"center",children:" - "}),e.jsx(p,{children:e.jsx(H,{variant:"soft",color:t.isActive===!0&&"success"||t.isActive===!1&&"error"||"default",children:t!=null&&t.isActive?"ACTIVE":"INACTIVE"})}),e.jsx(p,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(D,{color:i.open?"inherit":"default",onClick:i.onOpen,children:e.jsx(x,{icon:"eva:more-vertical-fill"})})})]});return e.jsxs(e.Fragment,{children:[o,e.jsx(O,{open:i.open,anchorEl:i.anchorEl,onClose:i.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(q,{children:[e.jsxs(P,{onClick:()=>{m(t.id),i.onClose()},children:[e.jsx(x,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(P,{onClick:()=>{a.onTrue(),i.onClose()},sx:{color:"error.main"},children:[e.jsx(x,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(I,{open:a.value,onClose:a.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(C,{variant:"contained",color:"error",onClick:l,children:"Delete"})})]})};function Pe({filters:t,onResetPage:s,options:c}){const d=u.useCallback(l=>{s(),t.setState({name:l.target.value})},[t,s]);return e.jsx(T,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx(be,{sx:{width:420},value:t.state.name,onChange:d,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(fe,{position:"start",children:e.jsx(x,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const ye=[{id:"productId",label:"No.",width:60},{id:"productName",label:"Product Name",width:140},{id:"productPrice",label:"Product Price",width:140},{id:"stock",label:"Stock",width:120,align:"center"},{id:"status",label:"Status",width:140},{id:"",width:88}];function Te({products:t}){const s=re({defaultOrderBy:"planId"}),c=y(),d=M(),[l,m]=u.useState(t),a=V({name:"",status:"all",startDate:null,endDate:null});u.useEffect(()=>{m(t)},[t]);const i=G(a.state.startDate,a.state.endDate),n=Re({inputData:l,comparator:ae(s.order,s.orderBy),filters:a.state,dateError:i}),o=ne(n,s.page,s.rowsPerPage),h=!!a.state.name||a.state.status!=="all"||!!a.state.startDate&&!!a.state.endDate,b=!n.length&&h||!n.length,v=u.useCallback(r=>{B(r)},[o.length,s,l]),A=u.useCallback(r=>{d.push(j.dashboard.product.edit(r))},[d]),w=u.useCallback(()=>{},[n.length,o.length,s,l]),E=K(),{mutate:B}=se({mutationFn:r=>S.delete(k.products.delete+r),onSuccess:async r=>{const g=l.filter(F=>F.id!==r);_.success("Delete success!"),m(g),s.onUpdatePageDeleteRow(o.length)},onSettled:async()=>{await E.invalidateQueries({queryKey:["products"]})},onError:()=>{}});return e.jsxs(e.Fragment,{children:[e.jsx(Q,{maxWidth:"xl",children:e.jsxs(f,{container:!0,spacing:3,children:[e.jsx(f,{xs:12,md:12,children:e.jsx(oe,{links:[{name:"Dashboard",href:j.dashboard.root},{name:"Product",href:j.dashboard.plan.root},{name:"List"}],action:e.jsx(C,{component:z,href:j.dashboard.product.new,variant:"contained",startIcon:e.jsx(x,{icon:"mingcute:add-line"}),children:"Add New Product"})})}),e.jsx(f,{xs:12,md:12,children:e.jsxs(W,{children:[e.jsx(Pe,{filters:a,onResetPage:s.onResetPage,dateError:i}),e.jsxs(R,{sx:{position:"relative"},children:[e.jsx(ie,{dense:s.dense,numSelected:s.selected.length,rowCount:n.length,onSelectAllRows:r=>s.onSelectAllRows(r,n.map(g=>g.id)),action:e.jsx($,{title:"Delete",children:e.jsx(D,{color:"primary",onClick:c.onTrue,children:e.jsx(x,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(J,{sx:{minHeight:444},children:e.jsxs(pe,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(he,{order:s.order,orderBy:s.orderBy,headLabel:ye,rowCount:n.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:r=>s.onSelectAllRows(r,n.map(g=>g.id))}),e.jsxs(ue,{children:[n.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(r=>e.jsx(Ce,{row:r,selected:s.selected.includes(r.id),onEditRow:()=>A(r.id),onDeleteRow:()=>v(r.id)},r.id)),e.jsx(le,{height:s.dense?56:76,emptyRows:ce(s.page,s.rowsPerPage,n.length)}),e.jsx(de,{notFound:b})]})]})})]}),e.jsx(xe,{page:s.page,dense:s.dense,count:n.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})})]})}),e.jsx(I,{open:c.value,onClose:c.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(C,{variant:"contained",color:"error",onClick:()=>{w(),c.onFalse()},children:"Delete"})})]})}function Re({inputData:t,comparator:s,filters:c,dateError:d}){const{status:l,name:m,startDate:a,endDate:i}=c,n=t.map((o,h)=>[o,h]);return n.sort((o,h)=>{const b=s(o[0],h[0]);return b!==0?b:o[1]-h[1]}),t=n.map(o=>o[0]),m&&(t=t.filter(o=>o.id.toString().toLowerCase().indexOf(m.toLowerCase())!==-1||o.name.toLowerCase().indexOf(m.toLowerCase())!==-1)),d||a&&i&&(t=t.filter(o=>U(o.createdAt,a,i))),t}const De={title:`Product list | Dashboard - ${Z.site.name}`};function Bt(){const t=ee({queryKey:["products"],queryFn:async()=>{const{data:s}=await S.get(k.products.list);return s}});return t.isPending||t.isLoading?e.jsx(X,{}):t.isError?e.jsx(te,{route:j.dashboard.products.root}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsxs("title",{children:[" ",De.title]})}),e.jsx(Te,{products:t.data})]})}export{Bt as default};
