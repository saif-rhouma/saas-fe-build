import{j as e,S as g,A as P,B as f,r as u,I as j,o as C,w as T,dE as y,er as S,p as h,ed as I,aH as k,dy as D,y as B,dD as R,es as w,eh as A,H as E,C as F,dO as H,dM as L}from"./index-BPQkDe0s.js";import{u as v,E as N}from"./error-block-Db9supFO.js";import{C as O}from"./custom-breadcrumbs-BIW9VTmo.js";import{u as q,g as z,r as W,T as G,a as K,e as M}from"./table-selected-action-CQYhxLWr.js";import{T as Q}from"./table-no-data-BP6XCqFh.js";import{T as V,a as _,b as $,c as J}from"./table-head-custom-BKFgPtmt.js";import{T as U}from"./table-pagination-custom-mx9CENAz.js";import{T as x}from"./TableCell-CX5ECdrE.js";import{T as X}from"./TextField-Bi7NVwCq.js";import{I as Y}from"./InputAdornment-Ck59aR0s.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-DYdkvSfk.js";import"./empty-content-mVT_rcbJ.js";import"./TablePagination-Brlt2UW_.js";import"./LastPage-nNWQQMs1.js";import"./Select-9Xhy8-ut.js";import"./Menu-DGoJy9BJ.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-CPrPQ_RD.js";import"./FormControlLabel-CkOEQNeq.js";import"./FormControl-bKQXC1dH.js";import"./InputLabel-AqbAhnGZ.js";import"./FormLabel-8bz6Jicd.js";import"./FormHelperText-CPxcDFA-.js";const Z=({row:s,selected:t})=>e.jsxs(V,{hover:!0,selected:t,children:[e.jsx(x,{children:s==null?void 0:s.id}),e.jsx(x,{children:e.jsxs(g,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(P,{alt:s==null?void 0:s.name,src:"http://localhost:3000/api/files/show/"+(s==null?void 0:s.image)}),e.jsx(f,{component:"span",children:s==null?void 0:s.name})]})}),e.jsx(x,{children:s.quantity})]});function ee({filters:s,onResetPage:t,options:i}){const d=u.useCallback(p=>{t(),s.setState({name:p.target.value})},[s,t]);return e.jsx(g,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx(X,{sx:{width:420},value:s.state.name,onChange:d,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(j,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const te=[{id:"stockId",label:"No.",width:60},{id:"productName",label:"Product Name"},{id:"stock",label:"In Stock",width:140}];function se({stocks:s}){const t=q({defaultOrderBy:"planId"}),i=C(),d=T(),[p,c]=u.useState(s),o=y({name:"",status:"all",startDate:null,endDate:null});u.useEffect(()=>{c(s)},[s]);const m=S(o.state.startDate,o.state.endDate),r=ae({inputData:p,comparator:z(t.order,t.orderBy),filters:o.state,dateError:m});W(r,t.page,t.rowsPerPage);const a=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,l=!r.length&&a||!r.length;return u.useCallback(n=>{i.push(h.dashboard.order.details(n))},[i]),e.jsx(I,{maxWidth:"xl",children:e.jsxs(g,{spacing:3,children:[e.jsx(O,{links:[{name:"Dashboard",href:h.dashboard.root},{name:"Products",href:h.dashboard.product.root},{name:"Product Stock"}]}),e.jsxs(k,{children:[e.jsx(ee,{filters:o,onResetPage:t.onResetPage,dateError:m}),e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(G,{dense:t.dense,numSelected:t.selected.length,rowCount:r.length,onSelectAllRows:n=>t.onSelectAllRows(n,r.map(b=>b.id)),action:e.jsx(D,{title:"Delete",children:e.jsx(B,{color:"primary",onClick:d.onTrue,children:e.jsx(j,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(R,{sx:{minHeight:200},children:e.jsxs(_,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx($,{order:t.order,orderBy:t.orderBy,headLabel:te,rowCount:r.length}),r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(n=>e.jsx(Z,{row:n,selected:t.selected.includes(n.id)},n.id)),e.jsxs(J,{children:[e.jsx(K,{height:t.dense?56:76,emptyRows:M(t.page,t.rowsPerPage,r.length)}),e.jsx(Q,{notFound:l})]})]})})]}),e.jsx(U,{page:t.page,dense:t.dense,count:r.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]})})}function ae({inputData:s,comparator:t,filters:i,dateError:d}){const{status:p,name:c,startDate:o,endDate:m}=i,r=s.map((a,l)=>[a,l]);return r.sort((a,l)=>{const n=t(a[0],l[0]);return n!==0?n:a[1]-l[1]}),s=r.map(a=>a[0]),c&&(s=s.filter(a=>a.id.toString().toLowerCase().indexOf(c.toLowerCase())!==-1||a.name.toLowerCase().indexOf(c.toLowerCase())!==-1)),d||o&&m&&(s=s.filter(a=>w(a.createdAt,o,m))),s}const re={title:`Product Stock | Dashboard - ${F.site.name}`};function Ee(){const s=v({queryKey:["products-stock"],queryFn:async()=>{const{data:t}=await H.get(L.products.stock);return t}});return s.isPending||s.isLoading?e.jsx(A,{}):s.isError?e.jsx(N,{route:h.dashboard.products.root}):e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsxs("title",{children:[" ",re.title]})}),e.jsx(se,{stocks:s.data})]})}export{Ee as default};
