import{j as e,aJ as S,r as i,bU as P,S as h,I as f,bR as p,l as R,dz as v,eo as I,e8 as B,p as j,aD as E,B as b,em as D,e as C,ep as L,ec as A,H as F,C as N,dJ as O,dH as Y}from"./index-Cq03K-HC.js";import{u as k,E as w}from"./error-block-CBMWt84f.js";import{C as H}from"./custom-breadcrumbs-C_F-6vOC.js";import{P as T}from"./permission-access-controller-Bzg3p7NA.js";import{u as M,g as z,r as G,T as q,a as W,e as _}from"./table-selected-action-CjXNfoiW.js";import{T as J}from"./table-no-data-BdJ2y3p3.js";import{T as Q,a as K,b as U,c as $}from"./table-head-custom-xPqHms_A.js";import{T as u}from"./TableCell-BY4odiRW.js";import{T as V}from"./TextField-BNZ3YpVQ.js";import{I as X}from"./InputAdornment-B7jHbOut.js";import{D as y}from"./DatePicker-C0kjDQAX.js";import{S as Z}from"./Select-BJK6Q71-.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-B5P4NoLN.js";import"./empty-content-D3sAh_j_.js";import"./FormControl-DUlfZx4z.js";import"./utils-DoM3o7-Q.js";import"./InputLabel-D6SX5sCR.js";import"./formControlState-Dq1zat_P.js";import"./FormLabel-Bx5V1G4l.js";import"./FormHelperText-BdgqWWO0.js";import"./index-DqNxVOmH.js";import"./visuallyHidden-Dan1xhjv.js";import"./DialogContent-D0WbZEYR.js";import"./ListItem-Dwol_2rN.js";import"./Chip-x2W7r02e.js";import"./Menu-B_EWYTTU.js";import"./InputBase-CPtucf_J.js";const ee=({row:t,selected:s})=>{var c;const d=e.jsxs(Q,{hover:!0,selected:s,children:[e.jsx(u,{children:S(t==null?void 0:t.planDate)}),e.jsxs(u,{children:["PLN-",t==null?void 0:t.id]}),e.jsx(u,{children:(c=t==null?void 0:t.product)==null?void 0:c.name}),e.jsx(u,{children:t==null?void 0:t.quantity}),e.jsx(u,{children:t==null?void 0:t.status})]});return e.jsx(e.Fragment,{children:d})};function te({filters:t,onResetPage:s}){const[d,c]=i.useState("all");i.useState(P()),i.useState(P());const r=i.useCallback(n=>{s(),t.setState({name:n.target.value})},[t,s]),l=i.useCallback(n=>{s(),t.setState({status:n.target.value}),c(n.target.value)},[t,s]),o=i.useCallback(n=>{s(),t.setState({startDate:n})},[t,s]),m=i.useCallback(n=>{s(),t.setState({endDate:n})},[t,s]);return e.jsxs(h,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:[e.jsx(V,{sx:{flexGrow:1},value:t.state.name,onChange:r,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(f,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(y,{label:"Start Date",sx:{flexGrow:1},format:"DD/MM/YYYY",value:t.state.startDate,onChange:o}),e.jsx(y,{label:"End Date",sx:{flexGrow:1},value:t.state.endDate,onChange:m,format:"DD/MM/YYYY"}),e.jsxs(Z,{sx:{width:420,textTransform:"capitalize"},value:d,onChange:l,children:[e.jsx(p,{value:"all",children:"All Plans"}),e.jsx(p,{value:"Pending",children:"Pending"}),e.jsx(p,{value:"ProcessingA",children:"Processing-A"}),e.jsx(p,{value:"ProcessingB",children:"Processing-B"}),e.jsx(p,{value:"Ready",children:"Ready"})]})]})}const se=[{id:"date",label:"Date",width:300},{id:"planId",label:"Plan Id"},{id:"productName",label:"Product Name"},{id:"orderAmount",label:"Product QTY"},{id:"status",label:"Status"}],ae=({plans:t})=>{const s=M({defaultOrderBy:"orderNumber"});R();const[d,c]=i.useState(t),r=v({name:"",status:"all",startDate:null,endDate:null}),l=I(r.state.startDate,r.state.endDate),o=re({inputData:d,comparator:z(s.order,s.orderBy),filters:r.state,dateError:l});G(o,s.page,s.rowsPerPage);const m=!!r.state.name||r.state.status!=="all"||!!r.state.startDate&&!!r.state.endDate,n=!o.length&&m||!o.length;return e.jsx(B,{maxWidth:"xl",children:e.jsxs(h,{spacing:3,children:[e.jsx(H,{links:[{name:"Dashboard",href:j.dashboard.root},{name:"Reports",href:j.dashboard.reports.root},{name:"Plan Report",href:j.dashboard.reports.plan}]}),e.jsxs(E,{children:[e.jsx(te,{filters:r,onResetPage:s.onResetPage,dateError:l}),e.jsxs(b,{sx:{position:"relative"},children:[e.jsx(q,{dense:s.dense,numSelected:s.selected.length,rowCount:o.length}),e.jsxs(K,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(U,{order:s.order,orderBy:s.orderBy,headLabel:se,rowCount:o.length}),e.jsxs($,{children:[o.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx(ee,{row:a,selected:s.selected.includes(a.id)},a.id)),e.jsx(W,{height:s.dense?56:76,emptyRows:_(s.page,s.rowsPerPage,o.length)}),e.jsx(J,{notFound:n})]})]})]}),e.jsx(b,{children:e.jsx(h,{direction:"row",justifyContent:"flex-end",sx:{p:3,typography:"body2"},children:e.jsx(b,{children:e.jsxs(h,{direction:"row",spacing:1,children:[e.jsx(T,{permission:D.DOWNLOAD_REPORT,children:e.jsx(C,{variant:"contained",startIcon:e.jsx(f,{icon:"mdi:microsoft-excel"}),children:"Download Report"})}),e.jsx(T,{permission:D.PRINT_REPORT,children:e.jsx(C,{variant:"outlined",startIcon:e.jsx(f,{icon:"solar:printer-minimalistic-bold"}),children:"Print Report"})})]})})})})]})]})})};function re({inputData:t,comparator:s,filters:d,dateError:c}){const{status:r,name:l,startDate:o,endDate:m}=d,n=t.map((a,x)=>[a,x]);return n.sort((a,x)=>{const g=s(a[0],x[0]);return g!==0?g:a[1]-x[1]}),t=n.map(a=>a[0]),l&&(t=t.filter(a=>a.orderNumber.toLowerCase().indexOf(l.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(l.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(l.toLowerCase())!==-1)),r!=="all"&&(t=t.filter(a=>a.status===r)),c||o&&m&&(t=t.filter(a=>L(a.planDate,o,m))),t}const ne={title:`Reports list | Dashboard - ${N.site.name}`};function Ye(){const t=k({queryKey:["plans"],queryFn:async()=>{const{data:s}=await O.get(Y.plan.list);return s}});return t.isPending||t.isLoading?e.jsx(A,{}):t.isError?e.jsx(w,{route:j.dashboard.reports.root}):e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsxs("title",{children:[" ",ne.title]})}),e.jsx(ae,{plans:t.data})]})}export{Ye as default};
