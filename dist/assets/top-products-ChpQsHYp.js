import{dn as b,r as x,de as f,e3 as j,j as e,dQ as T,cV as p,p as C,e4 as y,cY as R,B as P,dd as D,S,A as w,C as u,dU as E,H as O,dq as B,dm as H}from"./index-88qAwG8P.js";import{u as L,E as F}from"./error-block-BTff90qR.js";import{b as I}from"./format-number-B8FPsWIV.js";import{C as V}from"./custom-breadcrumbs-x7W5GMPl.js";import{P as A}from"./permission-access-controller-BVvbpBzt.js";import{g as $,e as q}from"./utils-MBUcMVfY.js";import{u as v}from"./use-table-BYPgfP9k.js";import{T as k}from"./table-no-data-wFoKraSE.js";import{T as N}from"./table-empty-rows-6krMqYw2.js";import{a as Q,b as _,c as z,T as G}from"./table-head-custom-g2OgtrHv.js";import{T as U}from"./table-pagination-custom-Ds9-Dw8y.js";import{P as W}from"./product-table-toolbar-CDTSykFk.js";import{P as K}from"./product-table-filters-result-CDBaIUe7.js";import{T as m}from"./TableCell-Cl8UZGxf.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./empty-content-vgDCQT8r.js";import"./Checkbox-Cpc8f1GH.js";import"./TablePagination-CrnuwEMO.js";import"./KeyboardArrowRight-fE7_2VJ7.js";import"./LastPage-B6xWbdc0.js";import"./Select-DFC-Q2QB.js";import"./Menu-BDUaDfAf.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-DD8qHu7J.js";import"./FormControlLabel-ts_MkIWE.js";import"./TextField-CQpihH7F.js";import"./FormControl-BXGEHd-f.js";import"./InputLabel-B0kOUcWA.js";import"./FormLabel-Ck5_RgM9.js";import"./FormHelperText-DA7jizKd.js";import"./InputAdornment-Bg-m_z4_.js";import"./filters-result-B0DfRGbW.js";import"./Chip-yDeOg34u.js";const Y=({products:r})=>{const t=v({defaultOrderBy:"planId"}),{t:i}=b("overview"),[g,h]=x.useState(r),l=[{id:"id",label:"#",width:60},{id:"name",label:`${i("topOrderedProductsView.table.tableHeader.productName")}`},{id:"price",label:`${i("topOrderedProductsView.table.tableHeader.price")}`,width:220},{id:"quantity",label:`${i("topOrderedProductsView.table.tableHeader.totalQty")}`,width:160}],o=f({name:"",status:"all",startDate:null,endDate:null});x.useEffect(()=>{h(r)},[r]);const c=j(o.state.startDate,o.state.endDate),n=J({inputData:g,comparator:$(t.order,t.orderBy),filters:o.state,dateError:c}),a=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!n.length&&a||!n.length;return e.jsx(T,{maxWidth:"xl",children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{xs:12,md:12,children:e.jsx(V,{links:[{name:`${i("topOrderedProductsView.breadCrumbsPageRootTitle")}`,href:C.dashboard.root},{name:`${i("topOrderedProductsView.breadCrumbsParentPageTitle")}`}]})}),e.jsx(A,{permission:y.LIST_PRODUCT,children:e.jsx(p,{xs:12,md:12,children:e.jsxs(R,{children:[e.jsx(W,{filters:o,onResetPage:t.onResetPage,dateError:c}),a&&e.jsx(K,{filters:o,totalResults:n.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsx(P,{sx:{position:"relative"},children:e.jsx(D,{sx:{minHeight:444},children:e.jsxs(Q,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(_,{order:t.order,orderBy:t.orderBy,headLabel:l,rowCount:n.length,numSelected:t.selected.length,onSort:t.onSort}),e.jsxs(z,{children:[n.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(s=>e.jsxs(G,{children:[e.jsx(m,{children:s.id}),e.jsx(m,{children:e.jsxs(S,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(w,{alt:s==null?void 0:s.name,src:u.site.serverFileHost+((s==null?void 0:s.image)||u.site.defaultImgPlaceHolder)}),e.jsx(P,{component:"span",children:s==null?void 0:s.name})]})}),e.jsx(m,{children:I(s.price)}),e.jsx(m,{children:s.total_quantity})]},s.id)),e.jsx(N,{height:t.dense?56:76,emptyRows:q(t.page,t.rowsPerPage,n.length)}),e.jsx(k,{notFound:d})]})]})})}),e.jsx(U,{page:t.page,dense:t.dense,count:n.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})})})]})})};function J({inputData:r,comparator:t,filters:i,dateError:g}){const{status:h,name:l,startDate:o,endDate:c}=i,n=r.map((a,d)=>[a,d]);return n.sort((a,d)=>{const s=t(a[0],d[0]);return s!==0?s:a[1]-d[1]}),r=n.map(a=>a[0]),l&&(r=r.filter(a=>a.id.toString().toLowerCase().indexOf(l.toLowerCase())!==-1||a.name.toLowerCase().indexOf(l.toLowerCase())!==-1)),r}const M={title:`Dashboard - ${u.site.name}`},Ie=()=>{const r=L({queryKey:["top-products"],queryFn:async()=>{const{data:t}=await B.get(H.topProducts);return t}});return r.isPending||r.isLoading?e.jsx(E,{}):r.isError?e.jsx(F,{route:""}):e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsxs("title",{children:[" ",M.title]})}),e.jsx(Y,{products:r.data})]})};export{Ie as default};
