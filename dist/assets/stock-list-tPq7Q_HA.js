import{j as t,S as y,A as k,C as b,B as f,dn as j,r as x,de as P,e3 as C,dQ as R,p as u,e4 as T,e as S,eo as _,I as N,cY as B,ed as q,dU as D,H,dq as A,dm as E}from"./index-88qAwG8P.js";import{u as I,E as L}from"./error-block-BTff90qR.js";import{C as $}from"./custom-breadcrumbs-x7W5GMPl.js";import{P as F}from"./permission-access-controller-BVvbpBzt.js";import{g as O,e as v}from"./utils-MBUcMVfY.js";import{u as Q}from"./use-table-BYPgfP9k.js";import{T as W}from"./table-no-data-wFoKraSE.js";import{T as z}from"./table-empty-rows-6krMqYw2.js";import{T as G,a as K,b as U,c as V}from"./table-head-custom-g2OgtrHv.js";import{T as Y}from"./table-selected-action-DnALz1xy.js";import{T as J}from"./table-pagination-custom-Ds9-Dw8y.js";import{T as i}from"./TableCell-Cl8UZGxf.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./empty-content-vgDCQT8r.js";import"./Checkbox-Cpc8f1GH.js";import"./TablePagination-CrnuwEMO.js";import"./KeyboardArrowRight-fE7_2VJ7.js";import"./LastPage-B6xWbdc0.js";import"./Select-DFC-Q2QB.js";import"./Menu-BDUaDfAf.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-DD8qHu7J.js";import"./FormControlLabel-ts_MkIWE.js";const M=({row:e,selected:s})=>{const r=t.jsxs(G,{hover:!0,selected:s,children:[t.jsx(i,{children:e==null?void 0:e.productId}),t.jsx(i,{children:t.jsxs(y,{spacing:2,direction:"row",alignItems:"center",children:[t.jsx(k,{alt:e==null?void 0:e.name,src:b.site.serverFileHost+((e==null?void 0:e.image)||b.site.defaultImgPlaceHolder)}),t.jsx(f,{component:"span",children:e==null?void 0:e.name})]})}),t.jsx(i,{children:e==null?void 0:e.totals_quantity}),t.jsx(i,{children:e==null?void 0:e.pending_quantity}),t.jsx(i,{children:e==null?void 0:e.processing_a_quantity}),t.jsx(i,{children:e==null?void 0:e.processing_b_quantity}),t.jsx(i,{children:e==null?void 0:e.ready_quantity}),t.jsx(i,{children:e==null?void 0:e.in_stock})]});return t.jsx(t.Fragment,{children:r})},X=({products:e})=>{const s=Q({defaultOrderBy:"orderNumber"}),{t:r}=j("reports"),[g,c]=x.useState(e),l=[{id:"id",label:"#",width:60},{id:"productName",label:`${r("stockReports.table.tableHeader.productName")}`,width:260},{id:"planId",label:`${r("stockReports.table.tableHeader.planQty")}`},{id:"orderAmount",label:`${r("stockReports.table.tableHeader.pendingStock")}`},{id:"status",label:`${r("stockReports.table.tableHeader.processingAStock")}`},{id:"status",label:`${r("stockReports.table.tableHeader.processingBStock")}`},{id:"status",label:`${r("stockReports.table.tableHeader.readyToDeliverStock")}`},{id:"status",label:`${r("stockReports.table.tableHeader.inStock")}`}],n=P({name:"",status:"all",startDate:null,endDate:null}),m=C(n.state.startDate,n.state.endDate),o=Z({inputData:g,comparator:O(s.order,s.orderBy),filters:n.state,dateError:m});x.useEffect(()=>{c(e)},[e]);const a=!!n.state.name||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,d=!o.length&&a||!o.length,p=[{displayName:"Product Name",key:"name"},{displayName:"Plan Qty",key:"totals_quantity"},{displayName:"Pending Stock",key:"pending_quantity"},{displayName:"Processing A Stock",key:"processing_a_quantity"},{displayName:"Processing B Stock",key:"processing_b_quantity"},{displayName:"Ready to Deliver Stock",key:"ready_quantity"},{displayName:"In Stock",key:"in_stock"}];return t.jsx(R,{maxWidth:"xl",children:t.jsxs(y,{spacing:3,children:[t.jsx($,{links:[{name:`${r("stockReports.breadCrumbsPageRootTitle")}`,href:u.dashboard.root},{name:`${r("stockReports.breadCrumbsParentPageTitle")}`,href:u.dashboard.reports.root},{name:`${r("stockReports.breadCrumbsPageTitle")}`,href:u.dashboard.reports.stock}],action:t.jsx(F,{permission:T.DOWNLOAD_REPORT,children:t.jsx(S,{onClick:()=>{_("stock reports",p,o,"Stock")},variant:"contained",startIcon:t.jsx(N,{icon:"mdi:microsoft-excel"}),children:r("stockReports.exportReport")})})}),t.jsxs(B,{children:[t.jsxs(f,{sx:{position:"relative"},children:[t.jsx(Y,{dense:s.dense,numSelected:s.selected.length,rowCount:o.length}),t.jsxs(K,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(U,{order:s.order,orderBy:s.orderBy,headLabel:l,rowCount:o.length}),t.jsxs(V,{children:[o.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(h=>t.jsx(M,{row:h,selected:s.selected.includes(h.id)},h.id)),t.jsx(z,{height:s.dense?56:76,emptyRows:v(s.page,s.rowsPerPage,o.length)}),t.jsx(W,{notFound:d})]})]})]}),t.jsx(J,{page:s.page,dense:s.dense,count:o.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]})})};function Z({inputData:e,comparator:s,filters:r,dateError:g}){const{status:c,name:l,startDate:n,endDate:m}=r,o=e.map((a,d)=>[a,d]);return o.sort((a,d)=>{const p=s(a[0],d[0]);return p!==0?p:a[1]-d[1]}),e=o.map(a=>a[0]),l&&(e=e.filter(a=>a.orderNumber.toLowerCase().indexOf(l.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(l.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(l.toLowerCase())!==-1)),c!=="all"&&(e=e.filter(a=>a.status===c)),g||n&&m&&(e=e.filter(a=>q(a.createdAt,n,m))),e}const w={title:`Reports list | Dashboard - ${b.site.name}`};function Se(){const e=I({queryKey:["stock-details"],queryFn:async()=>(await A.get(E.stock.details)).data});return e.isPending||e.isLoading?t.jsx(D,{}):e.isError?t.jsx(L,{route:u.dashboard.reports.root}):t.jsxs(t.Fragment,{children:[t.jsx(H,{children:t.jsxs("title",{children:[" ",w.title]})}),t.jsx(X,{products:e.data})]})}export{Se as default};
