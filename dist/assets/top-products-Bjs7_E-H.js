import{br as b,r as x,df as f,e3 as j,j as e,dQ as T,cW as p,p as C,e4 as y,cZ as R,B as P,de as D,S,A as w,C as u,dU as E,H as O,dq as B,dn as H}from"./index-BqQARj70.js";import{u as L,E as F}from"./error-block-Cvsq6LVS.js";import{b as I}from"./format-number-BvEweN_e.js";import{C as A}from"./custom-breadcrumbs-ryDpeVg5.js";import{P as V}from"./permission-access-controller-Q9flSCkz.js";import{g as $,e as q}from"./utils-MBUcMVfY.js";import{u as v}from"./use-table-CIIi1yXP.js";import{T as k}from"./table-no-data-LwGQxgtX.js";import{T as N}from"./table-empty-rows-BLwUQgoE.js";import{a as Q,b as W,c as _,T as z}from"./table-head-custom-BsfRnN01.js";import{T as G}from"./table-pagination-custom-B8jkTEOc.js";import{P as U}from"./product-table-toolbar-DlOeFEx3.js";import{P as K}from"./product-table-filters-result-BVBd977L.js";import{T as m}from"./TableCell-BYUYO2qG.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./empty-content-BECezeOK.js";import"./Checkbox-Bhx6CUcB.js";import"./TablePagination-Dx3_2Y4O.js";import"./KeyboardArrowRight-CBFHahxG.js";import"./LastPage-B8ZhtlKX.js";import"./Select-BcNE4CY6.js";import"./Menu-CyG4g8V9.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-ByUog9Qa.js";import"./FormControlLabel-DYa7_yhu.js";import"./TextField-Ddc-2_B3.js";import"./FormControl-C8LIfacH.js";import"./InputLabel-Cypnw6Fi.js";import"./FormLabel-Dza6C49E.js";import"./FormHelperText-D7zaUcMu.js";import"./InputAdornment-BfS4czl_.js";import"./filters-result-D7Jq5xfN.js";import"./Chip-DPBTbqGw.js";const Z=({products:r})=>{const t=v({defaultOrderBy:"planId"}),{t:i}=b("overview"),[g,h]=x.useState(r),l=[{id:"id",label:"#",width:60},{id:"name",label:`${i("topOrderedProductsView.table.tableHeader.productName")}`},{id:"price",label:`${i("topOrderedProductsView.table.tableHeader.price")}`,width:220},{id:"quantity",label:`${i("topOrderedProductsView.table.tableHeader.totalQty")}`,width:160}],o=f({name:"",status:"all",startDate:null,endDate:null});x.useEffect(()=>{h(r)},[r]);const c=j(o.state.startDate,o.state.endDate),n=J({inputData:g,comparator:$(t.order,t.orderBy),filters:o.state,dateError:c}),a=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!n.length&&a||!n.length;return e.jsx(T,{maxWidth:"xl",children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{xs:12,md:12,children:e.jsx(A,{links:[{name:`${i("topOrderedProductsView.breadCrumbsPageRootTitle")}`,href:C.dashboard.root},{name:`${i("topOrderedProductsView.breadCrumbsParentPageTitle")}`}]})}),e.jsx(V,{permission:y.LIST_PRODUCT,children:e.jsx(p,{xs:12,md:12,children:e.jsxs(R,{children:[e.jsx(U,{filters:o,onResetPage:t.onResetPage,dateError:c}),a&&e.jsx(K,{filters:o,totalResults:n.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsx(P,{sx:{position:"relative"},children:e.jsx(D,{sx:{minHeight:444},children:e.jsxs(Q,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(W,{order:t.order,orderBy:t.orderBy,headLabel:l,rowCount:n.length,numSelected:t.selected.length,onSort:t.onSort}),e.jsxs(_,{children:[n.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(s=>e.jsxs(z,{children:[e.jsx(m,{children:s.id}),e.jsx(m,{children:e.jsxs(S,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(w,{alt:s==null?void 0:s.name,src:u.site.serverFileHost+((s==null?void 0:s.image)||u.site.defaultImgPlaceHolder)}),e.jsx(P,{component:"span",children:s==null?void 0:s.name})]})}),e.jsx(m,{children:I(s.price)}),e.jsx(m,{children:s.total_quantity})]},s.id)),e.jsx(N,{height:t.dense?56:76,emptyRows:q(t.page,t.rowsPerPage,n.length)}),e.jsx(k,{notFound:d})]})]})})}),e.jsx(G,{page:t.page,dense:t.dense,count:n.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})})})]})})};function J({inputData:r,comparator:t,filters:i,dateError:g}){const{status:h,name:l,startDate:o,endDate:c}=i,n=r.map((a,d)=>[a,d]);return n.sort((a,d)=>{const s=t(a[0],d[0]);return s!==0?s:a[1]-d[1]}),r=n.map(a=>a[0]),l&&(r=r.filter(a=>a.id.toString().toLowerCase().indexOf(l.toLowerCase())!==-1||a.name.toLowerCase().indexOf(l.toLowerCase())!==-1)),r}const M={title:`Dashboard - ${u.site.name}`},Ie=()=>{const r=L({queryKey:["top-products"],queryFn:async()=>{const{data:t}=await B.get(H.topProducts);return t}});return r.isPending||r.isLoading?e.jsx(E,{}):r.isError?e.jsx(F,{route:""}):e.jsxs(e.Fragment,{children:[e.jsx(O,{children:e.jsxs("title",{children:[" ",M.title]})}),e.jsx(Z,{products:r.data})]})};export{Ie as default};
