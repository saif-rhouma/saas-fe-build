import{r as x,br as w,df as u,e3 as p,j as a,B as g,S as C,I as j,ed as T}from"./index-BqQARj70.js";import{b}from"./format-number-BvEweN_e.js";import{g as I}from"./utils-MBUcMVfY.js";import{u as y}from"./use-table-CIIi1yXP.js";import{a as $,b as A,c as B,T as S}from"./table-head-custom-BsfRnN01.js";import{T as v}from"./table-pagination-custom-B8jkTEOc.js";import{T as E}from"./TextField-Ddc-2_B3.js";import{I as L}from"./InputAdornment-BfS4czl_.js";import{T as o}from"./TableCell-BYUYO2qG.js";const W=({products:r,defaultRowsPerPage:m})=>{const s=y({defaultOrderBy:"orderId",defaultRowsPerPage:m}),[h,f]=x.useState(r),{t:n}=w("orders"),d=[{id:"orderNumber",label:"#",width:40,align:"center"},{id:"name",label:`${n("detailsCard.table.header.productName")}`},{id:"rate",label:`${n("detailsCard.table.header.rate")}`,width:200,align:"center"},{id:"totalAmount",label:`${n("detailsCard.table.header.quantity")}`,width:80,align:"center"},{id:"status",label:`${n("detailsCard.table.header.total")}`,width:200,align:"center"}];x.useEffect(()=>{f(r)},[r]);const l=u({name:"",status:"all",startDate:null,endDate:null}),c=p(l.state.startDate,l.state.endDate),t=R({inputData:h,comparator:I(s.order,s.orderBy),filters:l.state,dateError:c}),i=x.useCallback(e=>{s.onResetPage(),l.setState({name:e.target.value})},[l,s]);return a.jsxs(g,{display:"flex",flexDirection:"column",alignItems:"center",sx:{borderRadius:1,height:1,width:1,overflow:"hidden",border:e=>`solid 1px ${e.vars.palette.divider}`},children:[a.jsx(C,{className:"print-hide",spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:1,width:1},children:a.jsx(E,{value:l.state.name,onChange:i,size:"small",placeholder:n("detailsCard.table.header.searchProduct"),InputProps:{startAdornment:a.jsx(L,{position:"start",children:a.jsx(j,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),a.jsx(g,{sx:{flex:1,width:1},children:a.jsxs($,{size:"small",children:[a.jsx(A,{headLabel:d}),a.jsx(B,{children:t.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map((e,P)=>a.jsxs(S,{children:[a.jsxs(o,{align:"center",children:[" ",P+1||e.productId," "]}),a.jsx(o,{children:`${e.product.name}`}),a.jsx(o,{align:"center",children:`${b(e.snapshotProductPrice||e.product.price)}`}),a.jsx(o,{align:"center",children:a.jsx(g,{sx:{fontWeight:"bold"},children:e==null?void 0:e.quantity})}),a.jsx(o,{align:"center",children:`${b(e.snapshotProductPrice*e.quantity)}`})]},`${e.productId}`))})]})}),a.jsx(v,{className:"print-hide",sx:{width:1},page:s.page,count:t.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,rowsPerPageOptions:[]})]})};function R({inputData:r,comparator:m,filters:s,dateError:h}){const{status:f,name:n,startDate:d,endDate:l}=s,c=r.map((t,i)=>[t,i]);return c.sort((t,i)=>{const e=m(t[0],i[0]);return e!==0?e:t[1]-i[1]}),r=c.map(t=>t[0]),n&&(r=r.filter(t=>{var i;return t.id.toString().toLowerCase().indexOf(n.toLowerCase())!==-1||((i=t==null?void 0:t.product)==null?void 0:i.name.toLowerCase().indexOf(n.toLowerCase()))!==-1})),h||d&&l&&(r=r.filter(t=>T(t.createdAt,d,l))),r}export{W as Q};
