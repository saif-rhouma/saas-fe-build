import{r as i,aX as C,ec as w,g as D,p as d,j as e,B as t,S as x,A as T,C as p,dP as B,ay as g,aB as E,aV as I,dT as N,H as R,dx as v,b5 as H}from"./index-DT04UR_O.js";import{u as S,E as k}from"./error-block-BoCOKljz.js";import{u as F}from"./use-params-CNvBfPdK.js";import{C as A}from"./custom-breadcrumbs-DhAwakkx.js";import{e as q}from"./utils-CuXi_5LX.js";import{g as L}from"./utils-MBUcMVfY.js";import{u as V}from"./use-table-Dvx8L5Dy.js";import{a as $,b as G,c as O,T as Q}from"./table-head-custom-CK_1KHWF.js";import{T as W}from"./table-pagination-custom-p7IM4Ndp.js";import{T as c}from"./TableCell-BXVtmUZi.js";import{C as _}from"./CardHeader-BbSM_7Vm.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./index-aTkpnRqN.js";import"./countries-DSLisFCy.js";import"./Checkbox-BU7EYPXc.js";import"./TablePagination-BV8aUVPa.js";import"./KeyboardArrowRight-DI6e2iIr.js";import"./LastPage-BaKUnPHk.js";import"./Select-C_-xEl5F.js";import"./Menu-BPDpcHu6.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-BM5GWnYp.js";import"./FormControlLabel-CvWNVptb.js";const z=({products:o,defaultRowsPerPage:a})=>{var m;const n=[{id:"id",width:60,label:"#"},{id:"name",label:"Product"},{id:"quantity",label:"Quantity",width:120}],s=V({defaultOrderBy:"orderId",defaultRowsPerPage:a}),[b,j]=i.useState(o);i.useEffect(()=>{j(o)},[o]);const l=C({name:"",status:"all",startDate:null,endDate:null}),f=w(l.state.startDate,l.state.endDate),h=q({inputData:b,comparator:L(s.order,s.orderBy),filters:l.state,dateError:f}),u=D(),P=i.useCallback(r=>{u.push(d.dashboard.product.details(r))},[u]);return e.jsxs(t,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",sx:{borderRadius:1,overflow:"hidden",border:r=>`solid 1px ${r.vars.palette.divider}`},children:[e.jsx(t,{sx:{flex:1,width:1},children:e.jsxs($,{size:"medium",children:[e.jsx(G,{headLabel:n}),e.jsx(O,{children:(m=h.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage))==null?void 0:m.map((r,y)=>e.jsxs(Q,{children:[e.jsxs(c,{children:[" ",y+1," "]}),e.jsx(c,{children:e.jsxs(x,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(T,{alt:r==null?void 0:r.name,src:p.site.serverFileHost+((r==null?void 0:r.image)||p.site.defaultImgPlaceHolder)}),e.jsx(t,{component:"span",sx:{cursor:"pointer"},onClick:()=>{P(r.id)},children:r==null?void 0:r.name})]})}),e.jsx(c,{children:e.jsxs(t,{sx:{width:240,color:"error.main",fontWeight:"bold"},children:["x",r==null?void 0:r.total_quantity]})})]},r==null?void 0:r.id))})]})}),e.jsx(W,{sx:{width:1},page:s.page,count:h.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage})]})},K=({payload:o})=>{const{customer:a,products:n}=o;return e.jsxs(B,{children:[e.jsx(A,{links:[{name:"Dashboard",href:d.dashboard.root},{name:"Customer",href:d.dashboard.customers.root},{name:"Customer Details"}],sx:{mb:{xs:3,md:5}}}),e.jsx(g,{container:!0,spacing:3,children:e.jsx(g,{xs:12,md:12,children:e.jsx(x,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:e.jsxs(E,{children:[e.jsx(_,{title:"Details"}),e.jsx(x,{direction:"row",gap:10,sx:{p:3,typography:"body2"},children:e.jsxs(t,{flexDirection:"column",gap:1,sx:{display:"flex",width:"100%",p:1},children:[e.jsxs(t,{sx:{color:"text.secondary"},children:["Ref: #",a==null?void 0:a.ref]}),e.jsxs(t,{sx:{color:"text.secondary"},children:["Name: ",a==null?void 0:a.name]}),e.jsxs(t,{sx:{color:"text.secondary"},children:["Email: ",a==null?void 0:a.email]}),(a==null?void 0:a.phoneNumber)&&e.jsxs(t,{sx:{color:"text.secondary"},children:["Phone Number: ",(a==null?void 0:a.phoneNumber)||" - "]}),(a==null?void 0:a.taxNumber)&&e.jsxs(t,{sx:{color:"text.secondary"},children:["Tax Number: ",(a==null?void 0:a.taxNumber)||" - "]})]})}),e.jsx(I,{children:e.jsx(t,{fullWidth:!0,alignItems:"center",sx:{p:3,borderBottom:s=>`dashed 2px ${s.vars.palette.background.neutral}`},children:e.jsx(z,{products:n,defaultRowsPerPage:15})})})]})})})})]})},X={title:`Customer details | Dashboard - ${p.site.name}`};function ye(){const{id:o=""}=F(),a=S({queryKey:["customer",o],queryFn:async()=>{const{data:n}=await v.get(H.customers.details+o);return n}});return a.isPending||a.isLoading?e.jsx(N,{}):a.isError?e.jsx(k,{route:d.dashboard.plan.root}):e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsxs("title",{children:[" ",X.title]})}),e.jsx(K,{payload:a.data})]})}export{ye as default};
