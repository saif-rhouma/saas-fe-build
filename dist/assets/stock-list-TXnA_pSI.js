import{j as t,S as x,A as b,C as f,B as j,r as g,dE as P,er as y,ed as C,p,e as T,I as S,aH as k,es as R,eh as B,H as E,dO as I,dM as L}from"./index-DxrsDIwY.js";import{u as D,E as A}from"./error-block-Cg6RpAZK.js";import{C as _}from"./custom-breadcrumbs-Dd3lNCwD.js";import{u as F,g as q,r as v,T as H,a as N,e as O}from"./table-selected-action-DOkqk6zb.js";import{T as z}from"./table-no-data-DzXXEfeL.js";import{T as Q,a as V,b as W,c as $}from"./table-head-custom-w-4MLJlt.js";import{T as G}from"./table-pagination-custom-BDQuCrzU.js";import{T as i}from"./TableCell-CJNt5t20.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-ylG2wecL.js";import"./empty-content-Der9frKm.js";import"./TablePagination-Bol3AgoD.js";import"./LastPage-Ct_4tubK.js";import"./Select-eQVewVvt.js";import"./Menu-C6l2dIf8.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-B9Lf9cs-.js";import"./FormControlLabel-DKxiCaQc.js";const K=({row:e,selected:s})=>{const d=t.jsxs(Q,{hover:!0,selected:s,children:[t.jsx(i,{children:e==null?void 0:e.productId}),t.jsx(i,{children:t.jsxs(x,{spacing:2,direction:"row",alignItems:"center",children:[t.jsx(b,{alt:e==null?void 0:e.name,src:f.site.serverFileHost+(e==null?void 0:e.image)}),t.jsx(j,{component:"span",children:e==null?void 0:e.name})]})}),t.jsx(i,{children:e==null?void 0:e.totals_quantity}),t.jsx(i,{children:e==null?void 0:e.pending_quantity}),t.jsx(i,{children:e==null?void 0:e.processing_a_quantity}),t.jsx(i,{children:e==null?void 0:e.processing_b_quantity}),t.jsx(i,{children:e==null?void 0:e.ready_quantity}),t.jsx(i,{children:e==null?void 0:e.in_stock})]});return t.jsx(t.Fragment,{children:d})},M=[{id:"id",label:"#",width:60},{id:"productName",label:"Product Name",width:260},{id:"planId",label:"Plan Qty"},{id:"orderAmount",label:"Pending Stock"},{id:"status",label:"Processing A Stock"},{id:"status",label:"Processing B Stock"},{id:"status",label:"Ready to Deliver Stock"},{id:"status",label:"In Stock"}],J=({products:e})=>{const s=F({defaultOrderBy:"orderNumber"}),[d,h]=g.useState(e),n=P({name:"",status:"all",startDate:null,endDate:null}),o=y(n.state.startDate,n.state.endDate),r=X({inputData:d,comparator:q(s.order,s.orderBy),filters:n.state,dateError:o});g.useEffect(()=>{h(e)},[e]),v(r,s.page,s.rowsPerPage);const l=!!n.state.name||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,c=!r.length&&l||!r.length;return t.jsx(C,{maxWidth:"xl",children:t.jsxs(x,{spacing:3,children:[t.jsx(_,{links:[{name:"Dashboard",href:p.dashboard.root},{name:"Reports",href:p.dashboard.reports.root},{name:"Stock Report",href:p.dashboard.reports.stock}],action:t.jsx(T,{variant:"contained",startIcon:t.jsx(S,{icon:"mdi:microsoft-excel"}),children:"Export Excel"})}),t.jsxs(k,{children:[t.jsxs(j,{sx:{position:"relative"},children:[t.jsx(H,{dense:s.dense,numSelected:s.selected.length,rowCount:r.length}),t.jsxs(V,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[t.jsx(W,{order:s.order,orderBy:s.orderBy,headLabel:M,rowCount:r.length}),t.jsxs($,{children:[r.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>t.jsx(K,{row:a,selected:s.selected.includes(a.id)},a.id)),t.jsx(N,{height:s.dense?56:76,emptyRows:O(s.page,s.rowsPerPage,r.length)}),t.jsx(z,{notFound:c})]})]})]}),t.jsx(G,{page:s.page,dense:s.dense,count:r.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})]})})},U=J;function X({inputData:e,comparator:s,filters:d,dateError:h}){const{status:n,name:o,startDate:r,endDate:l}=d,c=e.map((a,m)=>[a,m]);return c.sort((a,m)=>{const u=s(a[0],m[0]);return u!==0?u:a[1]-m[1]}),e=c.map(a=>a[0]),o&&(e=e.filter(a=>a.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),n!=="all"&&(e=e.filter(a=>a.status===n)),h||r&&l&&(e=e.filter(a=>R(a.createdAt,r,l))),e}const Y={title:`Reports list | Dashboard - ${f.site.name}`};function be(){const e=D({queryKey:["stock-details"],queryFn:async()=>(await I.get(L.stock.details)).data});return e.isPending||e.isLoading?t.jsx(B,{}):e.isError?t.jsx(A,{route:p.dashboard.reports.root}):t.jsxs(t.Fragment,{children:[t.jsx(E,{children:t.jsxs("title",{children:[" ",Y.title]})}),t.jsx(U,{products:e.data})]})}export{be as default};
