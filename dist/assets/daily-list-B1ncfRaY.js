import{j as e,r as u,bM as C,S as j,dC as R,er as S,eb as P,p as h,aF as B,B as E,es as F,ef as O,H as Y,C as A,dM as k,dK as I}from"./index-Bm3rBIkL.js";import{u as L,E as M}from"./error-block-BO5MDXKX.js";import{b as D}from"./format-number-zZ3CkgDh.js";import{C as w}from"./custom-breadcrumbs-DgyWxDBR.js";import{u as N,g as H,T as W,a as q,e as z}from"./table-selected-action-FGFYoCf9.js";import{T as K}from"./table-no-data-C5ESOE9S.js";import{T as V,a as _,b as G,c as Q}from"./table-head-custom-fAI8azNC.js";import{T as y}from"./TableCell-DwZUj5h4.js";import{D as $}from"./DatePicker-BFbM1AIt.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-DZc8qiZw.js";import"./empty-content-Bj3fPw3b.js";import"./index-I76JgJ8L.js";import"./FormControl-Dpp_E6i1.js";import"./utils-DoM3o7-Q.js";import"./InputLabel-XKr5fbZR.js";import"./formControlState-Dq1zat_P.js";import"./FormLabel-CW4sUJth.js";import"./FormHelperText-D4MtsGiu.js";import"./visuallyHidden-Dan1xhjv.js";import"./TextField-Zaq0_UQI.js";import"./Select-BbFY65UU.js";import"./Menu-BCmDYN65.js";import"./InputBase-CLwZiNSB.js";import"./InputAdornment-C5fdA_pt.js";import"./DialogContent-adXfkuCx.js";import"./ListItem-B8LRzQux.js";import"./Chip-wb6jkBj9.js";const J=({row:t,selected:a})=>{const l=e.jsxs(V,{hover:!0,selected:a,children:[e.jsx(y,{children:t==null?void 0:t.label}),e.jsx(y,{children:t==null?void 0:t.value})]});return e.jsx(e.Fragment,{children:l})};function U({filters:t,onResetPage:a}){const l=u.useCallback(d=>{const n=C(d).add(1,"day").format("YYYY-MM-DD");a(),t.setState({startDate:d,endDate:n})},[t,a]);return e.jsx(j,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx($,{label:"Date",format:"DD/MM/YYYY",value:t.state.startDate,onChange:l})})}const X=[{id:"reminderId",label:"Particular"},{id:"date",label:"value",width:280}],Z=[{label:"Orders",value:0},{label:"No. of Orders Delivered",value:0},{label:"Total Sales",value:0},{label:"Total Payment",value:0}],ee=({orders:t})=>{const a=N({defaultOrderBy:"orderNumber"}),[l,d]=u.useState(t),[n,p]=u.useState(Z),o=R({name:"",status:"all",startDate:null,endDate:null}),m=S(o.state.startDate,o.state.endDate),s=te({inputData:l,comparator:H(a.order,a.orderBy),filters:o.state,dateError:m}),i=u.useCallback(r=>{const x=r.filter(c=>c.status==="Delivered").length,T=D(r.reduce((c,f)=>c+f.totalOrderAmount,0)),v=D(r.reduce((c,f)=>c+f.orderPaymentAmount,0));return{orders:r.length,nbDelivered:x,totalSales:T,totalPayments:v}},[]);u.useEffect(()=>{const r=i(s),x=[{label:"Orders",value:r.orders},{label:"No. of Orders Delivered",value:r.nbDelivered},{label:"Total Sales",value:r.totalSales},{label:"Total Payment",value:r.totalPayments}];p(x)},[s.length,a,l]);const b=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,g=!s.length&&b||!s.length;return e.jsx(P,{maxWidth:"xl",children:e.jsxs(j,{spacing:3,children:[e.jsx(w,{links:[{name:"Dashboard",href:h.dashboard.root},{name:"Reports",href:h.dashboard.reports.root},{name:"Daily Report",href:h.dashboard.reports.daily}]}),e.jsxs(B,{children:[e.jsx(U,{filters:o,onResetPage:a.onResetPage,dateError:m}),e.jsxs(E,{sx:{position:"relative"},children:[e.jsx(W,{dense:a.dense,numSelected:a.selected.length,rowCount:s.length}),e.jsxs(_,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(G,{order:a.order,orderBy:a.orderBy,headLabel:X,rowCount:s.length}),e.jsxs(Q,{children:[n.map(r=>e.jsx(J,{row:r,selected:a.selected.includes(r.id)},r.id)),e.jsx(q,{height:a.dense?56:76,emptyRows:z(a.page,a.rowsPerPage,s.length)}),e.jsx(K,{notFound:g})]})]})]})]})]})})};function te({inputData:t,comparator:a,filters:l,dateError:d}){const{status:n,startDate:p,endDate:o}=l,m=t.map((s,i)=>[s,i]);return m.sort((s,i)=>{const b=a(s[0],i[0]);return b!==0?b:s[1]-i[1]}),t=m.map(s=>s[0]),n!=="all"&&(t=t.filter(s=>s.status===n)),d||p&&o&&(t=t.filter(s=>F(s.orderDate,p,o))),t}const ae={title:`Reports list | Dashboard - ${A.site.name}`};function ke(){const t=L({queryKey:["orders"],queryFn:async()=>{const{data:a}=await k.get(I.order.list);return a}});return t.isPending||t.isLoading?e.jsx(O,{}):t.isError?e.jsx(M,{route:h.dashboard.reports.root}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsxs("title",{children:[" ",ae.title]})}),e.jsx(ee,{orders:t.data})]})}export{ke as default};
