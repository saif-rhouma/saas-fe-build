import{F as bt,J as Ut,K as b,N as F,O as Mt,P as A,Q as _t,U as Dt,V as oe,W as Lt,X as qt,Y as _,Z as le,$ as C,a0 as L,a1 as ft,a2 as Ae,a3 as Bt,a4 as Ot,a5 as jt,a6 as je,a7 as z,a8 as Ht,a9 as zt,aa as Wt,ab as kt,ac as Vt,ad as ue,ae as se,af as $t,ag as Kt,ah as Yt,ai as Zt,aj as Xt,o as Z,ak as gt,p as M,r as pe,j as l,S as N,T as v,L as U,R as W,I as H,w as be,q as Jt,y as ie,z as It}from"./index-C2cM-DBs.js";import{z as y,u as X,F as J,t as Q}from"./form-provider-CLORH2Dm.js";import{u as St}from"./use-countdown-bpsF7YRr.js";import{E as Qt,P as Gt,S as en}from"./new-password-icon-BWat4CEr.js";import{F as T}from"./fields-BDiywkX5.js";import"./image-CAg2ZcR_.js";import"./editor-BI5ptJ30.js";import{L as G}from"./LoadingButton-C7S0WlDO.js";import{I as ae}from"./InputAdornment-nAtlisNJ.js";const tn=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:s="",fullVersionList:i=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=i.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,s,o,t,r].filter(a=>a).join(" ")};function nn(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const re={convert(e,{urlSafe:t}={urlSafe:!1}){const n=typeof e=="string"?e:nn(e),o=bt()(n);return t?o.replace(/\+/g,"-").replace(/\//g,"_"):o}};function on(){return Ut().getRandomValues(new Uint32Array(1))[0]}function sn(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let s=0;s<n;s++){const i=t[s>>>2]>>>24-s%4*8&255;o.push((i>>>4).toString(16)),o.push((i&15).toString(16))}return o.join("")}class Ue{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(on());return new Ue(n,t)}toString(){return sn(this)}}var x;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(x||(x={}));const an={[x.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[x.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[x.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[x.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[x.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[x.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[x.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[x.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[x.EmptySignInPassword]:{message:"password is required to signIn"},[x.EmptySignInUsername]:{message:"username is required to signIn"},[x.EmptySignUpPassword]:{message:"password is required to signUp"},[x.EmptySignUpUsername]:{message:"username is required to signUp"},[x.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[x.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[x.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[x.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[x.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var He;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(He||(He={}));var ce;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(ce||(ce={}));function R(e,t){const{message:n,recoverySuggestion:o}=an[t];if(!e)throw new b({name:t,message:n,recoverySuggestion:o})}function ze(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}var We;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(We||(We={}));var ke;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ke||(ke={}));var Ve;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ve||(Ve={}));var $e;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})($e||($e={}));var Ke;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Ke||(Ke={}));var Ye;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ye||(Ye={}));var Ze;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ze||(Ze={}));var Xe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xe||(Xe={}));var Je;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Je||(Je={}));var Qe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Qe||(Qe={}));var Ge;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Ge||(Ge={}));var et;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(et||(et={}));var tt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(tt||(tt={}));var nt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(nt||(nt={}));var de;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(de||(de={}));var ot;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(ot||(ot={}));var st;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(st||(st={}));var it;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(it||(it={}));var at;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(at||(at={}));var rt;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(rt||(rt={}));var ct;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var dt;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(dt||(dt={}));var lt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(lt||(lt={}));var ut;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ut||(ut={}));const rn=async e=>{var c,a;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;F(t);const n=await e.Auth.getTokens({forceRefresh:!1});Mt(n);const{"cognito:username":o,sub:s}=((a=n.idToken)==null?void 0:a.payload)??{},i={username:o,userId:s},r=cn(n);return r&&(i.signInDetails=r),i};function cn(e){return e==null?void 0:e.signInDetails}const yt=async()=>rn(A),q=(e,t)=>_t({category:Dt.Auth,action:e,...t}),dn=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return Rt();default:return e}};function Rt(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const ln=e=>{let t=e(Rt(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},k=ln(dn);function me(e){k.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function O(){k.dispatch({type:"SET_INITIAL_STATE"})}const te={convert(e){return new TextEncoder().encode(e)}};function E(e,t){e!=null&&this.fromString(e,t)}function w(){return new E(null,null)}let B;const un=0xdeadbeefcafe,pt=(un&16777215)===15715070;function pn(e,t,n,o,s,i){for(;--i>=0;){const r=t*this[e++]+n[o]+s;s=Math.floor(r/67108864),n[o++]=r&67108863}return s}function mn(e,t,n,o,s,i){const r=t&32767,c=t>>15;for(;--i>=0;){let a=this[e]&32767;const d=this[e++]>>15,p=c*a+d*r;a=r*a+((p&32767)<<15)+n[o]+(s&1073741823),s=(a>>>30)+(p>>>15)+c*d+(s>>>30),n[o++]=a&1073741823}return s}function En(e,t,n,o,s,i){const r=t&16383,c=t>>14;for(;--i>=0;){let a=this[e]&16383;const d=this[e++]>>14,p=c*a+d*r;a=r*a+((p&16383)<<14)+n[o]+s,s=(a>>28)+(p>>14)+c*d,n[o++]=a&268435455}return s}const mt=typeof navigator<"u";mt&&pt&&navigator.appName==="Microsoft Internet Explorer"?(E.prototype.am=mn,B=30):mt&&pt&&navigator.appName!=="Netscape"?(E.prototype.am=pn,B=26):(E.prototype.am=En,B=28);E.prototype.DB=B;E.prototype.DM=(1<<B)-1;E.prototype.DV=1<<B;const Me=52;E.prototype.FV=Math.pow(2,Me);E.prototype.F1=Me-B;E.prototype.F2=2*B-Me;const hn="0123456789abcdefghijklmnopqrstuvwxyz",Ee=[];let $,P;$=48;for(P=0;P<=9;++P)Ee[$++]=P;$=97;for(P=10;P<36;++P)Ee[$++]=P;$=65;for(P=10;P<36;++P)Ee[$++]=P;function Et(e){return hn.charAt(e)}function xn(e,t){const n=Ee[e.charCodeAt(t)];return n??-1}function fn(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function gn(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function _e(e){const t=w();return t.fromInt(e),t}function In(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,s=!1,i=0;for(;--o>=0;){const r=xn(e,o);if(r<0){e.charAt(o)==="-"&&(s=!0);continue}s=!1,i===0?this[this.t++]=r:i+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-i)-1)<<i,this[this.t++]=r>>this.DB-i):this[this.t-1]|=r<<i,i+=n,i>=this.DB&&(i-=this.DB)}this.clamp(),s&&E.ZERO.subTo(this,this)}function Sn(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function yn(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,s=!1,i="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(o=this[r]>>c)>0&&(s=!0,i=Et(o));r>=0;)c<t?(o=(this[r]&(1<<c)-1)<<t-c,o|=this[--r]>>(c+=this.DB-t)):(o=this[r]>>(c-=t)&n,c<=0&&(c+=this.DB,--r)),o>0&&(s=!0),s&&(i+=Et(o));return s?i:"0"}function Rn(){const e=w();return E.ZERO.subTo(this,e),e}function wn(){return this.s<0?this.negate():this}function Nn(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function De(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function Cn(){return this.t<=0?0:this.DB*(this.t-1)+De(this[this.t-1]^this.s&this.DM)}function Tn(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function vn(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Pn(e,t){const n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB);let r=this.s<<n&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+i+1]=this[c]>>o|r,r=(this[c]&s)<<n;for(c=i-1;c>=0;--c)t[c]=0;t[i]=r,t.t=this.t+i+1,t.s=this.s,t.clamp()}function Fn(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,s=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&i)<<s,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<s),t.t=this.t-n,t.clamp()}function An(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function bn(e,t){const n=this.abs(),o=e.abs();let s=n.t;for(t.t=s+o.t;--s>=0;)t[s]=0;for(s=0;s<o.t;++s)t[s+n.t]=n.am(0,o[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&E.ZERO.subTo(t,t)}function Un(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Mn(e,t,n){const o=e.abs();if(o.t<=0)return;const s=this.abs();if(s.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=w());const i=w(),r=this.s,c=e.s,a=this.DB-De(o[o.t-1]);a>0?(o.lShiftTo(a,i),s.lShiftTo(a,n)):(o.copyTo(i),s.copyTo(n));const d=i.t,p=i[d-1];if(p===0)return;const m=p*(1<<this.F1)+(d>1?i[d-2]>>this.F2:0),u=this.FV/m,h=(1<<this.F1)/m,f=1<<this.F2;let g=n.t,S=g-d;const I=t===null?w():t;for(i.dlShiftTo(S,I),n.compareTo(I)>=0&&(n[n.t++]=1,n.subTo(I,n)),E.ONE.dlShiftTo(d,I),I.subTo(i,i);i.t<d;)i[i.t++]=0;for(;--S>=0;){let j=n[--g]===p?this.DM:Math.floor(n[g]*u+(n[g-1]+f)*h);if((n[g]+=i.am(0,j,n,S,0,d))<j)for(i.dlShiftTo(S,I),n.subTo(I,n);n[g]<--j;)n.subTo(I,n)}t!==null&&(n.drShiftTo(d,t),r!==c&&E.ZERO.subTo(t,t)),n.t=d,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&E.ZERO.subTo(n,n)}function _n(e){const t=w();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t}function Dn(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ln(e){return this.compareTo(e)===0}function qn(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function Bn(e){const t=w();return this.addTo(e,t),t}function On(e){const t=w();return this.subTo(e,t),t}function jn(e){const t=w();return this.multiplyTo(e,t),t}function Hn(e){const t=w();return this.divRemTo(e,t,null),t}function K(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function zn(e){const t=w();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t}function Wn(e){const t=w();return e.copyTo(t),this.reduce(t),t}function kn(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Vn(e,t){e.squareTo(t),this.reduce(t)}function $n(e,t,n){e.multiplyTo(t,n),this.reduce(n)}K.prototype.convert=zn;K.prototype.revert=Wn;K.prototype.reduce=kn;K.prototype.mulTo=$n;K.prototype.sqrTo=Vn;function Kn(e,t,n){let o=e.bitLength(),s,i=_e(1);const r=new K(t);if(o<=0)return i;o<18?s=1:o<48?s=3:o<144?s=4:o<768?s=5:s=6;const c=[];let a=3;const d=s-1,p=(1<<s)-1;if(c[1]=r.convert(this),s>1){const I=w();for(r.sqrTo(c[1],I);a<=p;)c[a]=w(),r.mulTo(I,c[a-2],c[a]),a+=2}let m=e.t-1,u,h=!0,f=w(),g;for(o=De(e[m])-1;m>=0;){for(o>=d?u=e[m]>>o-d&p:(u=(e[m]&(1<<o+1)-1)<<d-o,m>0&&(u|=e[m-1]>>this.DB+o-d)),a=s;!(u&1);)u>>=1,--a;if((o-=a)<0&&(o+=this.DB,--m),h)c[u].copyTo(i),h=!1;else{for(;a>1;)r.sqrTo(i,f),r.sqrTo(f,i),a-=2;a>0?r.sqrTo(i,f):(g=i,i=f,f=g),r.mulTo(f,c[u],i)}for(;m>=0&&!(e[m]&1<<o);)r.sqrTo(i,f),g=i,i=f,f=g,--o<0&&(o=this.DB-1,--m)}const S=r.revert(i);return n(null,S),S}E.prototype.copyTo=fn;E.prototype.fromInt=gn;E.prototype.fromString=In;E.prototype.clamp=Sn;E.prototype.dlShiftTo=Tn;E.prototype.drShiftTo=vn;E.prototype.lShiftTo=Pn;E.prototype.rShiftTo=Fn;E.prototype.subTo=An;E.prototype.multiplyTo=bn;E.prototype.squareTo=Un;E.prototype.divRemTo=Mn;E.prototype.invDigit=Dn;E.prototype.addTo=qn;E.prototype.toString=yn;E.prototype.negate=Rn;E.prototype.abs=wn;E.prototype.compareTo=Nn;E.prototype.bitLength=Cn;E.prototype.mod=_n;E.prototype.equals=Ln;E.prototype.add=Bn;E.prototype.subtract=On;E.prototype.multiply=jn;E.prototype.divide=Hn;E.prototype.modPow=Kn;E.ZERO=_e(0);E.ONE=_e(1);const Yn=async({a:e,g:t,k:n,x:o,B:s,N:i,U:r})=>new Promise((c,a)=>{t.modPow(o,i,(d,p)=>{if(d){a(d);return}s.subtract(n.multiply(p)).modPow(e.add(r.multiply(o)),i,(m,u)=>{if(m){a(m);return}c(u.mod(i))})})}),Zn="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",wt={},Te={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),wt[e]=t,Te[t]=e}const V=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in Te)t[n/2]=Te[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},Le=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=wt[e[n]];return t},ve=e=>{const t=new oe;t.update(e);const n=t.digestSync(),o=Le(n);return new Array(64-o.length).join("0")+o},ne=e=>ve(V(e)),Xn=/^[89a-f]/i,D=e=>{if(!(e instanceof E))throw new Error("Not a BigInteger");const t=e.compareTo(E.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=Xn.test(n)?`00${n}`:n,t){const o=n.split("").map(i=>{const r=~parseInt(i,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new E(o,16).add(E.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},Jn=({A:e,B:t})=>{const n=new E(ne(D(e)+D(t)),16);if(n.equals(E.ZERO))throw new Error("U cannot be zero.");return n},Qn=(e,t,n)=>{const o=new oe(t);o.update(e);const s=o.digestSync(),i=new oe(s);return i.update(n),i.digestSync().slice(0,16)},qe=e=>{const t=new Ue().random(e).toString();return V(t)},Gn=()=>re.convert(qe(40));class eo{constructor({userPoolName:t,a:n,g:o,A:s,N:i}){this.encoder=te,this.userPoolName=t,this.a=n,this.g=o,this.A=s,this.N=i,this.k=new E(ne(`${D(i)}${D(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new b({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new b({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new b({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=Gn();const o=`${t}${n}:${this.randomPassword}`,s=ve(o),i=Le(qe(16));return this.saltToHashDevices=D(new E(i,16)),new Promise((r,c)=>{this.g.modPow(new E(ne(this.saltToHashDevices+s),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=D(d),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:s}){if(o.mod(this.N).equals(E.ZERO))throw new Error("B cannot be zero.");const i=Jn({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,c=ve(r),a=new E(ne(D(s)+c),16),d=await Yn({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),p=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert(""),u=new Uint8Array(p.byteLength+m.byteLength);return u.set(p,0),u.set(m,p.byteLength),Qn(V(D(d)),V(D(i)),u)}}const to=async({a:e,g:t,N:n})=>new Promise((o,s)=>{t.modPow(e,n,(i,r)=>{if(i){s(i);return}if(r.mod(n).equals(E.ZERO)){s(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),he=async e=>{const t=new E(Zn,16),n=new E("2",16),o=no(),s=await to({a:o,g:n,N:t});return new eo({userPoolName:e,a:o,g:n,A:s,N:t})},no=()=>{const e=Le(qe(128));return new E(e,16)},oo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],so=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Nt=()=>{const e=new Date,t=so[e.getUTCDay()],n=oo[e.getUTCMonth()],o=e.getUTCDate();let s=e.getUTCHours();s<10&&(s=`0${s}`);let i=e.getUTCMinutes();i<10&&(i=`0${i}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${n} ${o} ${s}:${i}:${r} UTC ${c}`},Ct=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:s})=>{const i=te.convert(e),r=te.convert(t),c=io(n.SECRET_BLOCK),a=te.convert(o),d=new Uint8Array(i.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(i,0),d.set(r,i.byteLength),d.set(c,i.byteLength+r.byteLength),d.set(a,i.byteLength+r.byteLength+c.byteLength);const p=new oe(s);p.update(d);const m=p.digestSync();return re.convert(m)},io=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=Lt.convert(n),s=new Uint8Array(o.length);for(let i=0;i<o.length;++i)s[i]=o.charCodeAt(i);return s},ht="userAttributes.";async function ao(e,t,n,o,s){var h,f;const{userPoolClientId:i,userPoolId:r}=o,c={USERNAME:e,PASSWORD:t},a=await s.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=_({username:e,userPoolId:r,userPoolClientId:i}),p={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:c,ClientMetadata:n,ClientId:i,UserContextData:d},m=await le({region:C(r),userAgentValue:q(L.SignIn)},p),u=((h=m.ChallengeParameters)==null?void 0:h.USERNAME)??((f=m.ChallengeParameters)==null?void 0:f.USER_ID_FOR_SRP)??e;return Se(u),m.ChallengeName==="DEVICE_SRP_AUTH"?Be({username:u,config:o,clientMetadata:n,session:m.Session,tokenOrchestrator:s}):m}async function ro(e,t,n,o,s){const{userPoolId:i,userPoolClientId:r}=o,c=(i==null?void 0:i.split("_")[1])||"",a=await he(c),d={USERNAME:e,SRP_A:a.A.toString(16)},p=_({username:e,userPoolId:i,userPoolClientId:r}),m={AuthFlow:"USER_SRP_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:p},u=await le({region:C(i),userAgentValue:q(L.SignIn)},m),{ChallengeParameters:h,Session:f}=u,g=(h==null?void 0:h.USERNAME)??e;return Se(g),Ie(Tt,[t,h,n,f,a,o,s],g,s)}async function co(e,t,n,o){var u;const{userPoolClientId:s,userPoolId:i}=n,r={USERNAME:e},c=await o.getDeviceMetadata(e);c&&c.deviceKey&&(r.DEVICE_KEY=c.deviceKey);const a=_({username:e,userPoolId:i,userPoolClientId:s}),d={AuthFlow:"CUSTOM_AUTH",AuthParameters:r,ClientMetadata:t,ClientId:s,UserContextData:a},p=await le({region:C(i),userAgentValue:q(L.SignIn)},d),m=((u=p.ChallengeParameters)==null?void 0:u.USERNAME)??e;return Se(m),p.ChallengeName==="DEVICE_SRP_AUTH"?Be({username:m,config:n,clientMetadata:t,session:p.Session,tokenOrchestrator:o}):p}async function lo(e,t,n,o,s){F(o);const{userPoolId:i,userPoolClientId:r}=o,c=(i==null?void 0:i.split("_")[1])||"",a=await he(c),d={USERNAME:e,SRP_A:a.A.toString(16),CHALLENGE_NAME:"SRP_A"},p=_({username:e,userPoolId:i,userPoolClientId:r}),m={AuthFlow:"CUSTOM_AUTH",AuthParameters:d,ClientMetadata:n,ClientId:r,UserContextData:p},{ChallengeParameters:u,Session:h}=await le({region:C(i),userAgentValue:q(L.SignIn)},m),f=(u==null?void 0:u.USERNAME)??e;return Se(f),Ie(Tt,[t,u,n,h,a,o,s],f,s)}async function Be({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:s}){const{userPoolId:i}=t,r=t.userPoolClientId,c=await(s==null?void 0:s.getDeviceMetadata(e));ft(c);const a=await he(c.deviceGroupKey),d={USERNAME:e,SRP_A:a.A.toString(16),DEVICE_KEY:c.deviceKey},p={ChallengeName:"DEVICE_SRP_AUTH",ClientId:r,ChallengeResponses:d,ClientMetadata:n,Session:o},{ChallengeParameters:m,Session:u}=await Ae({region:C(i)},p);return uo(e,m,n,u,a,t,s)}async function uo(e,t,n,o,s,{userPoolId:i,userPoolClientId:r},c){const a=await(c==null?void 0:c.getDeviceMetadata(e));ft(a);const d=new E(t==null?void 0:t.SRP_B,16),p=new E(t==null?void 0:t.SALT,16),{deviceKey:m}=a,{deviceGroupKey:u}=a,h=await s.getPasswordAuthenticationKey({username:a.deviceKey,password:a.randomPassword,serverBValue:d,salt:p}),f=Nt(),g={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:f,PASSWORD_CLAIM_SIGNATURE:Ct({username:m,userPoolName:u,challengeParameters:t,dateNow:f,hkdf:h}),DEVICE_KEY:m},S=_({username:e,userPoolId:i,userPoolClientId:r}),I={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:g,Session:o,ClientMetadata:n,UserContextData:S};return Ae({region:C(i)},I)}async function Tt(e,t,n,o,s,i,r){const{userPoolId:c,userPoolClientId:a}=i,d=(c==null?void 0:c.split("_")[1])||"",p=new E(t==null?void 0:t.SRP_B,16),m=new E(t==null?void 0:t.SALT,16),u=t==null?void 0:t.USER_ID_FOR_SRP;if(!u)throw new b({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const h=await s.getPasswordAuthenticationKey({username:u,password:e,serverBValue:p,salt:m}),f=Nt(),g={USERNAME:u,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:f,PASSWORD_CLAIM_SIGNATURE:Ct({username:u,userPoolName:d,challengeParameters:t,dateNow:f,hkdf:h})},S=await r.getDeviceMetadata(u);S&&S.deviceKey&&(g.DEVICE_KEY=S.deviceKey);const I=_({username:u,userPoolId:c,userPoolClientId:a}),j={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:g,ClientMetadata:n,Session:o,ClientId:a,UserContextData:I},Ne=await Ae({region:C(c)},j);return Ne.ChallengeName==="DEVICE_SRP_AUTH"?Be({username:u,config:i,clientMetadata:n,session:Ne.Session,tokenOrchestrator:r}):Ne}async function xe(e){var s;const{challengeName:t,challengeParameters:n}=e,o=(s=A.getConfig().Auth)==null?void 0:s.Cognito;switch(F(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:i,username:r}=k.getState();if(!ho(n,"TOTP"))throw new b({name:ce.SignInException,message:`Cannot initiate MFA setup from available types: ${Pe(Fe(n.MFAS_CAN_SETUP))}`});const{Session:c,SecretCode:a}=await Bt({region:C(o.userPoolId)},{Session:i});return k.dispatch({type:"SET_SIGN_IN_SESSION",value:c}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:po(a,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:mo(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:Pe(Fe(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new b({name:ce.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function po(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const s=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new Ot(s)}}}function fe(e){if(e===de.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===de.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function mo(e){return e?JSON.parse(e).map(n=>n.includes(ht)?n.replace(ht,""):n):[]}function Eo(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function Pe(e){if(e)return e.map(Eo).filter(Boolean)}function Fe(e){return e?JSON.parse(e):[]}function ho(e,t){const{MFAS_CAN_SETUP:n}=e,o=Pe(Fe(n));return o?o.includes(t):!1}async function xo(){let e;try{e=await yt()}catch{}if(e&&e.userId&&e.username)throw new b({name:qt,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function ge(e,t,n){if(!t)return;const o=e.split("_")[1]||"",s=await he(o),i=t==null?void 0:t.DeviceKey,r=t==null?void 0:t.DeviceGroupKey;try{await s.generateHashDevice(r??"",i??"")}catch{return}const c={Salt:re.convert(V(s.getSaltToHashDevices())),PasswordVerifier:re.convert(V(s.getVerifierDevices()))},a=s.getRandomPassword();try{return await jt({region:C(e)},{AccessToken:n,DeviceName:await tn(),DeviceKey:t==null?void 0:t.DeviceKey,DeviceSecretVerifierConfig:c}),{deviceKey:i,deviceGroupKey:r,randomPassword:a}}catch{return}}async function Ie(e,t,n,o){try{return await e(...t)}catch(s){if(s instanceof b&&s.name==="ResourceNotFoundException"&&s.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw s}}function Se(e){const{dispatch:t}=k;t({type:"SET_USERNAME",value:e})}function ye(e){return k.getState().username??e}async function Re(e){if(e.AccessToken){const t=je(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),s=n>0?n-o:0;let i,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(i=je(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:i,refreshToken:r,clockDrift:s,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),await z.setTokens({tokens:a})}else throw new Ht({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const fo="Unable to get user session following successful sign-in.",we=async()=>{try{zt.dispatch("auth",{event:"signedIn",data:await yt()},"Auth",Wt)}catch(e){throw e.name===kt?new b({name:Vt,message:fo,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function go(e){var c;const t=(c=A.getConfig().Auth)==null?void 0:c.Cognito;F(t);const{username:n,password:o,options:s}=e,i={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=s==null?void 0:s.clientMetadata;R(!!n,x.EmptySignInUsername),R(!o,x.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:p,Session:m}=await Ie(co,[n,r,t,z],n,z),u=ye(n);return me({signInSession:m,username:u,challengeName:a,signInDetails:i}),p?(O(),await Re({username:u,...p,NewDeviceMetadata:await ge(t.userPoolId,p.NewDeviceMetadata,p.AccessToken),signInDetails:i}),await we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):xe({challengeName:a,challengeParameters:d})}catch(a){O(),ue(a);const d=fe(a.name);if(d)return d;throw a}}async function Io(e){var c;const{username:t,password:n,options:o}=e,s={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},i=(c=A.getConfig().Auth)==null?void 0:c.Cognito;F(i);const r=o==null?void 0:o.clientMetadata;R(!!t,x.EmptySignInUsername),R(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:p,Session:m}=await lo(t,n,r,i,z),u=ye(t);return me({signInSession:m,username:u,challengeName:a,signInDetails:s}),p?(await Re({username:u,...p,NewDeviceMetadata:await ge(i.userPoolId,p.NewDeviceMetadata,p.AccessToken),signInDetails:s}),O(),await we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):xe({challengeName:a,challengeParameters:d})}catch(a){O(),ue(a);const d=fe(a.name);if(d)return d;throw a}}async function xt(e){var r,c;const{username:t,password:n}=e,o=(r=A.getConfig().Auth)==null?void 0:r.Cognito,s={loginId:t,authFlowType:"USER_SRP_AUTH"};F(o);const i=(c=e.options)==null?void 0:c.clientMetadata;R(!!t,x.EmptySignInUsername),R(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:p,Session:m}=await ro(t,n,i,o,z),u=ye(t);return me({signInSession:m,username:u,challengeName:a,signInDetails:s}),p?(O(),await Re({username:u,...p,NewDeviceMetadata:await ge(o.userPoolId,p.NewDeviceMetadata,p.AccessToken),signInDetails:s}),await we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):xe({challengeName:a,challengeParameters:d})}catch(a){O(),ue(a);const d=fe(a.name);if(d)return d;throw a}}async function So(e){var c;const{username:t,password:n,options:o}=e,s=(c=A.getConfig().Auth)==null?void 0:c.Cognito,i={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};F(s);const r=o==null?void 0:o.clientMetadata;R(!!t,x.EmptySignInUsername),R(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:p,Session:m}=await Ie(ao,[t,n,r,s,z],t,z),u=ye(t);return me({signInSession:m,username:u,challengeName:a,signInDetails:i}),p?(await Re({...p,username:u,NewDeviceMetadata:await ge(s.userPoolId,p.NewDeviceMetadata,p.AccessToken),signInDetails:i}),O(),await we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):xe({challengeName:a,challengeParameters:d})}catch(a){O(),ue(a);const d=fe(a.name);if(d)return d;throw a}}async function yo(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await xo(),t){case"USER_SRP_AUTH":return xt(e);case"USER_PASSWORD_AUTH":return So(e);case"CUSTOM_WITHOUT_SRP":return go(e);case"CUSTOM_WITH_SRP":return Io(e);default:return xt(e)}}const Ro=3*60*1e3;function wo(e){const t=se.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const s=o.data;s!=null&&s.isSignUpComplete&&(se.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),Oe(!1),clearTimeout(n)},Ro)}let vt=!1,Pt;function Ft(e){Pt=e}function No(e){return Pt===e}function Y(){return vt}function Oe(e){e===!1&&Ft(void 0),vt=e}function ee(e){return!!e.UserConfirmed}async function Co(e){var h;const{username:t,password:n,options:o}=e,s=(h=A.getConfig().Auth)==null?void 0:h.Cognito,i=(s==null?void 0:s.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:c,autoSignIn:a}=e.options??{};F(s),R(!!t,x.EmptySignUpUsername),R(!!n,x.EmptySignUpPassword);const d=typeof a!="boolean"?a:void 0;d==null||d.authFlowType,(d||a===!0)&&(Ft(t),Oe(!0));const p=await $t({region:C(s.userPoolId),userAgentValue:q(L.SignUp)},{Username:t,Password:n,UserAttributes:(o==null?void 0:o.userAttributes)&&ze(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:c&&ze(c),ClientId:s.userPoolClientId}),{UserSub:m,CodeDeliveryDetails:u}=p;if(ee(p)&&Y())return{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:m};if(ee(p)&&!Y())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:m};if(!ee(p)&&Y()&&i==="code")wo();else if(!ee(p)&&Y()&&i==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:u==null?void 0:u.DeliveryMedium,destination:u==null?void 0:u.Destination,attributeName:u==null?void 0:u.AttributeName}},userId:m};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:u==null?void 0:u.DeliveryMedium,destination:u==null?void 0:u.Destination,attributeName:u==null?void 0:u.AttributeName}},userId:m}}async function To(e){var d,p;const{username:t}=e;R(!!t,x.EmptyResetPasswordUsername);const n=(d=A.getConfig().Auth)==null?void 0:d.Cognito;F(n);const{userPoolClientId:o,userPoolId:s}=n,i=(p=e.options)==null?void 0:p.clientMetadata,r=_({username:t,userPoolId:s,userPoolClientId:o}),a=(await Kt({region:C(n.userPoolId),userAgentValue:q(L.ResetPassword)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:r})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:a==null?void 0:a.DeliveryMedium,destination:a==null?void 0:a.Destination,attributeName:a==null?void 0:a.AttributeName}}}}async function vo(e){var d,p;const t=(d=A.getConfig().Auth)==null?void 0:d.Cognito;F(t);const{userPoolClientId:n,userPoolId:o}=t,{username:s,newPassword:i}=e;R(!!s,x.EmptyConfirmResetPasswordUsername),R(!!i,x.EmptyConfirmResetPasswordNewPassword);const r=e.confirmationCode;R(!!r,x.EmptyConfirmResetPasswordConfirmationCode);const c=(p=e.options)==null?void 0:p.clientMetadata,a=_({username:s,userPoolId:o,userPoolClientId:n});await Yt({region:C(t.userPoolId),userAgentValue:q(L.ConfirmResetPassword)},{Username:s,ConfirmationCode:r,Password:i,ClientMetadata:c,ClientId:t.userPoolClientId,UserContextData:a})}async function Po(e){var m,u;const{username:t}=e;R(!!t,x.EmptySignUpUsername);const n=(m=A.getConfig().Auth)==null?void 0:m.Cognito;F(n);const{userPoolClientId:o,userPoolId:s}=n,i=(u=e.options)==null?void 0:u.clientMetadata,r=_({username:t,userPoolId:s,userPoolClientId:o}),{CodeDeliveryDetails:c}=await Zt({region:C(n.userPoolId),userAgentValue:q(L.ResendSignUpCode)},{Username:t,ClientMetadata:i,ClientId:n.userPoolClientId,UserContextData:r}),{DeliveryMedium:a,AttributeName:d,Destination:p}={...c};return{destination:p,deliveryMedium:a,attributeName:d||void 0}}async function Fo(e){var d;const{username:t,confirmationCode:n,options:o}=e,s=(d=A.getConfig().Auth)==null?void 0:d.Cognito;F(s);const{userPoolId:i,userPoolClientId:r}=s,c=o==null?void 0:o.clientMetadata;R(!!t,x.EmptyConfirmSignUpUsername),R(!!n,x.EmptyConfirmSignUpCode);const a=_({username:t,userPoolId:i,userPoolClientId:r});return await Xt({region:C(s.userPoolId),userAgentValue:q(L.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:c,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:s.userPoolClientId,UserContextData:a}),new Promise((p,m)=>{try{const u={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!Y()||!No(t)){p(u);return}const h=se.listen("auth-internal",({payload:f})=>{switch(f.event){case"autoSignIn":p({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Oe(!1),h()}});se.dispatch("auth-internal",{event:"confirmSignUp",data:u})}catch(u){m(u)}})}const Ao=async({username:e,password:t})=>{await yo({username:e,password:t})},bo=async({username:e,password:t,firstName:n,lastName:o})=>{await Co({username:e,password:t,options:{userAttributes:{email:e,given_name:n,family_name:o}}})},Uo=async({username:e,confirmationCode:t})=>{await Fo({username:e,confirmationCode:t})},Ce=async({username:e})=>{await Po({username:e})},At=async({username:e})=>{await To({username:e})},Mo=async({username:e,confirmationCode:t,newPassword:n})=>{await vo({username:e,confirmationCode:t,newPassword:n})},_o=y.object({code:y.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Yo(){const e=Z(),n=gt().get("email"),{countdown:o,counting:s,startCountdown:i}=St(60),r={code:"",email:n||""},c=X({resolver:Q(_o),defaultValues:r}),{watch:a,handleSubmit:d,formState:{isSubmitting:p}}=c,m=a(),u=d(async S=>{try{await Uo({username:S.email,confirmationCode:S.code}),e.push(M.auth.amplify.signIn)}catch(I){console.error(I)}}),h=pe.useCallback(async()=>{try{i(),await(Ce==null?void 0:Ce({username:m.email}))}catch(S){console.error(S)}},[i,m.email]),f=l.jsxs(l.Fragment,{children:[l.jsx(Qt,{sx:{mx:"auto"}}),l.jsxs(N,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(v,{variant:"h5",children:"Please check your email!"}),l.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:`We've emailed a 6-digit confirmation code. 
Please enter the code in the box below to verify your email.`})]})]}),g=l.jsxs(N,{spacing:3,children:[l.jsx(T.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),l.jsx(T.Code,{name:"code"}),l.jsx(G,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:p,loadingIndicator:"Verify...",children:"Verify"}),l.jsxs(v,{variant:"body2",sx:{mx:"auto"},children:["Dont have a code? ",l.jsxs(U,{variant:"subtitle2",onClick:h,sx:{cursor:"pointer",...s&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",s&&`(${o}s)`]})]}),l.jsxs(U,{component:W,href:M.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(H,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[f,l.jsx(J,{methods:c,onSubmit:u,children:g})]})}const Do=y.object({email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function Zo(){const e=Z(),t=be(),[n,o]=pe.useState(""),{checkUserSession:s}=Jt(),i={email:"",password:""},r=X({resolver:Q(Do),defaultValues:i}),{handleSubmit:c,formState:{isSubmitting:a}}=r,d=c(async u=>{try{await Ao({username:u.email,password:u.password}),await(s==null?void 0:s()),e.refresh()}catch(h){console.error(h),o(h instanceof Error?h.message:h)}}),p=l.jsxs(N,{spacing:1.5,sx:{mb:5},children:[l.jsx(v,{variant:"h5",children:"Sign in to your account"}),l.jsxs(N,{direction:"row",spacing:.5,children:[l.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:"Don't have an account?"}),l.jsx(U,{component:W,href:M.auth.amplify.signUp,variant:"subtitle2",children:"Get started"})]})]}),m=l.jsxs(N,{spacing:3,children:[l.jsx(T.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),l.jsxs(N,{spacing:1.5,children:[l.jsx(U,{component:W,href:M.auth.amplify.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),l.jsx(T.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:t.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(ae,{position:"end",children:l.jsx(ie,{onClick:t.onToggle,edge:"end",children:l.jsx(H,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),l.jsx(G,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Sign in...",children:"Sign in"})]});return l.jsxs(l.Fragment,{children:[p,!!n&&l.jsx(It,{severity:"error",sx:{mb:3},children:n}),l.jsx(J,{methods:r,onSubmit:d,children:m})]})}const Lo=y.object({firstName:y.string().min(1,{message:"First name is required!"}),lastName:y.string().min(1,{message:"Last name is required!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function Xo(){const[e,t]=pe.useState(""),n=Z(),o=be(),s={firstName:"",lastName:"",email:"",password:""},i=X({resolver:Q(Lo),defaultValues:s}),{handleSubmit:r,formState:{isSubmitting:c}}=i,a=r(async u=>{try{await bo({username:u.email,password:u.password,firstName:u.firstName,lastName:u.lastName});const h=new URLSearchParams({email:u.email}).toString(),f=`${M.auth.amplify.verify}?${h}`;n.push(f)}catch(h){console.error(h),t(h instanceof Error?h.message:h)}}),d=l.jsxs(N,{spacing:1.5,sx:{mb:5},children:[l.jsx(v,{variant:"h5",children:"Get started absolutely free"}),l.jsxs(N,{direction:"row",spacing:.5,children:[l.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:"Already have an account?"}),l.jsx(U,{component:W,href:M.auth.amplify.signIn,variant:"subtitle2",children:"Sign in"})]})]}),p=l.jsxs(N,{spacing:3,children:[l.jsxs(N,{direction:{xs:"column",sm:"row"},spacing:2,children:[l.jsx(T.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),l.jsx(T.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),l.jsx(T.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),l.jsx(T.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(ae,{position:"end",children:l.jsx(ie,{onClick:o.onToggle,edge:"end",children:l.jsx(H,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(G,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Create account...",children:"Create account"})]}),m=l.jsxs(v,{component:"div",sx:{mt:3,textAlign:"center",typography:"caption",color:"text.secondary"},children:["By signing up, I agree to ",l.jsx(U,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",l.jsx(U,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]});return l.jsxs(l.Fragment,{children:[d,!!e&&l.jsx(It,{severity:"error",sx:{mb:3},children:e}),l.jsx(J,{methods:i,onSubmit:a,children:p}),m]})}const qo=y.object({email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function Jo(){const e=Z(),t={email:""},n=X({resolver:Q(qo),defaultValues:t}),{handleSubmit:o,formState:{isSubmitting:s}}=n,i=o(async a=>{try{await At({username:a.email});const d=new URLSearchParams({email:a.email}).toString(),p=`${M.auth.amplify.updatePassword}?${d}`;e.push(p)}catch(d){console.error(d)}}),r=l.jsxs(l.Fragment,{children:[l.jsx(Gt,{sx:{mx:"auto"}}),l.jsxs(N,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(v,{variant:"h5",children:"Forgot your password?"}),l.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:"Please enter the email address associated with your account and we'll email you a link to reset your password."})]})]}),c=l.jsxs(N,{spacing:3,children:[l.jsx(T.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),l.jsx(G,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,loadingIndicator:"Send request...",children:"Send request"}),l.jsxs(U,{component:W,href:M.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(H,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[r,l.jsx(J,{methods:n,onSubmit:i,children:c})]})}const Bo=y.object({code:y.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:y.string().min(1,{message:"Confirm password is required!"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function Qo(){const e=Z(),n=gt().get("email"),o=be(),{countdown:s,counting:i,startCountdown:r}=St(60),c={code:"",email:n||"",password:"",confirmPassword:""},a=X({resolver:Q(Bo),defaultValues:c}),{watch:d,handleSubmit:p,formState:{isSubmitting:m}}=a,u=d(),h=p(async I=>{try{await Mo({username:I.email,confirmationCode:I.code,newPassword:I.password}),e.push(M.auth.amplify.signIn)}catch(j){console.error(j)}}),f=pe.useCallback(async()=>{try{r(),await At({username:u.email})}catch(I){console.error(I)}},[r,u.email]),g=l.jsxs(l.Fragment,{children:[l.jsx(en,{sx:{mx:"auto"}}),l.jsxs(N,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(v,{variant:"h5",children:"Request sent successfully!"}),l.jsx(v,{variant:"body2",sx:{color:"text.secondary"},children:`We've sent a 6-digit confirmation email to your email. 
Please enter the code in below box to verify your email.`})]})]}),S=l.jsxs(N,{spacing:3,children:[l.jsx(T.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),l.jsx(T.Code,{name:"code"}),l.jsx(T.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(ae,{position:"end",children:l.jsx(ie,{onClick:o.onToggle,edge:"end",children:l.jsx(H,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(T.Text,{name:"confirmPassword",label:"Confirm new password",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(ae,{position:"end",children:l.jsx(ie,{onClick:o.onToggle,edge:"end",children:l.jsx(H,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(G,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"Update password...",children:"Update password"}),l.jsxs(v,{variant:"body2",sx:{mx:"auto"},children:["Dont have a code? ",l.jsxs(U,{variant:"subtitle2",onClick:f,sx:{cursor:"pointer",...i&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",i&&`(${s}s)`]})]}),l.jsxs(U,{component:W,href:M.authDemo.split.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(H,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[g,l.jsx(J,{methods:a,onSubmit:h,children:S})]})}export{Zo as A,Xo as a,Yo as b,Qo as c,Jo as d};
