import{j as s,S as x,A as b,C as f,B as j,r as g,dC as P,er as C,eb as y,p,ep as T,e as R,I as S,aF as k,es as B,ef as D,H as E,dM as I,dK as L}from"./index-Bm3rBIkL.js";import{u as A,E as _}from"./error-block-BO5MDXKX.js";import{C as F}from"./custom-breadcrumbs-DgyWxDBR.js";import{P as O}from"./permission-access-controller-Bd1g1bvY.js";import{u as q,g as N,r as v,T as H,a as W,e as z}from"./table-selected-action-FGFYoCf9.js";import{T as K}from"./table-no-data-C5ESOE9S.js";import{T as Q,a as G,b as M,c as V}from"./table-head-custom-fAI8azNC.js";import{T as $}from"./table-pagination-custom-B5OCrP_3.js";import{T as i}from"./TableCell-DwZUj5h4.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-DZc8qiZw.js";import"./empty-content-Bj3fPw3b.js";import"./TablePagination-xS2VmU8P.js";import"./LastPage-Bo5KhWUM.js";import"./Select-BbFY65UU.js";import"./Menu-BCmDYN65.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-CLwZiNSB.js";import"./FormControlLabel-3udn0dpo.js";const J=({row:e,selected:t})=>{const l=s.jsxs(Q,{hover:!0,selected:t,children:[s.jsx(i,{children:e==null?void 0:e.productId}),s.jsx(i,{children:s.jsxs(x,{spacing:2,direction:"row",alignItems:"center",children:[s.jsx(b,{alt:e==null?void 0:e.name,src:f.site.serverFileHost+(e==null?void 0:e.image)}),s.jsx(j,{component:"span",children:e==null?void 0:e.name})]})}),s.jsx(i,{children:e==null?void 0:e.totals_quantity}),s.jsx(i,{children:e==null?void 0:e.pending_quantity}),s.jsx(i,{children:e==null?void 0:e.processing_a_quantity}),s.jsx(i,{children:e==null?void 0:e.processing_b_quantity}),s.jsx(i,{children:e==null?void 0:e.ready_quantity}),s.jsx(i,{children:e==null?void 0:e.in_stock})]});return s.jsx(s.Fragment,{children:l})},U=[{id:"id",label:"#",width:60},{id:"productName",label:"Product Name",width:260},{id:"planId",label:"Plan Qty"},{id:"orderAmount",label:"Pending Stock"},{id:"status",label:"Processing A Stock"},{id:"status",label:"Processing B Stock"},{id:"status",label:"Ready to Deliver Stock"},{id:"status",label:"In Stock"}],X=({products:e})=>{const t=q({defaultOrderBy:"orderNumber"}),[l,h]=g.useState(e),n=P({name:"",status:"all",startDate:null,endDate:null}),o=C(n.state.startDate,n.state.endDate),r=Y({inputData:l,comparator:N(t.order,t.orderBy),filters:n.state,dateError:o});g.useEffect(()=>{h(e)},[e]),v(r,t.page,t.rowsPerPage);const d=!!n.state.name||n.state.status!=="all"||!!n.state.startDate&&!!n.state.endDate,c=!r.length&&d||!r.length;return s.jsx(y,{maxWidth:"xl",children:s.jsxs(x,{spacing:3,children:[s.jsx(F,{links:[{name:"Dashboard",href:p.dashboard.root},{name:"Reports",href:p.dashboard.reports.root},{name:"Stock Report",href:p.dashboard.reports.stock}],action:s.jsx(O,{permission:T.DOWNLOAD_REPORT,children:s.jsx(R,{variant:"contained",startIcon:s.jsx(S,{icon:"mdi:microsoft-excel"}),children:"Export Excel"})})}),s.jsxs(k,{children:[s.jsxs(j,{sx:{position:"relative"},children:[s.jsx(H,{dense:t.dense,numSelected:t.selected.length,rowCount:r.length}),s.jsxs(G,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[s.jsx(M,{order:t.order,orderBy:t.orderBy,headLabel:U,rowCount:r.length}),s.jsxs(V,{children:[r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(a=>s.jsx(J,{row:a,selected:t.selected.includes(a.id)},a.id)),s.jsx(W,{height:t.dense?56:76,emptyRows:z(t.page,t.rowsPerPage,r.length)}),s.jsx(K,{notFound:c})]})]})]}),s.jsx($,{page:t.page,dense:t.dense,count:r.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]})})};function Y({inputData:e,comparator:t,filters:l,dateError:h}){const{status:n,name:o,startDate:r,endDate:d}=l,c=e.map((a,m)=>[a,m]);return c.sort((a,m)=>{const u=t(a[0],m[0]);return u!==0?u:a[1]-m[1]}),e=c.map(a=>a[0]),o&&(e=e.filter(a=>a.orderNumber.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.name.toLowerCase().indexOf(o.toLowerCase())!==-1||a.customer.email.toLowerCase().indexOf(o.toLowerCase())!==-1)),n!=="all"&&(e=e.filter(a=>a.status===n)),h||r&&d&&(e=e.filter(a=>B(a.createdAt,r,d))),e}const Z={title:`Reports list | Dashboard - ${f.site.name}`};function Ce(){const e=A({queryKey:["stock-details"],queryFn:async()=>(await I.get(L.stock.details)).data});return e.isPending||e.isLoading?s.jsx(D,{}):e.isError?s.jsx(_,{route:p.dashboard.reports.root}):s.jsxs(s.Fragment,{children:[s.jsx(E,{children:s.jsxs("title",{children:[" ",Z.title]})}),s.jsx(X,{products:e.data})]})}export{Ce as default};
