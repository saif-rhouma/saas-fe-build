import{j as e,aD as b,S as m,T as l,B as d,dw as j,e as g}from"./index-C2cM-DBs.js";import{z as i,i as f,u as T,t as C,F as N}from"./form-provider-CLORH2Dm.js";import{F as s}from"./fields-BDiywkX5.js";import"./image-CAg2ZcR_.js";import"./editor-BI5ptJ30.js";import{s as p}from"./schema-helper-BxubE0SK.js";import{a as v,b as w,D}from"./DialogContent-BpSW4FhH.js";import{D as S}from"./DialogTitle-DddmK_y9.js";import{L as A}from"./LoadingButton-C7S0WlDO.js";function L({address:a,action:o,sx:n,...t}){return e.jsxs(b,{sx:{gap:2,display:"flex",position:"relative",alignItems:{md:"flex-end"},flexDirection:{xs:"column",md:"row"},...n},...t,children:[e.jsxs(m,{flexGrow:1,spacing:1,children:[e.jsxs(m,{direction:"row",alignItems:"center",children:[e.jsxs(l,{variant:"subtitle2",children:[a.name,e.jsxs(d,{component:"span",sx:{ml:.5,typography:"body2",color:"text.secondary"},children:["(",a.addressType,")"]})]}),a.primary&&e.jsx(j,{color:"info",sx:{ml:1},children:"Default"})]}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:a.fullAddress}),e.jsx(l,{variant:"body2",sx:{color:"text.secondary"},children:a.phoneNumber})]}),o&&o]})}const q=i.object({city:i.string().min(1,{message:"City is required!"}),state:i.string().min(1,{message:"State is required!"}),name:i.string().min(1,{message:"Name is required!"}),address:i.string().min(1,{message:"Address is required!"}),zipCode:i.string().min(1,{message:"Zip code is required!"}),phoneNumber:p.phoneNumber({isValidPhoneNumber:f}),country:p.objectOrNull({message:{required_error:"Country is required!"}}),primary:i.boolean(),addressType:i.string()});function O({open:a,onClose:o,onCreate:n}){const t={name:"",city:"",state:"",address:"",zipCode:"",country:"",primary:!0,phoneNumber:"",addressType:"Home"},c=T({mode:"all",resolver:C(q),defaultValues:t}),{handleSubmit:u,formState:{isSubmitting:x}}=c,h=u(async r=>{try{n({name:r.name,phoneNumber:r.phoneNumber,fullAddress:`${r.address}, ${r.city}, ${r.state}, ${r.country}, ${r.zipCode}`,addressType:r.addressType,primary:r.primary}),o()}catch(y){console.error(y)}});return e.jsx(v,{fullWidth:!0,maxWidth:"sm",open:a,onClose:o,children:e.jsxs(N,{methods:c,onSubmit:h,children:[e.jsx(S,{children:"New address"}),e.jsx(w,{dividers:!0,children:e.jsxs(m,{spacing:3,children:[e.jsx(s.RadioGroup,{row:!0,name:"addressType",options:[{label:"Home",value:"Home"},{label:"Office",value:"Office"}]}),e.jsxs(d,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(s.Text,{name:"name",label:"Full name"}),e.jsx(s.Phone,{name:"phoneNumber",label:"Phone number"})]}),e.jsx(s.Text,{name:"address",label:"Address"}),e.jsxs(d,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(3, 1fr)"},children:[e.jsx(s.Text,{name:"city",label:"Town/city"}),e.jsx(s.Text,{name:"state",label:"State"}),e.jsx(s.Text,{name:"zipCode",label:"Zip/code"})]}),e.jsx(s.CountrySelect,{name:"country",label:"Country",placeholder:"Choose a country"}),e.jsx(s.Checkbox,{name:"primary",label:"Use this address as default."})]})}),e.jsxs(D,{children:[e.jsx(g,{color:"inherit",variant:"outlined",onClick:o,children:"Cancel"}),e.jsx(A,{type:"submit",variant:"contained",loading:x,children:"Deliver to this address"})]})]})})}export{L as A,O as a};
