import{r as x,de as f,e3 as j,j as e,dQ as b,cV as p,p as T,e4 as C,cY as y,B as P,dd as D,S as R,A as S,C as h,dU as E,H as B,dp as L,dm as F}from"./index-CC8ZOXtA.js";import{u as H,E as I}from"./error-block-ClcTD9po.js";import{b as O}from"./format-number-pdBITjLa.js";import{C as w}from"./custom-breadcrumbs-Bl5OnNTu.js";import{P as A}from"./permission-access-controller-CWt3Qm2o.js";import{g as q,e as k}from"./utils-MBUcMVfY.js";import{u as v}from"./use-table-BFN1iUju.js";import{T as N}from"./table-no-data-Cj9_XApF.js";import{T as Q}from"./table-empty-rows-C8apdTaI.js";import{a as _,b as z,c as G,T as U}from"./table-head-custom-DVdNqcUm.js";import{T as V}from"./table-pagination-custom-BLNPouAz.js";import{P as W}from"./product-table-toolbar-CUN9-_HN.js";import{P as K}from"./product-table-filters-result-BrC4ycIG.js";import{T as l}from"./TableCell-Lyd9zWIr.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./empty-content-CE7ZD1Zt.js";import"./Checkbox-Dv9DB-8I.js";import"./TablePagination-ByyUZnM0.js";import"./KeyboardArrowRight-C_h4tT89.js";import"./LastPage-KfqZ9eBe.js";import"./Select-aQYZH3TH.js";import"./Menu-eKJMgiWE.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-Lx9oX8L4.js";import"./FormControlLabel-DSmn4eUx.js";import"./TextField-C3GBty_k.js";import"./FormControl-CAeI9VZ6.js";import"./InputLabel-C4WXc4Lp.js";import"./FormLabel-Co2KdlDF.js";import"./FormHelperText-Bsh-3BCg.js";import"./InputAdornment-CZqtpVU7.js";import"./filters-result-B96qldBN.js";import"./Chip-Bqn7aPqU.js";const Y=[{id:"id",label:"#",width:60},{id:"name",label:"Product Name"},{id:"price",label:"Price",width:220},{id:"quantity",label:"Total Quantity",width:160}],$=({products:a})=>{const t=v({defaultOrderBy:"planId"}),[m,g]=x.useState(a),r=f({name:"",status:"all",startDate:null,endDate:null});x.useEffect(()=>{g(a)},[a]);const n=j(r.state.startDate,r.state.endDate),o=J({inputData:m,comparator:q(t.order,t.orderBy),filters:r.state,dateError:n}),c=!!r.state.name||r.state.status!=="all"||!!r.state.startDate&&!!r.state.endDate,d=!o.length&&c||!o.length;return e.jsx(b,{maxWidth:"xl",children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{xs:12,md:12,children:e.jsx(w,{links:[{name:"Dashboard",href:T.dashboard.root},{name:"Top Ordered Products"}]})}),e.jsx(A,{permission:C.LIST_PRODUCT,children:e.jsx(p,{xs:12,md:12,children:e.jsxs(y,{children:[e.jsx(W,{filters:r,onResetPage:t.onResetPage,dateError:n}),c&&e.jsx(K,{filters:r,totalResults:o.length,onResetPage:t.onResetPage,sx:{p:2.5,pt:0}}),e.jsx(P,{sx:{position:"relative"},children:e.jsx(D,{sx:{minHeight:444},children:e.jsxs(_,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(z,{order:t.order,orderBy:t.orderBy,headLabel:Y,rowCount:o.length,numSelected:t.selected.length,onSort:t.onSort}),e.jsxs(G,{children:[o.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map((s,i)=>e.jsxs(U,{children:[e.jsx(l,{children:s.id}),e.jsx(l,{children:e.jsxs(R,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(S,{alt:s==null?void 0:s.name,src:h.site.serverFileHost+((s==null?void 0:s.image)||h.site.defaultImgPlaceHolder)}),e.jsx(P,{component:"span",children:s==null?void 0:s.name})]})}),e.jsx(l,{children:O(s.price)}),e.jsx(l,{children:s.total_quantity})]})),e.jsx(Q,{height:t.dense?56:76,emptyRows:k(t.page,t.rowsPerPage,o.length)}),e.jsx(N,{notFound:d})]})]})})}),e.jsx(V,{page:t.page,dense:t.dense,count:o.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})})})]})})};function J({inputData:a,comparator:t,filters:m,dateError:g}){const{status:r,name:n,startDate:o,endDate:c}=m,d=a.map((s,i)=>[s,i]);return d.sort((s,i)=>{const u=t(s[0],i[0]);return u!==0?u:s[1]-i[1]}),a=d.map(s=>s[0]),n&&(a=a.filter(s=>s.id.toString().toLowerCase().indexOf(n.toLowerCase())!==-1||s.name.toLowerCase().indexOf(n.toLowerCase())!==-1)),a}const M={title:`Dashboard - ${h.site.name}`},we=()=>{const a=H({queryKey:["top-products"],queryFn:async()=>{const{data:t}=await L.get(F.topProducts);return t}});return a.isPending||a.isLoading?e.jsx(E,{}):a.isError?e.jsx(I,{route:""}):e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs("title",{children:[" ",M.title]})}),e.jsx($,{products:a.data})]})};export{we as default};
