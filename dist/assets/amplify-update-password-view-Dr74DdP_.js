import{q as qt,w as Bt,x as M,y as F,z as jt,D as b,E as Ht,F as kt,G as k,J as z,K as W,N as V,O as $,P as de,Q as zt,U as Wt,V as U,W as fe,X as N,Y as q,Z as Ct,$ as v,a0 as Vt,a1 as Ke,a2 as Y,a3 as $t,a4 as Kt,a5 as Yt,a6 as Zt,a7 as Xt,a8 as xe,a9 as le,g as te,aa as Nt,p as D,r as ge,j as l,S as C,T,L as _,R as Z,I as K,i as Le,h as Jt,l as ue,n as vt}from"./index-dT1vCng0.js";import{z as y,u as ne,F as P,a as oe,t as se}from"./form-provider-lJ9M1TmS.js";import{u as Pt}from"./use-countdown-M7XjV-TO.js";import{E as Qt,P as Gt,S as en}from"./new-password-icon-eAYU0w_p.js";import"./image-COOiVMf9.js";import"./editor-BHWTYWlb.js";import{L as ie}from"./LoadingButton-BMq0F1fQ.js";import{I as pe}from"./InputAdornment-Dl5rVrZF.js";const tn=async()=>{const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:s="",fullVersionList:i=[]}=await e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=i.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,s,o,t,r].filter(a=>a).join(" ")};function nn(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const me={convert(e,t={urlSafe:!1,skipPadding:!1}){const n=typeof e=="string"?e:nn(e);let o=qt()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};function on(){return Bt().getRandomValues(new Uint32Array(1))[0]}function sn(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let s=0;s<n;s++){const i=t[s>>>2]>>>24-s%4*8&255;o.push((i>>>4).toString(16)),o.push((i&15).toString(16))}return o.join("")}class Oe{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(on());return new Oe(n,t)}toString(){return sn(this)}}var I;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(I||(I={}));const rn={[I.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[I.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[I.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[I.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[I.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[I.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[I.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[I.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[I.EmptySignInPassword]:{message:"password is required to signIn"},[I.EmptySignInUsername]:{message:"username is required to signIn"},[I.EmptySignUpPassword]:{message:"password is required to signUp"},[I.EmptySignUpUsername]:{message:"username is required to signUp"},[I.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[I.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS or TOTP",recoverySuggestion:"Try to pass TOTP or SMS as the challengeResponse"},[I.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[I.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[I.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Ye;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(Ye||(Ye={}));var Ee;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(Ee||(Ee={}));function R(e,t){const{message:n,recoverySuggestion:o}=rn[t];if(!e)throw new M({name:t,message:n,recoverySuggestion:o})}function Ze(e){return Object.entries(e).map(([t,n])=>({Name:t,Value:n}))}var Xe;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(Xe||(Xe={}));var Je;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Je||(Je={}));var Qe;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Qe||(Qe={}));var Ge;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Ge||(Ge={}));var et;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(et||(et={}));var tt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(tt||(tt={}));var nt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(nt||(nt={}));var ot;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ot||(ot={}));var st;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(st||(st={}));var it;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(it||(it={}));var rt;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(rt||(rt={}));var at;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(at||(at={}));var ct;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var dt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(dt||(dt={}));var he;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(he||(he={}));var lt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(lt||(lt={}));var ut;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ut||(ut={}));var pt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(pt||(pt={}));var mt;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(mt||(mt={}));var Et;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Et||(Et={}));var ht;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ht||(ht={}));var ft;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ft||(ft={}));var xt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(xt||(xt={}));var gt;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(gt||(gt={}));const an=async e=>{var c,a;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;F(t);const n=await e.Auth.getTokens({forceRefresh:!1});jt(n);const{"cognito:username":o,sub:s}=((a=n.idToken)==null?void 0:a.payload)??{},i={username:o,userId:s},r=cn(n);return r&&(i.signInDetails=r),i};function cn(e){return e==null?void 0:e.signInDetails}const Tt=async()=>an(b),B=(e,t)=>Ht({category:kt.Auth,action:e,...t}),qe=e=>k($,V("RespondToAuthChallenge"),W(),{...z,...e}),dn=e=>k($,V("AssociateSoftwareToken"),W(),{...z,...e}),ln=e=>k($,V("ConfirmDevice"),W(),{...z,...e}),un=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return{...e,signInSession:t.value};case"SET_SIGN_IN_STATE":return{...t.value};case"SET_CHALLENGE_NAME":return{...e,challengeName:t.value};case"SET_USERNAME":return{...e,username:t.value};case"SET_INITIAL_STATE":return At();default:return e}};function At(){return{username:void 0,challengeName:void 0,signInSession:void 0}}const pn=e=>{let t=e(At(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},X=pn(un);function Ie(e){X.dispatch({type:"SET_SIGN_IN_STATE",value:e})}function H(){X.dispatch({type:"SET_INITIAL_STATE"})}const ae={convert(e){return new TextEncoder().encode(e)}};function E(e,t){e!=null&&this.fromString(e,t)}function w(){return new E(null,null)}let j;const mn=0xdeadbeefcafe,It=(mn&16777215)===15715070;function En(e,t,n,o,s,i){for(;--i>=0;){const r=t*this[e++]+n[o]+s;s=Math.floor(r/67108864),n[o++]=r&67108863}return s}function hn(e,t,n,o,s,i){const r=t&32767,c=t>>15;for(;--i>=0;){let a=this[e]&32767;const d=this[e++]>>15,u=c*a+d*r;a=r*a+((u&32767)<<15)+n[o]+(s&1073741823),s=(a>>>30)+(u>>>15)+c*d+(s>>>30),n[o++]=a&1073741823}return s}function fn(e,t,n,o,s,i){const r=t&16383,c=t>>14;for(;--i>=0;){let a=this[e]&16383;const d=this[e++]>>14,u=c*a+d*r;a=r*a+((u&16383)<<14)+n[o]+s,s=(a>>28)+(u>>14)+c*d,n[o++]=a&268435455}return s}const St=typeof navigator<"u";St&&It&&navigator.appName==="Microsoft Internet Explorer"?(E.prototype.am=hn,j=30):St&&It&&navigator.appName!=="Netscape"?(E.prototype.am=En,j=26):(E.prototype.am=fn,j=28);E.prototype.DB=j;E.prototype.DM=(1<<j)-1;E.prototype.DV=1<<j;const Be=52;E.prototype.FV=Math.pow(2,Be);E.prototype.F1=Be-j;E.prototype.F2=2*j-Be;const xn="0123456789abcdefghijklmnopqrstuvwxyz",Se=[];let Q,A;Q=48;for(A=0;A<=9;++A)Se[Q++]=A;Q=97;for(A=10;A<36;++A)Se[Q++]=A;Q=65;for(A=10;A<36;++A)Se[Q++]=A;function yt(e){return xn.charAt(e)}function gn(e,t){const n=Se[e.charCodeAt(t)];return n??-1}function In(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function Sn(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function je(e){const t=w();return t.fromInt(e),t}function yn(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,s=!1,i=0;for(;--o>=0;){const r=gn(e,o);if(r<0){e.charAt(o)==="-"&&(s=!0);continue}s=!1,i===0?this[this.t++]=r:i+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-i)-1)<<i,this[this.t++]=r>>this.DB-i):this[this.t-1]|=r<<i,i+=n,i>=this.DB&&(i-=this.DB)}this.clamp(),s&&E.ZERO.subTo(this,this)}function Rn(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function wn(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,s=!1,i="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(o=this[r]>>c)>0&&(s=!0,i=yt(o));r>=0;)c<t?(o=(this[r]&(1<<c)-1)<<t-c,o|=this[--r]>>(c+=this.DB-t)):(o=this[r]>>(c-=t)&n,c<=0&&(c+=this.DB,--r)),o>0&&(s=!0),s&&(i+=yt(o));return s?i:"0"}function Cn(){const e=w();return E.ZERO.subTo(this,e),e}function Nn(){return this.s<0?this.negate():this}function vn(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function He(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function Pn(){return this.t<=0?0:this.DB*(this.t-1)+He(this[this.t-1]^this.s&this.DM)}function Tn(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function An(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Fn(e,t){const n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB);let r=this.s<<n&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+i+1]=this[c]>>o|r,r=(this[c]&s)<<n;for(c=i-1;c>=0;--c)t[c]=0;t[i]=r,t.t=this.t+i+1,t.s=this.s,t.clamp()}function bn(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,s=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&i)<<s,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<s),t.t=this.t-n,t.clamp()}function Un(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function Mn(e,t){const n=this.abs(),o=e.abs();let s=n.t;for(t.t=s+o.t;--s>=0;)t[s]=0;for(s=0;s<o.t;++s)t[s+n.t]=n.am(0,o[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&E.ZERO.subTo(t,t)}function _n(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Dn(e,t,n){const o=e.abs();if(o.t<=0)return;const s=this.abs();if(s.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=w());const i=w(),r=this.s,c=e.s,a=this.DB-He(o[o.t-1]);a>0?(o.lShiftTo(a,i),s.lShiftTo(a,n)):(o.copyTo(i),s.copyTo(n));const d=i.t,u=i[d-1];if(u===0)return;const m=u*(1<<this.F1)+(d>1?i[d-2]>>this.F2:0),p=this.FV/m,h=(1<<this.F1)/m,f=1<<this.F2;let g=n.t,x=g-d;const S=t===null?w():t;for(i.dlShiftTo(x,S),n.compareTo(S)>=0&&(n[n.t++]=1,n.subTo(S,n)),E.ONE.dlShiftTo(d,S),S.subTo(i,i);i.t<d;)i[i.t++]=0;for(;--x>=0;){let L=n[--g]===u?this.DM:Math.floor(n[g]*p+(n[g-1]+f)*h);if((n[g]+=i.am(0,L,n,x,0,d))<L)for(i.dlShiftTo(x,S),n.subTo(S,n);n[g]<--L;)n.subTo(S,n)}t!==null&&(n.drShiftTo(d,t),r!==c&&E.ZERO.subTo(t,t)),n.t=d,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&E.ZERO.subTo(n,n)}function Ln(e){const t=w();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t}function On(){if(this.t<1)return 0;const e=this[0];if(!(e&1))return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function qn(e){return this.compareTo(e)===0}function Bn(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function jn(e){const t=w();return this.addTo(e,t),t}function Hn(e){const t=w();return this.subTo(e,t),t}function kn(e){const t=w();return this.multiplyTo(e,t),t}function zn(e){const t=w();return this.divRemTo(e,t,null),t}function G(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Wn(e){const t=w();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t}function Vn(e){const t=w();return e.copyTo(t),this.reduce(t),t}function $n(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Kn(e,t){e.squareTo(t),this.reduce(t)}function Yn(e,t,n){e.multiplyTo(t,n),this.reduce(n)}G.prototype.convert=Wn;G.prototype.revert=Vn;G.prototype.reduce=$n;G.prototype.mulTo=Yn;G.prototype.sqrTo=Kn;function Zn(e,t,n){let o=e.bitLength(),s,i=je(1);const r=new G(t);if(o<=0)return i;o<18?s=1:o<48?s=3:o<144?s=4:o<768?s=5:s=6;const c=[];let a=3;const d=s-1,u=(1<<s)-1;if(c[1]=r.convert(this),s>1){const S=w();for(r.sqrTo(c[1],S);a<=u;)c[a]=w(),r.mulTo(S,c[a-2],c[a]),a+=2}let m=e.t-1,p,h=!0,f=w(),g;for(o=He(e[m])-1;m>=0;){for(o>=d?p=e[m]>>o-d&u:(p=(e[m]&(1<<o+1)-1)<<d-o,m>0&&(p|=e[m-1]>>this.DB+o-d)),a=s;!(p&1);)p>>=1,--a;if((o-=a)<0&&(o+=this.DB,--m),h)c[p].copyTo(i),h=!1;else{for(;a>1;)r.sqrTo(i,f),r.sqrTo(f,i),a-=2;a>0?r.sqrTo(i,f):(g=i,i=f,f=g),r.mulTo(f,c[p],i)}for(;m>=0&&!(e[m]&1<<o);)r.sqrTo(i,f),g=i,i=f,f=g,--o<0&&(o=this.DB-1,--m)}const x=r.revert(i);return n(null,x),x}E.prototype.copyTo=In;E.prototype.fromInt=Sn;E.prototype.fromString=yn;E.prototype.clamp=Rn;E.prototype.dlShiftTo=Tn;E.prototype.drShiftTo=An;E.prototype.lShiftTo=Fn;E.prototype.rShiftTo=bn;E.prototype.subTo=Un;E.prototype.multiplyTo=Mn;E.prototype.squareTo=_n;E.prototype.divRemTo=Dn;E.prototype.invDigit=On;E.prototype.addTo=Bn;E.prototype.toString=wn;E.prototype.negate=Cn;E.prototype.abs=Nn;E.prototype.compareTo=vn;E.prototype.bitLength=Pn;E.prototype.mod=Ln;E.prototype.equals=qn;E.prototype.add=jn;E.prototype.subtract=Hn;E.prototype.multiply=kn;E.prototype.divide=zn;E.prototype.modPow=Zn;E.ZERO=je(0);E.ONE=je(1);const Xn=async({a:e,g:t,k:n,x:o,B:s,N:i,U:r})=>new Promise((c,a)=>{t.modPow(o,i,(d,u)=>{if(d){a(d);return}s.subtract(n.multiply(u)).modPow(e.add(r.multiply(o)),i,(m,p)=>{if(m){a(m);return}c(p.mod(i))})})}),Jn="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",Ft={},Ue={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Ft[e]=t,Ue[t]=e}const J=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in Ue)t[n/2]=Ue[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},ke=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=Ft[e[n]];return t},Me=e=>{const t=new de;t.update(e);const n=t.digestSync(),o=ke(n);return new Array(64-o.length).join("0")+o},ce=e=>Me(J(e)),Qn=/^[89a-f]/i,O=e=>{if(!(e instanceof E))throw new Error("Not a BigInteger");const t=e.compareTo(E.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=Qn.test(n)?`00${n}`:n,t){const o=n.split("").map(i=>{const r=~parseInt(i,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new E(o,16).add(E.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},Gn=({A:e,B:t})=>{const n=new E(ce(O(e)+O(t)),16);if(n.equals(E.ZERO))throw new Error("U cannot be zero.");return n},eo=(e,t,n)=>{const o=new de(t);o.update(e);const s=o.digestSync(),i=new de(s);return i.update(n),i.digestSync().slice(0,16)},ze=e=>{const t=new Oe().random(e).toString();return J(t)},to=()=>me.convert(ze(40));class no{constructor({userPoolName:t,a:n,g:o,A:s,N:i}){this.encoder=ae,this.userPoolName=t,this.a=n,this.g=o,this.A=s,this.N=i,this.k=new E(ce(`${O(i)}${O(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new M({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new M({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new M({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}async generateHashDevice(t,n){this.randomPassword=to();const o=`${t}${n}:${this.randomPassword}`,s=Me(o),i=ke(ze(16));return this.saltToHashDevices=O(new E(i,16)),new Promise((r,c)=>{this.g.modPow(new E(ce(this.saltToHashDevices+s),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=O(d),r()})})}async getPasswordAuthenticationKey({username:t,password:n,serverBValue:o,salt:s}){if(o.mod(this.N).equals(E.ZERO))throw new Error("B cannot be zero.");const i=Gn({A:this.A,B:o}),r=`${this.userPoolName}${t}:${n}`,c=Me(r),a=new E(ce(O(s)+c),16),d=await Xn({a:this.a,g:this.g,k:this.k,x:a,B:o,N:this.N,U:i}),u=this.encoder.convert("Caldera Derived Key"),m=this.encoder.convert(""),p=new Uint8Array(u.byteLength+m.byteLength);return p.set(u,0),p.set(m,u.byteLength),eo(J(O(d)),J(O(i)),p)}}const oo=async({a:e,g:t,N:n})=>new Promise((o,s)=>{t.modPow(e,n,(i,r)=>{if(i){s(i);return}if(r.mod(n).equals(E.ZERO)){s(new Error("Illegal parameter. A mod N cannot be 0."));return}o(r)})}),ye=async e=>{const t=new E(Jn,16),n=new E("2",16),o=so(),s=await oo({a:o,g:n,N:t});return new no({userPoolName:e,a:o,g:n,A:s,N:t})},so=()=>{const e=ke(ze(128));return new E(e,16)},io=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ro=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],bt=()=>{const e=new Date,t=ro[e.getUTCDay()],n=io[e.getUTCMonth()],o=e.getUTCDate();let s=e.getUTCHours();s<10&&(s=`0${s}`);let i=e.getUTCMinutes();i<10&&(i=`0${i}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${n} ${o} ${s}:${i}:${r} UTC ${c}`},Ut=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:s})=>{const i=ae.convert(e),r=ae.convert(t),c=ao(n.SECRET_BLOCK),a=ae.convert(o),d=new Uint8Array(i.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(i,0),d.set(r,i.byteLength),d.set(c,i.byteLength+r.byteLength),d.set(a,i.byteLength+r.byteLength+c.byteLength);const u=new de(s);u.update(d);const m=u.digestSync();return me.convert(m)},ao=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=zt.convert(n),s=new Uint8Array(o.length);for(let i=0;i<o.length;++i)s[i]=o.charCodeAt(i);return s},Rt="userAttributes.";async function co(e,t,n,o,s){var g,x;const{userPoolClientId:i,userPoolId:r,userPoolEndpoint:c}=o,a={USERNAME:e,PASSWORD:t},d=await s.getDeviceMetadata(e);d&&d.deviceKey&&(a.DEVICE_KEY=d.deviceKey);const u=U({username:e,userPoolId:r,userPoolClientId:i}),m={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:i,UserContextData:u},h=await fe({endpointResolver:v({endpointOverride:c})})({region:N(r),userAgentValue:B(q.SignIn)},m),f=((g=h.ChallengeParameters)==null?void 0:g.USERNAME)??((x=h.ChallengeParameters)==null?void 0:x.USER_ID_FOR_SRP)??e;return ve(f),h.ChallengeName==="DEVICE_SRP_AUTH"?We({username:f,config:o,clientMetadata:n,session:h.Session,tokenOrchestrator:s}):h}async function lo(e,t,n,o,s){const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=o,a=(i==null?void 0:i.split("_")[1])||"",d=await ye(a),u={USERNAME:e,SRP_A:d.A.toString(16)},m=U({username:e,userPoolId:i,userPoolClientId:r}),p={AuthFlow:"USER_SRP_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:m},f=await fe({endpointResolver:v({endpointOverride:c})})({region:N(i),userAgentValue:B(q.SignIn)},p),{ChallengeParameters:g,Session:x}=f,S=(g==null?void 0:g.USERNAME)??e;return ve(S),Ne(Mt,[t,g,n,x,d,o,s],S,s)}async function uo(e,t,n,o){var f;const{userPoolClientId:s,userPoolId:i,userPoolEndpoint:r}=n,c={USERNAME:e},a=await o.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=U({username:e,userPoolId:i,userPoolClientId:s}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:s,UserContextData:d},p=await fe({endpointResolver:v({endpointOverride:r})})({region:N(i),userAgentValue:B(q.SignIn)},u),h=((f=p.ChallengeParameters)==null?void 0:f.USERNAME)??e;return ve(h),p.ChallengeName==="DEVICE_SRP_AUTH"?We({username:h,config:n,clientMetadata:t,session:p.Session,tokenOrchestrator:o}):p}async function po(e,t,n,o,s){F(o);const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=o,a=(i==null?void 0:i.split("_")[1])||"",d=await ye(a),u={USERNAME:e,SRP_A:d.A.toString(16),CHALLENGE_NAME:"SRP_A"},m=U({username:e,userPoolId:i,userPoolClientId:r}),p={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:m},h=fe({endpointResolver:v({endpointOverride:c})}),{ChallengeParameters:f,Session:g}=await h({region:N(i),userAgentValue:B(q.SignIn)},p),x=(f==null?void 0:f.USERNAME)??e;return ve(x),Ne(Mt,[t,f,n,g,d,o,s],x,s)}async function We({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:s}){const{userPoolId:i,userPoolEndpoint:r}=t,c=t.userPoolClientId,a=await(s==null?void 0:s.getDeviceMetadata(e));Ct(a);const d=await ye(a.deviceGroupKey),u={USERNAME:e,SRP_A:d.A.toString(16),DEVICE_KEY:a.deviceKey},m={ChallengeName:"DEVICE_SRP_AUTH",ClientId:c,ChallengeResponses:u,ClientMetadata:n,Session:o},p=qe({endpointResolver:v({endpointOverride:r})}),{ChallengeParameters:h,Session:f}=await p({region:N(i)},m);return mo(e,h,n,f,d,t,s)}async function mo(e,t,n,o,s,{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c},a){const d=await(a==null?void 0:a.getDeviceMetadata(e));Ct(d);const u=new E(t==null?void 0:t.SRP_B,16),m=new E(t==null?void 0:t.SALT,16),{deviceKey:p}=d,{deviceGroupKey:h}=d,f=await s.getPasswordAuthenticationKey({username:d.deviceKey,password:d.randomPassword,serverBValue:u,salt:m}),g=bt(),x={USERNAME:(t==null?void 0:t.USERNAME)??e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:Ut({username:p,userPoolName:h,challengeParameters:t,dateNow:g,hkdf:f}),DEVICE_KEY:p},S=U({username:e,userPoolId:i,userPoolClientId:r}),L={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:x,Session:o,ClientMetadata:n,UserContextData:S};return qe({endpointResolver:v({endpointOverride:c})})({region:N(i)},L)}async function Mt(e,t,n,o,s,i,r){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=i,u=(c==null?void 0:c.split("_")[1])||"",m=new E(t==null?void 0:t.SRP_B,16),p=new E(t==null?void 0:t.SALT,16),h=t==null?void 0:t.USER_ID_FOR_SRP;if(!h)throw new M({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const f=await s.getPasswordAuthenticationKey({username:h,password:e,serverBValue:m,salt:p}),g=bt(),x={USERNAME:h,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:g,PASSWORD_CLAIM_SIGNATURE:Ut({username:h,userPoolName:u,challengeParameters:t,dateNow:g,hkdf:f})},S=await r.getDeviceMetadata(h);S&&S.deviceKey&&(x.DEVICE_KEY=S.deviceKey);const L=U({username:h,userPoolId:c,userPoolClientId:a}),$e={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:x,ClientMetadata:n,Session:o,ClientId:a,UserContextData:L},Fe=await qe({endpointResolver:v({endpointOverride:d})})({region:N(c)},$e);return Fe.ChallengeName==="DEVICE_SRP_AUTH"?We({username:h,config:i,clientMetadata:n,session:Fe.Session,tokenOrchestrator:r}):Fe}async function Re(e){var s;const{challengeName:t,challengeParameters:n}=e,o=(s=b.getConfig().Auth)==null?void 0:s.Cognito;switch(F(o),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:i,username:r}=X.getState();if(!xo(n,"TOTP"))throw new M({name:Ee.SignInException,message:`Cannot initiate MFA setup from available types: ${_e(De(n.MFAS_CAN_SETUP))}`});const c=dn({endpointResolver:v({endpointOverride:o.userPoolEndpoint})}),{Session:a,SecretCode:d}=await c({region:N(o.userPoolId)},{Session:i});return X.dispatch({type:"SET_SIGN_IN_SESSION",value:a}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Eo(d,r)}}}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:ho(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:_e(De(n.MFAS_CAN_CHOOSE))}};case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}}}throw new M({name:Ee.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})}function Eo(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const s=`otpauth://totp/${n}:${o??t}?secret=${e}&issuer=${n}`;return new Vt(s)}}}function we(e){if(e===he.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===he.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function ho(e){return e?JSON.parse(e).map(n=>n.includes(Rt)?n.replace(Rt,""):n):[]}function fo(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP"}function _e(e){if(e)return e.map(fo).filter(Boolean)}function De(e){return e?JSON.parse(e):[]}function xo(e,t){const{MFAS_CAN_SETUP:n}=e,o=_e(De(n));return o?o.includes(t):!1}async function go(){let e;try{e=await Tt()}catch{}if(e&&e.userId&&e.username)throw new M({name:Wt,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})}async function Ce({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:o}){if(!n)return;const s=e.split("_")[1]||"",i=await ye(s),r=n==null?void 0:n.DeviceKey,c=n==null?void 0:n.DeviceGroupKey;try{await i.generateHashDevice(c??"",r??"")}catch{return}const a={Salt:me.convert(J(i.getSaltToHashDevices())),PasswordVerifier:me.convert(J(i.getVerifierDevices()))},d=i.getRandomPassword();try{return await ln({endpointResolver:v({endpointOverride:t})})({region:N(e)},{AccessToken:o,DeviceName:await tn(),DeviceKey:n==null?void 0:n.DeviceKey,DeviceSecretVerifierConfig:a}),{deviceKey:r,deviceGroupKey:c,randomPassword:d}}catch{return}}async function Ne(e,t,n,o){try{return await e(...t)}catch(s){if(s instanceof M&&s.name==="ResourceNotFoundException"&&s.message.includes("Device does not exist."))return await o.clearDeviceMetadata(n),e(...t);throw s}}function ve(e){const{dispatch:t}=X;t({type:"SET_USERNAME",value:e})}function Pe(e){return X.getState().username??e}async function Te(e){if(e.AccessToken){const t=Ke(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),s=n>0?n-o:0;let i,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(i=Ke(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:i,refreshToken:r,clockDrift:s,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),await Y.setTokens({tokens:a})}else throw new $t({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})}const Io="Unable to get user session following successful sign-in.",Ae=async()=>{try{Kt.dispatch("auth",{event:"signedIn",data:await Tt()},"Auth",Yt)}catch(e){throw e.name===Zt?new M({name:Xt,message:Io,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}};async function So(e){var c;const t=(c=b.getConfig().Auth)==null?void 0:c.Cognito;F(t);const{username:n,password:o,options:s}=e,i={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=s==null?void 0:s.clientMetadata;R(!!n,I.EmptySignInUsername),R(!o,I.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:m}=await Ne(uo,[n,r,t,Y],n,Y),p=Pe(n);return Ie({signInSession:m,username:p,challengeName:a,signInDetails:i}),u?(H(),await Te({username:p,...u,NewDeviceMetadata:await Ce({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),await Ae(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:a,challengeParameters:d})}catch(a){H(),xe(a);const d=we(a.name);if(d)return d;throw a}}async function yo(e){var c;const{username:t,password:n,options:o}=e,s={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},i=(c=b.getConfig().Auth)==null?void 0:c.Cognito;F(i);const r=o==null?void 0:o.clientMetadata;R(!!t,I.EmptySignInUsername),R(!!n,I.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:m}=await po(t,n,r,i,Y),p=Pe(t);return Ie({signInSession:m,username:p,challengeName:a,signInDetails:s}),u?(await Te({username:p,...u,NewDeviceMetadata:await Ce({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),H(),await Ae(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:a,challengeParameters:d})}catch(a){H(),xe(a);const d=we(a.name);if(d)return d;throw a}}async function wt(e){var r,c;const{username:t,password:n}=e,o=(r=b.getConfig().Auth)==null?void 0:r.Cognito,s={loginId:t,authFlowType:"USER_SRP_AUTH"};F(o);const i=(c=e.options)==null?void 0:c.clientMetadata;R(!!t,I.EmptySignInUsername),R(!!n,I.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:m}=await lo(t,n,i,o,Y),p=Pe(t);return Ie({signInSession:m,username:p,challengeName:a,signInDetails:s}),u?(H(),await Te({username:p,...u,NewDeviceMetadata:await Ce({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s}),await Ae(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:a,challengeParameters:d})}catch(a){H(),xe(a);const d=we(a.name);if(d)return d;throw a}}async function Ro(e){var c;const{username:t,password:n,options:o}=e,s=(c=b.getConfig().Auth)==null?void 0:c.Cognito,i={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};F(s);const r=o==null?void 0:o.clientMetadata;R(!!t,I.EmptySignInUsername),R(!!n,I.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:m}=await Ne(co,[t,n,r,s,Y],t,Y),p=Pe(t);return Ie({signInSession:m,username:p,challengeName:a,signInDetails:i}),u?(await Te({...u,username:p,NewDeviceMetadata:await Ce({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i}),H(),await Ae(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):Re({challengeName:a,challengeParameters:d})}catch(a){H(),xe(a);const d=we(a.name);if(d)return d;throw a}}async function wo(e){var n;const t=(n=e.options)==null?void 0:n.authFlowType;switch(await go(),t){case"USER_SRP_AUTH":return wt(e);case"USER_PASSWORD_AUTH":return Ro(e);case"CUSTOM_WITHOUT_SRP":return So(e);case"CUSTOM_WITH_SRP":return yo(e);default:return wt(e)}}const Co=3*60*1e3;function No(e){const t=le.listen("auth-internal",async({payload:o})=>{switch(o.event){case"confirmSignUp":{const s=o.data;s!=null&&s.isSignUpComplete&&(le.dispatch("auth-internal",{event:"autoSignIn"}),t())}}}),n=setTimeout(()=>{t(),Ve(!1),clearTimeout(n)},Co)}let _t=!1,Dt;function Lt(e){Dt=e}function vo(e){return Dt===e}function ee(){return _t}function Ve(e){e===!1&&Lt(void 0),_t=e}function re(e){return!!e.UserConfirmed}const Po=e=>k($,V("SignUp"),W(),{...z,...e});async function To(e){var S;const{username:t,password:n,options:o}=e,s=(S=b.getConfig().Auth)==null?void 0:S.Cognito,i=(s==null?void 0:s.signUpVerificationMethod)??"code",{clientMetadata:r,validationData:c,autoSignIn:a}=e.options??{};F(s),R(!!t,I.EmptySignUpUsername),R(!!n,I.EmptySignUpPassword);const d=typeof a!="boolean"?a:void 0;d==null||d.authFlowType,(d||a===!0)&&(Lt(t),Ve(!0));const{userPoolId:u,userPoolClientId:m,userPoolEndpoint:p}=s,f=await Po({endpointResolver:v({endpointOverride:p})})({region:N(u),userAgentValue:B(q.SignUp)},{Username:t,Password:n,UserAttributes:(o==null?void 0:o.userAttributes)&&Ze(o==null?void 0:o.userAttributes),ClientMetadata:r,ValidationData:c&&Ze(c),ClientId:m,UserContextData:U({username:t,userPoolId:u,userPoolClientId:m})}),{UserSub:g,CodeDeliveryDetails:x}=f;if(re(f)&&ee())return{isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"},userId:g};if(re(f)&&!ee())return{isSignUpComplete:!0,nextStep:{signUpStep:"DONE"},userId:g};if(!re(f)&&ee()&&i==="code")No();else if(!re(f)&&ee()&&i==="link")return{isSignUpComplete:!1,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN",codeDeliveryDetails:{deliveryMedium:x==null?void 0:x.DeliveryMedium,destination:x==null?void 0:x.Destination,attributeName:x==null?void 0:x.AttributeName}},userId:g};return{isSignUpComplete:!1,nextStep:{signUpStep:"CONFIRM_SIGN_UP",codeDeliveryDetails:{deliveryMedium:x==null?void 0:x.DeliveryMedium,destination:x==null?void 0:x.Destination,attributeName:x==null?void 0:x.AttributeName}},userId:g}}const Ao=e=>k($,V("ForgotPassword"),W(),{...z,...e});async function Fo(e){var m,p;const{username:t}=e;R(!!t,I.EmptyResetPasswordUsername);const n=(m=b.getConfig().Auth)==null?void 0:m.Cognito;F(n);const{userPoolClientId:o,userPoolId:s,userPoolEndpoint:i}=n,r=(p=e.options)==null?void 0:p.clientMetadata,c=U({username:t,userPoolId:s,userPoolClientId:o}),u=(await Ao({endpointResolver:v({endpointOverride:i})})({region:N(s),userAgentValue:B(q.ResetPassword)},{Username:t,ClientMetadata:r,ClientId:o,UserContextData:c})).CodeDeliveryDetails;return{isPasswordReset:!1,nextStep:{resetPasswordStep:"CONFIRM_RESET_PASSWORD_WITH_CODE",codeDeliveryDetails:{deliveryMedium:u==null?void 0:u.DeliveryMedium,destination:u==null?void 0:u.Destination,attributeName:u==null?void 0:u.AttributeName}}}}const bo=e=>k($,V("ConfirmForgotPassword"),W(),{...z,...e});async function Uo(e){var m,p;const t=(m=b.getConfig().Auth)==null?void 0:m.Cognito;F(t);const{userPoolClientId:n,userPoolId:o,userPoolEndpoint:s}=t,{username:i,newPassword:r}=e;R(!!i,I.EmptyConfirmResetPasswordUsername),R(!!r,I.EmptyConfirmResetPasswordNewPassword);const c=e.confirmationCode;R(!!c,I.EmptyConfirmResetPasswordConfirmationCode);const a=(p=e.options)==null?void 0:p.clientMetadata,d=U({username:i,userPoolId:o,userPoolClientId:n});await bo({endpointResolver:v({endpointOverride:s})})({region:N(t.userPoolId),userAgentValue:B(q.ConfirmResetPassword)},{Username:i,ConfirmationCode:c,Password:r,ClientMetadata:a,ClientId:t.userPoolClientId,UserContextData:d})}const Mo=e=>k($,V("ResendConfirmationCode"),W(),{...z,...e});async function _o(e){var h,f;const{username:t}=e;R(!!t,I.EmptySignUpUsername);const n=(h=b.getConfig().Auth)==null?void 0:h.Cognito;F(n);const{userPoolClientId:o,userPoolId:s,userPoolEndpoint:i}=n,r=(f=e.options)==null?void 0:f.clientMetadata,c=U({username:t,userPoolId:s,userPoolClientId:o}),a=Mo({endpointResolver:v({endpointOverride:i})}),{CodeDeliveryDetails:d}=await a({region:N(n.userPoolId),userAgentValue:B(q.ResendSignUpCode)},{Username:t,ClientMetadata:r,ClientId:n.userPoolClientId,UserContextData:c}),{DeliveryMedium:u,AttributeName:m,Destination:p}={...d};return{destination:p,deliveryMedium:u,attributeName:m||void 0}}const Do=e=>k($,V("ConfirmSignUp"),W(),{...z,...e});async function Lo(e){var m;const{username:t,confirmationCode:n,options:o}=e,s=(m=b.getConfig().Auth)==null?void 0:m.Cognito;F(s);const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=s,a=o==null?void 0:o.clientMetadata;R(!!t,I.EmptyConfirmSignUpUsername),R(!!n,I.EmptyConfirmSignUpCode);const d=U({username:t,userPoolId:i,userPoolClientId:r});return await Do({endpointResolver:v({endpointOverride:c})})({region:N(s.userPoolId),userAgentValue:B(q.ConfirmSignUp)},{Username:t,ConfirmationCode:n,ClientMetadata:a,ForceAliasCreation:o==null?void 0:o.forceAliasCreation,ClientId:s.userPoolClientId,UserContextData:d}),new Promise((p,h)=>{try{const f={isSignUpComplete:!0,nextStep:{signUpStep:"DONE"}};if(!ee()||!vo(t)){p(f);return}const g=le.listen("auth-internal",({payload:x})=>{switch(x.event){case"autoSignIn":p({isSignUpComplete:!0,nextStep:{signUpStep:"COMPLETE_AUTO_SIGN_IN"}}),Ve(!1),g()}});le.dispatch("auth-internal",{event:"confirmSignUp",data:f})}catch(f){h(f)}})}const Oo=async({username:e,password:t})=>{await wo({username:e,password:t})},qo=async({username:e,password:t,firstName:n,lastName:o})=>{await To({username:e,password:t,options:{userAttributes:{email:e,given_name:n,family_name:o}}})},Bo=async({username:e,confirmationCode:t})=>{await Lo({username:e,confirmationCode:t})},be=async({username:e})=>{await _o({username:e})},Ot=async({username:e})=>{await Fo({username:e})},jo=async({username:e,confirmationCode:t,newPassword:n})=>{await Uo({username:e,confirmationCode:t,newPassword:n})},Ho=y.object({code:y.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ts(){const e=te(),n=Nt().get("email"),{countdown:o,counting:s,startCountdown:i}=Pt(60),r={code:"",email:n||""},c=ne({resolver:se(Ho),defaultValues:r}),{watch:a,handleSubmit:d,formState:{isSubmitting:u}}=c,m=a(),p=d(async x=>{try{await Bo({username:x.email,confirmationCode:x.code}),e.push(D.auth.amplify.signIn)}catch(S){console.error(S)}}),h=ge.useCallback(async()=>{try{i(),await(be==null?void 0:be({username:m.email}))}catch(x){console.error(x)}},[i,m.email]),f=l.jsxs(l.Fragment,{children:[l.jsx(Qt,{sx:{mx:"auto"}}),l.jsxs(C,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(T,{variant:"h5",children:"Please check your email!"}),l.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:`We've emailed a 6-digit confirmation code. 
Please enter the code in the box below to verify your email.`})]})]}),g=l.jsxs(C,{spacing:3,children:[l.jsx(P.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),l.jsx(P.Code,{name:"code"}),l.jsx(ie,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:u,loadingIndicator:"Verify...",children:"Verify"}),l.jsxs(T,{variant:"body2",sx:{mx:"auto"},children:["Dont have a code? ",l.jsxs(_,{variant:"subtitle2",onClick:h,sx:{cursor:"pointer",...s&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",s&&`(${o}s)`]})]}),l.jsxs(_,{component:Z,href:D.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(K,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[f,l.jsx(oe,{methods:c,onSubmit:p,children:g})]})}const ko=y.object({email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function ns(){const e=te(),t=Le(),[n,o]=ge.useState(""),{checkUserSession:s}=Jt(),i={email:"",password:""},r=ne({resolver:se(ko),defaultValues:i}),{handleSubmit:c,formState:{isSubmitting:a}}=r,d=c(async p=>{try{await Oo({username:p.email,password:p.password}),await(s==null?void 0:s()),e.refresh()}catch(h){console.error(h),o(h instanceof Error?h.message:h)}}),u=l.jsxs(C,{spacing:1.5,sx:{mb:5},children:[l.jsx(T,{variant:"h5",children:"Sign in to your account"}),l.jsxs(C,{direction:"row",spacing:.5,children:[l.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Don't have an account?"}),l.jsx(_,{component:Z,href:D.auth.amplify.signUp,variant:"subtitle2",children:"Get started"})]})]}),m=l.jsxs(C,{spacing:3,children:[l.jsx(P.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),l.jsxs(C,{spacing:1.5,children:[l.jsx(_,{component:Z,href:D.auth.amplify.resetPassword,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),l.jsx(P.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:t.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(pe,{position:"end",children:l.jsx(ue,{onClick:t.onToggle,edge:"end",children:l.jsx(K,{icon:t.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),l.jsx(ie,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:a,loadingIndicator:"Sign in...",children:"Sign in"})]});return l.jsxs(l.Fragment,{children:[u,!!n&&l.jsx(vt,{severity:"error",sx:{mb:3},children:n}),l.jsx(oe,{methods:r,onSubmit:d,children:m})]})}const zo=y.object({firstName:y.string().min(1,{message:"First name is required!"}),lastName:y.string().min(1,{message:"Last name is required!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"})});function os(){const[e,t]=ge.useState(""),n=te(),o=Le(),s={firstName:"",lastName:"",email:"",password:""},i=ne({resolver:se(zo),defaultValues:s}),{handleSubmit:r,formState:{isSubmitting:c}}=i,a=r(async p=>{try{await qo({username:p.email,password:p.password,firstName:p.firstName,lastName:p.lastName});const h=new URLSearchParams({email:p.email}).toString(),f=`${D.auth.amplify.verify}?${h}`;n.push(f)}catch(h){console.error(h),t(h instanceof Error?h.message:h)}}),d=l.jsxs(C,{spacing:1.5,sx:{mb:5},children:[l.jsx(T,{variant:"h5",children:"Get started absolutely free"}),l.jsxs(C,{direction:"row",spacing:.5,children:[l.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Already have an account?"}),l.jsx(_,{component:Z,href:D.auth.amplify.signIn,variant:"subtitle2",children:"Sign in"})]})]}),u=l.jsxs(C,{spacing:3,children:[l.jsxs(C,{direction:{xs:"column",sm:"row"},spacing:2,children:[l.jsx(P.Text,{name:"firstName",label:"First name",InputLabelProps:{shrink:!0}}),l.jsx(P.Text,{name:"lastName",label:"Last name",InputLabelProps:{shrink:!0}})]}),l.jsx(P.Text,{name:"email",label:"Email address",InputLabelProps:{shrink:!0}}),l.jsx(P.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(pe,{position:"end",children:l.jsx(ue,{onClick:o.onToggle,edge:"end",children:l.jsx(K,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(ie,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:c,loadingIndicator:"Create account...",children:"Create account"})]}),m=l.jsxs(T,{component:"div",sx:{mt:3,textAlign:"center",typography:"caption",color:"text.secondary"},children:["By signing up, I agree to ",l.jsx(_,{underline:"always",color:"text.primary",children:"Terms of service"})," and ",l.jsx(_,{underline:"always",color:"text.primary",children:"Privacy policy"}),"."]});return l.jsxs(l.Fragment,{children:[d,!!e&&l.jsx(vt,{severity:"error",sx:{mb:3},children:e}),l.jsx(oe,{methods:i,onSubmit:a,children:u}),m]})}const Wo=y.object({email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"})});function ss(){const e=te(),t={email:""},n=ne({resolver:se(Wo),defaultValues:t}),{handleSubmit:o,formState:{isSubmitting:s}}=n,i=o(async a=>{try{await Ot({username:a.email});const d=new URLSearchParams({email:a.email}).toString(),u=`${D.auth.amplify.updatePassword}?${d}`;e.push(u)}catch(d){console.error(d)}}),r=l.jsxs(l.Fragment,{children:[l.jsx(Gt,{sx:{mx:"auto"}}),l.jsxs(C,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(T,{variant:"h5",children:"Forgot your password?"}),l.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:"Please enter the email address associated with your account and we'll email you a link to reset your password."})]})]}),c=l.jsxs(C,{spacing:3,children:[l.jsx(P.Text,{autoFocus:!0,name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0}}),l.jsx(ie,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:s,loadingIndicator:"Send request...",children:"Send request"}),l.jsxs(_,{component:Z,href:D.auth.amplify.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(K,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[r,l.jsx(oe,{methods:n,onSubmit:i,children:c})]})}const Vo=y.object({code:y.string().min(1,{message:"Code is required!"}).min(6,{message:"Code must be at least 6 characters!"}),email:y.string().min(1,{message:"Email is required!"}).email({message:"Email must be a valid email address!"}),password:y.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}),confirmPassword:y.string().min(1,{message:"Confirm password is required!"})}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match!",path:["confirmPassword"]});function is(){const e=te(),n=Nt().get("email"),o=Le(),{countdown:s,counting:i,startCountdown:r}=Pt(60),c={code:"",email:n||"",password:"",confirmPassword:""},a=ne({resolver:se(Vo),defaultValues:c}),{watch:d,handleSubmit:u,formState:{isSubmitting:m}}=a,p=d(),h=u(async S=>{try{await jo({username:S.email,confirmationCode:S.code,newPassword:S.password}),e.push(D.auth.amplify.signIn)}catch(L){console.error(L)}}),f=ge.useCallback(async()=>{try{r(),await Ot({username:p.email})}catch(S){console.error(S)}},[r,p.email]),g=l.jsxs(l.Fragment,{children:[l.jsx(en,{sx:{mx:"auto"}}),l.jsxs(C,{spacing:1,sx:{mt:3,mb:5,textAlign:"center",whiteSpace:"pre-line"},children:[l.jsx(T,{variant:"h5",children:"Request sent successfully!"}),l.jsx(T,{variant:"body2",sx:{color:"text.secondary"},children:`We've sent a 6-digit confirmation email to your email. 
Please enter the code in below box to verify your email.`})]})]}),x=l.jsxs(C,{spacing:3,children:[l.jsx(P.Text,{name:"email",label:"Email address",placeholder:"example@gmail.com",InputLabelProps:{shrink:!0},disabled:!0}),l.jsx(P.Code,{name:"code"}),l.jsx(P.Text,{name:"password",label:"Password",placeholder:"6+ characters",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(pe,{position:"end",children:l.jsx(ue,{onClick:o.onToggle,edge:"end",children:l.jsx(K,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(P.Text,{name:"confirmPassword",label:"Confirm new password",type:o.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:l.jsx(pe,{position:"end",children:l.jsx(ue,{onClick:o.onToggle,edge:"end",children:l.jsx(K,{icon:o.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),l.jsx(ie,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:m,loadingIndicator:"Update password...",children:"Update password"}),l.jsxs(T,{variant:"body2",sx:{mx:"auto"},children:["Dont have a code? ",l.jsxs(_,{variant:"subtitle2",onClick:f,sx:{cursor:"pointer",...i&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend code ",i&&`(${s}s)`]})]}),l.jsxs(_,{component:Z,href:D.authDemo.split.signIn,color:"inherit",variant:"subtitle2",sx:{gap:.5,alignSelf:"center",alignItems:"center",display:"inline-flex"},children:[l.jsx(K,{width:16,icon:"eva:arrow-ios-back-fill"}),"Return to sign in"]})]});return l.jsxs(l.Fragment,{children:[g,l.jsx(oe,{methods:a,onSubmit:h,children:x})]})}export{ns as A,os as a,ts as b,is as c,ss as d};
