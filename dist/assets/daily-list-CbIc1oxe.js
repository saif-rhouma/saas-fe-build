import{j as e,r as u,bO as R,S as j,dE as C,er as S,ed as P,p as h,aH as B,B as E,es as O,eh as F,H as Y,C as A,dO as L,dM as k}from"./index-BjIn7_qX.js";import{u as w,E as I}from"./error-block-DgIB22LQ.js";import{C as H}from"./custom-breadcrumbs-BvfCbkJS.js";import{u as M,g as N,T as V,a as W,e as q}from"./table-selected-action-n7GKjEz8.js";import{T as z}from"./table-no-data-D4XesE38.js";import{T as _,a as $,b as G,c as K}from"./table-head-custom-BUj35xa1.js";import{T as D}from"./TableCell-CN8hPv6L.js";import{D as Q}from"./DatePicker-CbfV6klG.js";import{b as y}from"./format-number-CVePc8Zq.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-B4RwwnIi.js";import"./empty-content-DUH3kGlt.js";import"./index-DhoXhWEB.js";import"./FormControl-7ae63LEX.js";import"./utils-DoM3o7-Q.js";import"./InputLabel-CFOghGNi.js";import"./formControlState-Dq1zat_P.js";import"./FormLabel-CGBfd-SD.js";import"./FormHelperText-CzQPg626.js";import"./visuallyHidden-Dan1xhjv.js";import"./TextField-DpiQLRVb.js";import"./Select-DuF5QBaf.js";import"./Menu-BwYh9-WP.js";import"./InputBase-B1W2ZC-C.js";import"./InputAdornment-DyfHBPVt.js";import"./DialogContent-Y7gFy98Q.js";import"./ListItem-Dqffwavq.js";import"./Chip-Csudtta_.js";const J=({row:t,selected:a})=>{const l=e.jsxs(_,{hover:!0,selected:a,children:[e.jsx(D,{children:t==null?void 0:t.label}),e.jsx(D,{children:t==null?void 0:t.value})]});return e.jsx(e.Fragment,{children:l})};function U({filters:t,onResetPage:a}){const l=u.useCallback(d=>{const n=R(d).add(1,"day").format("YYYY-MM-DD");a(),t.setState({startDate:d,endDate:n})},[t,a]);return e.jsx(j,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx(Q,{label:"Date",format:"DD/MM/YYYY",value:t.state.startDate,onChange:l})})}const X=[{id:"reminderId",label:"Particular"},{id:"date",label:"value",width:280}],Z=[{label:"Orders",value:0},{label:"No. of Orders Delivered",value:0},{label:"Total Sales",value:0},{label:"Total Payment",value:0}],ee=({orders:t})=>{const a=M({defaultOrderBy:"orderNumber"}),[l,d]=u.useState(t),[n,p]=u.useState(Z),o=C({name:"",status:"all",startDate:null,endDate:null}),m=S(o.state.startDate,o.state.endDate),s=ae({inputData:l,comparator:N(a.order,a.orderBy),filters:o.state,dateError:m}),i=u.useCallback(r=>{const x=r.filter(c=>c.status==="Delivered").length,T=y(r.reduce((c,f)=>c+f.totalOrderAmount,0)),v=y(r.reduce((c,f)=>c+f.orderPaymentAmount,0));return{orders:r.length,nbDelivered:x,totalSales:T,totalPayments:v}},[]);u.useEffect(()=>{const r=i(s),x=[{label:"Orders",value:r.orders},{label:"No. of Orders Delivered",value:r.nbDelivered},{label:"Total Sales",value:r.totalSales},{label:"Total Payment",value:r.totalPayments}];p(x)},[s.length,a,l]);const b=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,g=!s.length&&b||!s.length;return e.jsx(P,{maxWidth:"xl",children:e.jsxs(j,{spacing:3,children:[e.jsx(H,{links:[{name:"Dashboard",href:h.dashboard.root},{name:"Reports",href:h.dashboard.reports.root},{name:"Daily Report",href:h.dashboard.reports.daily}]}),e.jsxs(B,{children:[e.jsx(U,{filters:o,onResetPage:a.onResetPage,dateError:m}),e.jsxs(E,{sx:{position:"relative"},children:[e.jsx(V,{dense:a.dense,numSelected:a.selected.length,rowCount:s.length}),e.jsxs($,{size:a.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(G,{order:a.order,orderBy:a.orderBy,headLabel:X,rowCount:s.length}),e.jsxs(K,{children:[n.map(r=>e.jsx(J,{row:r,selected:a.selected.includes(r.id)},r.id)),e.jsx(W,{height:a.dense?56:76,emptyRows:q(a.page,a.rowsPerPage,s.length)}),e.jsx(z,{notFound:g})]})]})]})]})]})})},te=ee;function ae({inputData:t,comparator:a,filters:l,dateError:d}){const{status:n,startDate:p,endDate:o}=l,m=t.map((s,i)=>[s,i]);return m.sort((s,i)=>{const b=a(s[0],i[0]);return b!==0?b:s[1]-i[1]}),t=m.map(s=>s[0]),n!=="all"&&(t=t.filter(s=>s.status===n)),d||p&&o&&(t=t.filter(s=>O(s.orderDate,p,o))),t}const se={title:`Reports list | Dashboard - ${A.site.name}`};function ke(){const t=w({queryKey:["orders"],queryFn:async()=>{const{data:a}=await L.get(k.order.list);return a}});return t.isPending||t.isLoading?e.jsx(F,{}):t.isError?e.jsx(I,{route:h.dashboard.reports.root}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{children:e.jsxs("title",{children:[" ",se.title]})}),e.jsx(te,{orders:t.data})]})}export{ke as default};
