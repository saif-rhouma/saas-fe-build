import{w as C,bG as L,j as e,S as y,A as N,C as T,B as R,du as w,y as I,I as h,dz as q,bI as H,bJ as P,e as S,r as x,o as O,dC as G,eq as M,p as g,dL as z,eb as K,G as b,R as Q,aF as V,dw as J,dB as W,er as U,dM as D,dK as v,dN as _,ef as $,H as X}from"./index-DLwkls4m.js";import{u as Y,E as Z}from"./error-block-C30yYsJ6.js";import"./product-review-new-form-BoyN2MXi.js";import"./index-WotUfBHc.js";import"./image-DLBdKQMi.js";import"./color-preview-D4p-F5Yd.js";import{u as ee}from"./useMutation-Xh_zmf_Z.js";import{C as te}from"./custom-breadcrumbs-RrbSlijf.js";import{u as se,g as oe,r as re,T as ae,a as ne,e as ie}from"./table-selected-action-Cl0zAfF3.js";import{T as le}from"./table-no-data-CB8dFdIo.js";import{T as de,a as ce,b as me,c as pe}from"./table-head-custom-CxYlI1wv.js";import{T as ue}from"./table-pagination-custom-I1sFEO4C.js";import{b as he}from"./format-number-DeKkEUCb.js";import{C as xe}from"./confirm-dialog-B-zGEUbG.js";import{T as u}from"./TableCell-BbkjnoOj.js";import{T as ge}from"./TextField-B1Cg5HmH.js";import{I as je}from"./InputAdornment-MgApCcj1.js";import{P as fe}from"./product-table-filters-result-DcKinZMp.js";import"./form-provider-BLqJfrAn.js";import"./editor-DRhW7keS.js";import"./incrementer-button-BDjv6AEm.js";import"./carousel-progress-bar-wI_dYnmZ.js";import"./html-to-markdown-Blv1dW2a.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./fields-n6p14urN.js";import"./FormHelperText-BVmW-5Ni.js";import"./formControlState-Dq1zat_P.js";import"./Rating-bQK7uTzQ.js";import"./visuallyHidden-Dan1xhjv.js";import"./Slider-AaUDBp7L.js";import"./FormControl-SJOyIv6-.js";import"./utils-DoM3o7-Q.js";import"./FormLabel-DbiGIO3x.js";import"./RadioGroup-C87ujctp.js";import"./FormGroup-jgVRN42y.js";import"./FormControlLabel-7I2uQbxz.js";import"./Autocomplete-Dq5HtQfc.js";import"./Select-CL6BPU1z.js";import"./Menu-D_Q_wpzJ.js";import"./InputBase-DNJV1MQo.js";import"./Chip-BuK2Jq4O.js";import"./country-select-lXVBt7wi.js";import"./countries-DSLisFCy.js";import"./InputLabel-fkQY0vwD.js";import"./Checkbox-ByD5WW94.js";import"./upload-avatar-40PF6jC-.js";import"./index-EcyC--J6.js";import"./DatePicker-CStigLvN.js";import"./DialogContent-C4fMf3p5.js";import"./ListItem-H9AMOysY.js";import"./MobileDateTimePicker-CKy8G9Bw.js";import"./product-Item-button-DHx8vrRh.js";import"./DialogTitle-CwWzRiyw.js";import"./LoadingButton-D96dQ2Qa.js";import"./CircularProgress-PSuA1f_D.js";import"./AccordionSummary-Zut3bb8r.js";import"./empty-content-G2WqpuZZ.js";import"./TablePagination-3k_k7Jb5.js";import"./LastPage-CCIWXV8U.js";import"./filters-result-CVVYvX3A.js";import"./index-C1NEse06.js";const be=({row:t,selected:s,onDeleteRow:p,onEditRow:d})=>{var c;const l=C(),r=L(),a=e.jsxs(de,{hover:!0,selected:s,children:[e.jsx(u,{children:t==null?void 0:t.id}),e.jsx(u,{children:e.jsxs(y,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(N,{alt:t==null?void 0:t.name,src:T.site.serverFileHost+(t==null?void 0:t.image)}),e.jsx(R,{component:"span",children:t==null?void 0:t.name})]})}),e.jsx(u,{children:he(t==null?void 0:t.price)}),e.jsxs(u,{align:"center",children:[" ",((c=t==null?void 0:t.stock)==null?void 0:c.quantity)||"0"," "]}),e.jsx(u,{children:e.jsx(w,{variant:"soft",color:t.isActive===!0&&"success"||t.isActive===!1&&"error"||"default",children:t!=null&&t.isActive?"ACTIVE":"INACTIVE"})}),e.jsx(u,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:e.jsx(I,{color:r.open?"inherit":"default",onClick:r.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})})]});return e.jsxs(e.Fragment,{children:[a,e.jsx(q,{open:r.open,anchorEl:r.anchorEl,onClose:r.onClose,slotProps:{arrow:{placement:"right-top"}},children:e.jsxs(H,{children:[e.jsxs(P,{onClick:()=>{d(t.id),r.onClose()},children:[e.jsx(h,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(P,{onClick:()=>{l.onTrue(),r.onClose()},sx:{color:"error.main"},children:[e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(xe,{open:l.value,onClose:l.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(S,{variant:"contained",color:"error",onClick:p,children:"Delete"})})]})};function Pe({filters:t,onResetPage:s,options:p}){const d=x.useCallback(l=>{s(),t.setState({name:l.target.value})},[t,s]);return e.jsx(y,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx(ge,{sx:{width:420},value:t.state.name,onChange:d,placeholder:"Search by Product Name or Ref",InputProps:{startAdornment:e.jsx(je,{position:"start",children:e.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const Ce=[{id:"productId",label:"No.",width:80},{id:"productName",label:"Product Name"},{id:"productPrice",label:"Product Price",width:200},{id:"stock",label:"Stock",align:"center"},{id:"status",label:"Status",width:100},{id:"",width:88}];function ye({products:t}){const s=se({defaultOrderBy:"planId"}),p=C(),d=O(),[l,r]=x.useState(t),a=G({name:"",status:"all",startDate:null,endDate:null});x.useEffect(()=>{r(t)},[t]);const c=M(a.state.startDate,a.state.endDate),i=Te({inputData:l,comparator:oe(s.order,s.orderBy),filters:a.state,dateError:c}),n=re(i,s.page,s.rowsPerPage),m=!!a.state.name||a.state.status!=="all"||!!a.state.startDate&&!!a.state.endDate,j=!i.length&&m||!i.length,A=x.useCallback(o=>{B(o)},[n.length,s,l]),E=x.useCallback(o=>{d.push(g.dashboard.product.edit(o))},[d]),k=z(),{mutate:B}=ee({mutationFn:o=>D.delete(v.products.delete+o),onSuccess:async o=>{const f=l.filter(F=>F.id!==o);_.success("Delete success!"),r(f),s.onUpdatePageDeleteRow(n.length)},onSettled:async()=>{await k.invalidateQueries({queryKey:["products"]})},onError:()=>{}});return e.jsx(K,{maxWidth:"xl",children:e.jsxs(b,{container:!0,spacing:3,children:[e.jsx(b,{xs:12,md:12,children:e.jsx(te,{links:[{name:"Dashboard",href:g.dashboard.root},{name:"Product",href:g.dashboard.plan.root},{name:"List"}],action:e.jsx(S,{component:Q,href:g.dashboard.product.new,variant:"contained",startIcon:e.jsx(h,{icon:"mingcute:add-line"}),children:"Add New Product"})})}),e.jsx(b,{xs:12,md:12,children:e.jsxs(V,{children:[e.jsx(Pe,{filters:a,onResetPage:s.onResetPage,dateError:c}),m&&e.jsx(fe,{filters:a,totalResults:i.length,onResetPage:s.onResetPage,sx:{p:2.5,pt:0}}),e.jsxs(R,{sx:{position:"relative"},children:[e.jsx(ae,{dense:s.dense,numSelected:s.selected.length,rowCount:i.length,onSelectAllRows:o=>s.onSelectAllRows(o,i.map(f=>f.id)),action:e.jsx(J,{title:"Delete",children:e.jsx(I,{color:"primary",onClick:p.onTrue,children:e.jsx(h,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(W,{sx:{minHeight:444},children:e.jsxs(ce,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(me,{order:s.order,orderBy:s.orderBy,headLabel:Ce,rowCount:i.length,numSelected:s.selected.length,onSort:s.onSort}),e.jsxs(pe,{children:[i.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(o=>e.jsx(be,{row:o,selected:s.selected.includes(o.id),onEditRow:()=>E(o.id),onDeleteRow:()=>A(o.id)},o.id)),e.jsx(ne,{height:s.dense?56:76,emptyRows:ie(s.page,s.rowsPerPage,i.length)}),e.jsx(le,{notFound:j})]})]})})]}),e.jsx(ue,{page:s.page,dense:s.dense,count:i.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onChangeDense:s.onChangeDense,onRowsPerPageChange:s.onChangeRowsPerPage})]})})]})})}function Te({inputData:t,comparator:s,filters:p,dateError:d}){const{status:l,name:r,startDate:a,endDate:c}=p,i=t.map((n,m)=>[n,m]);return i.sort((n,m)=>{const j=s(n[0],m[0]);return j!==0?j:n[1]-m[1]}),t=i.map(n=>n[0]),r&&(t=t.filter(n=>n.id.toString().toLowerCase().indexOf(r.toLowerCase())!==-1||n.name.toLowerCase().indexOf(r.toLowerCase())!==-1)),d||a&&c&&(t=t.filter(n=>U(n.createdAt,a,c))),t}const Re={title:`Product list | Dashboard - ${T.site.name}`};function Lt(){const t=Y({queryKey:["products"],queryFn:async()=>{const{data:s}=await D.get(v.products.list);return s}});return t.isPending||t.isLoading?e.jsx($,{}):t.isError?e.jsx(Z,{route:g.dashboard.products.root}):e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsxs("title",{children:[" ",Re.title]})}),e.jsx(ye,{products:t.data})]})}export{Lt as default};
