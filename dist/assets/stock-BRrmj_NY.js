import{j as e,S as g,A as C,C as f,B as j,r as p,I as b,o as T,w as y,dE as S,er as I,p as h,ed as k,aH as D,dy as B,y as R,dD as w,es as A,eh as E,H as F,dO as L,dM as v}from"./index-DxrsDIwY.js";import{u as H,E as N}from"./error-block-Cg6RpAZK.js";import{C as O}from"./custom-breadcrumbs-Dd3lNCwD.js";import{u as q,g as z,r as W,T as G,a as K,e as M}from"./table-selected-action-DOkqk6zb.js";import{T as Q}from"./table-no-data-DzXXEfeL.js";import{T as V,a as _,b as $,c as J}from"./table-head-custom-w-4MLJlt.js";import{T as U}from"./table-pagination-custom-BDQuCrzU.js";import{T as x}from"./TableCell-CJNt5t20.js";import{T as X}from"./TextField-C2VP4uls.js";import{I as Y}from"./InputAdornment-D2FMqto9.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./Checkbox-ylG2wecL.js";import"./empty-content-Der9frKm.js";import"./TablePagination-Bol3AgoD.js";import"./LastPage-Ct_4tubK.js";import"./Select-eQVewVvt.js";import"./Menu-C6l2dIf8.js";import"./utils-DoM3o7-Q.js";import"./formControlState-Dq1zat_P.js";import"./InputBase-B9Lf9cs-.js";import"./FormControlLabel-DKxiCaQc.js";import"./FormControl-CC-u2HkW.js";import"./InputLabel-CQVMsmZY.js";import"./FormLabel-EgLeF9WB.js";import"./FormHelperText-DMsDqsw2.js";const Z=({row:s,selected:t})=>e.jsxs(V,{hover:!0,selected:t,children:[e.jsx(x,{children:s==null?void 0:s.id}),e.jsx(x,{children:e.jsxs(g,{spacing:2,direction:"row",alignItems:"center",children:[e.jsx(C,{alt:s==null?void 0:s.name,src:f.site.serverFileHost+(s==null?void 0:s.image)}),e.jsx(j,{component:"span",children:s==null?void 0:s.name})]})}),e.jsx(x,{children:s.quantity})]});function ee({filters:s,onResetPage:t,options:i}){const l=p.useCallback(u=>{t(),s.setState({name:u.target.value})},[s,t]);return e.jsx(g,{spacing:2,justifyContent:{xs:"space-between"},alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5},children:e.jsx(X,{sx:{width:420},value:s.state.name,onChange:l,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(b,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})})}const te=[{id:"stockId",label:"No.",width:60},{id:"productName",label:"Product Name"},{id:"stock",label:"In Stock",width:140}];function se({stocks:s}){const t=q({defaultOrderBy:"planId"}),i=T(),l=y(),[u,c]=p.useState(s),o=S({name:"",status:"all",startDate:null,endDate:null});p.useEffect(()=>{c(s)},[s]);const m=I(o.state.startDate,o.state.endDate),r=ae({inputData:u,comparator:z(t.order,t.orderBy),filters:o.state,dateError:m});W(r,t.page,t.rowsPerPage);const a=!!o.state.name||o.state.status!=="all"||!!o.state.startDate&&!!o.state.endDate,d=!r.length&&a||!r.length;return p.useCallback(n=>{i.push(h.dashboard.order.details(n))},[i]),e.jsx(k,{maxWidth:"xl",children:e.jsxs(g,{spacing:3,children:[e.jsx(O,{links:[{name:"Dashboard",href:h.dashboard.root},{name:"Products",href:h.dashboard.product.root},{name:"Product Stock"}]}),e.jsxs(D,{children:[e.jsx(ee,{filters:o,onResetPage:t.onResetPage,dateError:m}),e.jsxs(j,{sx:{position:"relative"},children:[e.jsx(G,{dense:t.dense,numSelected:t.selected.length,rowCount:r.length,onSelectAllRows:n=>t.onSelectAllRows(n,r.map(P=>P.id)),action:e.jsx(B,{title:"Delete",children:e.jsx(R,{color:"primary",onClick:l.onTrue,children:e.jsx(b,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(w,{sx:{minHeight:200},children:e.jsxs(_,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx($,{order:t.order,orderBy:t.orderBy,headLabel:te,rowCount:r.length}),r.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(n=>e.jsx(Z,{row:n,selected:t.selected.includes(n.id)},n.id)),e.jsxs(J,{children:[e.jsx(K,{height:t.dense?56:76,emptyRows:M(t.page,t.rowsPerPage,r.length)}),e.jsx(Q,{notFound:d})]})]})})]}),e.jsx(U,{page:t.page,dense:t.dense,count:r.length,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onChangeDense:t.onChangeDense,onRowsPerPageChange:t.onChangeRowsPerPage})]})]})})}function ae({inputData:s,comparator:t,filters:i,dateError:l}){const{status:u,name:c,startDate:o,endDate:m}=i,r=s.map((a,d)=>[a,d]);return r.sort((a,d)=>{const n=t(a[0],d[0]);return n!==0?n:a[1]-d[1]}),s=r.map(a=>a[0]),c&&(s=s.filter(a=>a.id.toString().toLowerCase().indexOf(c.toLowerCase())!==-1||a.name.toLowerCase().indexOf(c.toLowerCase())!==-1)),l||o&&m&&(s=s.filter(a=>A(a.createdAt,o,m))),s}const re={title:`Product Stock | Dashboard - ${f.site.name}`};function Ee(){const s=H({queryKey:["products-stock"],queryFn:async()=>{const{data:t}=await L.get(v.products.stock);return t}});return s.isPending||s.isLoading?e.jsx(E,{}):s.isError?e.jsx(N,{route:h.dashboard.products.root}):e.jsxs(e.Fragment,{children:[e.jsx(F,{children:e.jsxs("title",{children:[" ",re.title]})}),e.jsx(se,{stocks:s.data})]})}export{Ee as default};
