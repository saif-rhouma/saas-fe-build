import{j as s,aH as h,S as o,B as r,aN as l,dw as y,dD as j,r as f,dN as g,ed as b,p as d,e as P,I as D,G as n,dO as u,dM as x,dP as w,eh as C,H as S,C as v}from"./index-DxrsDIwY.js";import{u as B,E as I}from"./error-block-Cg6RpAZK.js";import{u as k}from"./use-params-DfaTvlxU.js";import{u as q}from"./useMutation-f5nVFG-s.js";import{C as E}from"./custom-breadcrumbs-Dd3lNCwD.js";import{P as L}from"./plan-product-table-e8kVLido.js";import{C as T}from"./CardHeader-C4RbkosU.js";import"./utils-km2FGkQ4.js";import"./bounce-BSK3KHpz.js";import"./transition-BJzcwH5q.js";import"./table-head-custom-w-4MLJlt.js";import"./TableCell-CJNt5t20.js";import"./Checkbox-ylG2wecL.js";import"./incrementer-button-BtQ5_PmY.js";function H({plan:t,products:i}){return s.jsxs(h,{children:[s.jsx(T,{title:"Details"}),s.jsxs(o,{direction:"row",justifyContent:"space-between",sx:{p:3,typography:"body2"},children:[s.jsxs(r,{flexDirection:"column",sx:{display:"flex",width:"100%",p:1},children:[s.jsx(o,{direction:"row",sx:{typography:"subtitle2",marginBottom:1},children:s.jsx("div",{children:"Plan Details"})}),s.jsxs(r,{sx:{color:"text.secondary"},children:["Plan ID: #PLN-",t==null?void 0:t.id]}),s.jsxs(r,{sx:{color:"text.secondary"},children:["Plan Date: ",l(t==null?void 0:t.planDate)]})]}),s.jsxs(r,{flexDirection:"column",gap:.5,sx:{display:"flex",width:"100%",p:1,borderRight:e=>`dashed 2px ${e.vars.palette.background.neutral}`,borderLeft:e=>`dashed 2px ${e.vars.palette.background.neutral}`},children:[s.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",sx:{typography:"subtitle2",width:"100%",marginBottom:1},children:s.jsx("div",{children:"Laundry Saas POS"})}),s.jsxs(r,{sx:{color:"text.secondary"},children:["Quantity : ",t==null?void 0:t.quantity]})]}),s.jsxs(r,{flexDirection:"column",alignItems:"center",sx:{p:1,display:"flex",width:"100%"},children:[s.jsx(o,{display:"flex",alignItems:"center",gap:1,sx:{typography:"subtitle2",width:"100%",marginBottom:1},children:s.jsx("div",{children:"Plan Status"})}),s.jsx(y,{variant:"soft",color:"warning",children:t==null?void 0:t.status})]})]}),s.jsx(j,{children:s.jsx(r,{fullWidth:!0,alignItems:"center",sx:{p:3,borderBottom:e=>`dashed 2px ${e.vars.palette.background.neutral}`},children:s.jsx(L,{products:t==null?void 0:t.product,quantity:t==null?void 0:t.quantity})})})]})}function Q({plan:t}){const[i,e]=f.useState(!1),c=g(),{mutate:m}=q({mutationFn:a=>u.post(x.plan.transferToStock+a),onSuccess:async()=>{w.success("Delete success!"),e(()=>!0)},onSettled:async()=>{const{id:a}=t;await c.invalidateQueries({queryKey:["plans"]}),await c.invalidateQueries({queryKey:["plan",a]})},onError:()=>{}});return s.jsxs(b,{children:[s.jsx(E,{links:[{name:"Dashboard",href:d.dashboard.root},{name:"Plan",href:d.dashboard.plan.root},{name:"Plan Details"}],sx:{mb:{xs:3,md:5}},action:!(t!=null&&t.isTransferred)&&(t==null?void 0:t.status)==="Ready"&&s.jsx(P,{onClick:async()=>{m(t.id)},variant:"contained",startIcon:s.jsx(D,{icon:"solar:home-add-bold"}),children:"Transfer To Stock"})}),s.jsx(n,{container:!0,spacing:3,children:s.jsx(n,{xs:12,md:12,children:s.jsx(o,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:s.jsx(H,{items:t==null?void 0:t.items,plan:t,taxes:t==null?void 0:t.taxes,shipping:t==null?void 0:t.shipping,discount:t==null?void 0:t.discount,subtotal:t==null?void 0:t.subtotal,totalAmount:t==null?void 0:t.totalAmount})})})})]})}const F={title:`Plan details | Dashboard - ${v.site.name}`};function Y(){const{id:t=""}=k(),i=B({queryKey:["plan",t],queryFn:async()=>(await u.get(x.plan.details+t)).data});return i.isPending||i.isLoading?s.jsx(C,{}):i.isError?s.jsx(I,{route:d.dashboard.plan.root}):s.jsxs(s.Fragment,{children:[s.jsx(S,{children:s.jsxs("title",{children:[" ",F.title]})}),s.jsx(Q,{plan:i.data})]})}export{Y as default};
